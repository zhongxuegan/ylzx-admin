{"remainingRequest":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\src\\main\\statistics\\user_fission_keep.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\src\\main\\statistics\\user_fission_keep.vue","mtime":1597927932910},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\\\u949F\\u5B66\\u521A\\\\Desktop\\\\jfzx-admin\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { exportExcel } from '@/utils/index.js';\nexport default {\n  name: 'user_fission_keep',\n  data: function data() {\n    return {\n      dialogVisible: false,\n      tabsName: 'user_fission',\n      tableLoading_fission: true,\n      tableLoading_keep: true,\n      tableLoading_master: false,\n      tableLoading_other: true,\n      fission_startDate: this.$moment().subtract(7, 'days').format('YYYY-MM-DD'),\n      fission_endDate: this.$moment().format('YYYY-MM-DD'),\n      fission_select_userId: '',\n      fission_page: 1,\n      fission_size: 10,\n      fissionData: [],\n      fission_cur_total: 0,\n      fissionDetailData: [],\n      keep_startDate: this.$moment().subtract(7, 'days').format('YYYY-MM-DD'),\n      keep_endDate: this.$moment().format('YYYY-MM-DD'),\n      keep_page: 1,\n      keep_size: 10,\n      keepData: [],\n      keep_cur_total: 0,\n      master_startDate: null,\n      master_endDate: null,\n      selectVal: 1,\n      select_inputId: '',\n      master_page: 1,\n      master_size: 10,\n      masterData: [],\n      master_cur_total: 0\n    };\n  },\n  methods: {\n    showMsg: function showMsg(msg) {\n      this.$message({\n        message: msg,\n        type: 'warning'\n      });\n    },\n    startDateChange: function startDateChange(name) {\n      if (name === 'user_fission') {\n        if (this.fission_startDate > this.fission_endDate) {\n          this.showMsg('起始日期不得大于结束日期');\n          this.fission_startDate = this.fission_endDate;\n        }\n      }\n\n      if (name === 'user_keep') {\n        if (this.keep_startDate > this.keep_endDate) {\n          this.showMsg('起始日期不得大于结束日期');\n          this.keep_startDate = this.keep_endDate;\n        }\n      }\n\n      if (name === 'master_apprentice') {\n        if (this.master_startDate > this.master_endDate) {\n          this.showMsg('起始日期不得大于结束日期');\n          this.master_startDate = this.master_endDate;\n        }\n      }\n    },\n    endDateChange: function endDateChange(name) {\n      if (name === 'user_fission') {\n        if (this.fission_startDate > this.fission_endDate) {\n          this.showMsg('结束日期不得小于起始日期');\n          this.fission_endDate = this.fission_startDate;\n        }\n      }\n\n      if (name === 'user_keep') {\n        if (this.keep_startDate > this.keep_endDate) {\n          this.showMsg('结束日期不得小于起始日期');\n          this.keep_endDate = this.keep_startDate;\n        }\n      }\n\n      if (name === 'master_apprentice') {\n        if (this.master_startDate > this.master_endDate) {\n          this.showMsg('结束日期不得小于起始日期');\n          this.master_endDate = this.master_startDate;\n        }\n      }\n    },\n    search: function search(tabName) {\n      if (tabName === 'user_fission') {\n        this.fission_page = 1;\n        this.getUserFission();\n      }\n\n      if (tabName === 'user_keep') {\n        this.keep_page = 1;\n        this.getUserKeep();\n      }\n\n      if (tabName === 'master_apprentice') {\n        if (this.select_inputId === '' || this.select_inputId === null) {\n          this.$message.error('请输入ID');\n          this.$refs['select_inputId'].focus();\n          return;\n        }\n\n        this.master_page = 1;\n        this.getMasterApprentice();\n      }\n    },\n    exportExcel: function exportExcel(tabName) {// let header = [],\n      // \tfilterVal = [],\n      // \tdata = [];\n      // if (tabName === 'user_fission') {\n      // \tfilterVal = [\n      // \t\t'userId', 'state', 'prenticeNum', 'grandsonNum',\n      // \t\t'towFissionNum', 'prenticBannedNum', 'grandsonBannedNum',\n      // \t\t'prenticArticleIp', 'prenticAdPv', 'prenticAdPvRate',\n      // \t\t'grandsonArticleId', 'grandsonAdPv', 'grandsonAdPvRate'\n      // \t];\n      // \theader = [\n      // \t\t'用户ID', '用户状态', '徒弟数量', '徒孙数量', '二次裂变系数',\n      // \t\t'徒弟封禁数', '徒孙封禁数', '徒弟文章IP量', '徒弟广告PV量',\n      // \t\t'徒弟广告点击率', '徒孙文章IP量', '徒孙广告PV量', '徒弟广告点击率'\n      // \t];\n      // \tdata = this.fissionData;\n      // }\n      // if (tabName === 'user_keep') { return; }\n      // if (tabName === 'master_apprentice') { return; }\n      // exportExcel({\n      // \theader,\n      // \tdata,\n      // \tfilterVal,\n      // \tfilename: '玉龙资讯'\n      // });\n    },\n    lookDetail: function lookDetail(row) {\n      this.tableLoading_other = true;\n      this.getfissionDetail(row.userId);\n    },\n    formatDetailData: function formatDetailData(userId, oldData) {\n      if (oldData.length <= 0) return oldData;\n      var newData = [];\n      var obj = {\n        other0: userId\n      };\n      oldData.forEach(function (item, index) {\n        obj['other' + (index + 1)] = item;\n      });\n      newData.push(obj);\n      return newData;\n    },\n    getfissionDetail: function () {\n      var _getfissionDetail = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(userId) {\n        var _this = this;\n\n        var postData, _ref, _ref$data, code, data;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                postData = {\n                  userId: userId\n                };\n                _context.next = 3;\n                return this.$axios.post(this.BASE_URL + 'admin/user/otherFissionDetails', postData);\n\n              case 3:\n                _ref = _context.sent;\n                _ref$data = _ref.data;\n                code = _ref$data.code;\n                data = _ref$data.data;\n\n                if (code == '200') {\n                  this.fissionDetailData = this.formatDetailData(userId, data);\n                  this.tableLoading_other = false;\n                }\n\n                this.$nextTick(function () {\n                  _this.dialogVisible = true;\n                });\n\n              case 9:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getfissionDetail(_x) {\n        return _getfissionDetail.apply(this, arguments);\n      }\n\n      return getfissionDetail;\n    }(),\n    //  当前页\n    handleCurrentChange: function handleCurrentChange(val, tabName) {\n      if (tabName === 'user_fission') {\n        this.fission_page = val;\n        this.getUserFission();\n      }\n\n      if (tabName === 'user_keep') {\n        this.keep_page = val;\n        this.getUserKeep();\n      }\n\n      if (tabName === 'master_apprentice') {\n        this.master_page = val;\n        this.getMasterApprentice();\n      }\n    },\n    // 每页条数\n    handleSizeChange: function handleSizeChange(val, tabName) {\n      if (tabName === 'user_fission') {\n        this.fission_size = val;\n        this.getUserFission();\n      }\n\n      if (tabName === 'user_keep') {\n        this.keep_size = val;\n        this.getUserKeep();\n      }\n\n      if (tabName === 'master_apprentice') {\n        this.master_size = val;\n        this.getMasterApprentice();\n      }\n    },\n    stateFormat: function stateFormat(row, column, cellValue, index) {\n      var list = ['禁用', '正常', '异常'];\n      return list[cellValue];\n    },\n    relationShipFormat: function relationShipFormat(row, column, cellValue, index) {\n      if (cellValue === null) return '——';\n      var list = ['徒孙...', '徒孙', '徒弟', '师父', '师爷', '师爷...'];\n      return list[cellValue - 1];\n    },\n    getUserFission: function () {\n      var _getUserFission = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        var postData, _ref2, _ref2$data, code, data;\n\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                this.tableLoading_fission = true;\n                postData = {\n                  startDate: this.fission_startDate,\n                  endDate: this.fission_endDate,\n                  userId: this.fission_select_userId,\n                  page: this.fission_page,\n                  size: this.fission_size\n                };\n                _context2.next = 4;\n                return this.$axios.post(this.BASE_URL + 'admin/user/fissionStatistics', postData);\n\n              case 4:\n                _ref2 = _context2.sent;\n                _ref2$data = _ref2.data;\n                code = _ref2$data.code;\n                data = _ref2$data.data;\n\n                if (code == '200') {\n                  this.fissionData = data.list;\n                  this.fission_cur_total = data.total;\n                  this.tableLoading_fission = false;\n                }\n\n              case 9:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function getUserFission() {\n        return _getUserFission.apply(this, arguments);\n      }\n\n      return getUserFission;\n    }(),\n    getUserKeep: function () {\n      var _getUserKeep = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee3() {\n        var postData, _ref3, _ref3$data, code, data, message;\n\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                this.tableLoading_keep = true;\n                postData = {\n                  startDate: this.keep_startDate,\n                  endDate: this.keep_endDate,\n                  page: this.keep_page,\n                  size: this.keep_size\n                };\n                _context3.next = 4;\n                return this.$axios.post(this.BASE_URL + 'admin/statistics/userRetentionAnalysis', postData);\n\n              case 4:\n                _ref3 = _context3.sent;\n                _ref3$data = _ref3.data;\n                code = _ref3$data.code;\n                data = _ref3$data.data;\n                message = _ref3$data.message;\n\n                if (code == '200') {\n                  this.keepData = data.list;\n                  this.keep_cur_total = data.total;\n                  this.tableLoading_keep = false;\n                }\n\n              case 10:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function getUserKeep() {\n        return _getUserKeep.apply(this, arguments);\n      }\n\n      return getUserKeep;\n    }(),\n    getMasterApprentice: function () {\n      var _getMasterApprentice = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee4() {\n        var postData, _ref4, _ref4$data, code, data;\n\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                this.tableLoading_master = true;\n                postData = {\n                  startDate: this.master_startDate,\n                  endDate: this.master_endDate,\n                  parentUserIdType: this.selectVal,\n                  userId: this.select_inputId,\n                  page: this.master_page,\n                  size: this.master_size\n                };\n                _context4.prev = 2;\n                _context4.next = 5;\n                return this.$axios.post(this.BASE_URL + 'admin/user/relationshipStatistics', postData);\n\n              case 5:\n                _ref4 = _context4.sent;\n                _ref4$data = _ref4.data;\n                code = _ref4$data.code;\n                data = _ref4$data.data;\n\n                if (code === '200') {\n                  this.masterData = data.list;\n                  this.master_cur_total = data.total;\n                  this.tableLoading_master = false;\n                }\n\n                _context4.next = 17;\n                break;\n\n              case 12:\n                _context4.prev = 12;\n                _context4.t0 = _context4[\"catch\"](2);\n                // 清空数据 关闭加载动画\n                this.masterData = [];\n                this.master_cur_total = 0;\n                this.tableLoading_master = false;\n\n              case 17:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this, [[2, 12]]);\n      }));\n\n      function getMasterApprentice() {\n        return _getMasterApprentice.apply(this, arguments);\n      }\n\n      return getMasterApprentice;\n    }()\n  },\n  created: function created() {\n    this.getUserFission();\n    this.getUserKeep();\n  }\n};",{"version":3,"sources":["user_fission_keep.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<div class=\"crumbs\">\r\n\t\t\t<el-breadcrumb separator=\"/\">\r\n\t\t\t\t<el-breadcrumb-item>\r\n\t\t\t\t\t<i class=\"el-icon-lx-cascades\"></i>\r\n\t\t\t\t\t用户裂变留存\r\n\t\t\t\t</el-breadcrumb-item>\r\n\t\t\t</el-breadcrumb>\r\n\t\t</div>\r\n\t\t<div class=\"container\">\r\n\t\t\t<el-tabs v-model=\"tabsName\">\r\n\t\t\t\t<el-tab-pane label=\"用户裂变\" name=\"user_fission\">\r\n\t\t\t\t\t<div class=\"search\">\r\n\t\t\t\t\t\t<el-date-picker\r\n\t\t\t\t\t\t\ttype=\"date\"\r\n\t\t\t\t\t\t\tvalue-format=\"yyyy-MM-dd\"\r\n\t\t\t\t\t\t\tformat=\"yyyy-MM-dd\"\r\n\t\t\t\t\t\t\tplaceholder=\"开始时间\"\r\n\t\t\t\t\t\t\tv-model=\"fission_startDate\"\r\n\t\t\t\t\t\t\tclass=\"handle-label mr10\"\r\n\t\t\t\t\t\t\t@change=\"startDateChange('user_fission')\"\r\n\t\t\t\t\t\t></el-date-picker>\r\n\t\t\t\t\t\t<i class=\"line mr10\">-</i>\r\n\t\t\t\t\t\t<el-date-picker\r\n\t\t\t\t\t\t\ttype=\"date\"\r\n\t\t\t\t\t\t\tvalue-format=\"yyyy-MM-dd\"\r\n\t\t\t\t\t\t\tformat=\"yyyy-MM-dd\"\r\n\t\t\t\t\t\t\tplaceholder=\"结束时间\"\r\n\t\t\t\t\t\t\tv-model=\"fission_endDate\"\r\n\t\t\t\t\t\t\tclass=\"handle-label mr10\"\r\n\t\t\t\t\t\t\t@change=\"endDateChange('user_fission')\"\r\n\t\t\t\t\t\t></el-date-picker>\r\n\t\t\t\t\t\t<el-input v-model=\"fission_select_userId\" clearable placeholder=\"用户ID\" class=\"handle-input mr10\"></el-input>\r\n\t\t\t\t\t\t<el-button type=\"primary\" @click=\"search('user_fission')\">搜索</el-button>\r\n\t\t\t\t\t\t<el-button type=\"primary\" @click=\"exportExcel('user_fission')\">导出</el-button>\r\n\t\t\t\t\t\t<span class=\"font-class\">默认展示近7天的数据</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<el-table v-loading=\"tableLoading_fission\" :data=\"fissionData\" border class=\"table\" ref=\"multipleTable\">\r\n\t\t\t\t\t\t<el-table-column prop=\"userId\" label=\"用户ID\" align=\"center\" sortable fixed></el-table-column>\r\n\t\t\t\t\t\t<el-table-column prop=\"state\" label=\"用户状态\" :formatter=\"stateFormat\" align=\"center\"></el-table-column>\r\n\t\t\t\t\t\t<el-table-column prop=\"prenticeNum\" label=\"徒弟数量\" align=\"center\" sortable></el-table-column>\r\n\t\t\t\t\t\t<el-table-column prop=\"grandsonNum\" label=\"徒孙数量\" align=\"center\" sortable></el-table-column>\r\n\t\t\t\t\t\t<el-table-column label=\"其他裂变\" align=\"center\" width=\"120\">\r\n\t\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t\t<el-button type=\"primary\" @click=\"lookDetail(scope.row)\">查看详情</el-button>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t</el-table-column>\r\n\t\t\t\t\t\t<el-table-column prop=\"towFissionNum\" label=\"二次裂变系数\" align=\"center\" sortable></el-table-column>\r\n\t\t\t\t\t\t<el-table-column prop=\"prenticBannedNum\" label=\"徒弟封禁数\" align=\"center\" sortable></el-table-column>\r\n\t\t\t\t\t\t<el-table-column prop=\"grandsonBannedNum\" label=\"徒孙封禁数\" align=\"center\" sortable></el-table-column>\r\n\t\t\t\t\t\t<el-table-column prop=\"prenticArticleIp\" label=\"徒弟文章IP量\" align=\"center\" sortable></el-table-column>\r\n\t\t\t\t\t\t<el-table-column prop=\"prenticAdPv\" label=\"徒弟广告PV量\" align=\"center\" sortable></el-table-column>\r\n\t\t\t\t\t\t<el-table-column prop=\"prenticAdPvRate\" label=\"徒弟广告点击率\" align=\"center\" sortable></el-table-column>\r\n\t\t\t\t\t\t<el-table-column prop=\"grandsonArticleId\" label=\"徒孙文章IP量\" align=\"center\" sortable></el-table-column>\r\n\t\t\t\t\t\t<el-table-column prop=\"grandsonAdPv\" label=\"徒孙广告PV量\" align=\"center\" sortable></el-table-column>\r\n\t\t\t\t\t\t<el-table-column prop=\"grandsonAdPvRate\" label=\"徒孙广告点击率\" align=\"center\" sortable></el-table-column>\r\n\t\t\t\t\t</el-table>\r\n\t\t\t\t\t<div class=\"pagination\">\r\n\t\t\t\t\t\t<el-pagination\r\n\t\t\t\t\t\t\tbackground\r\n\t\t\t\t\t\t\t@current-change=\"handleCurrentChange($event, 'user_fission')\"\r\n\t\t\t\t\t\t\t@size-change=\"handleSizeChange($event, 'user_fission')\"\r\n\t\t\t\t\t\t\tlayout=\"total, sizes, prev, pager, next, jumper\"\r\n\t\t\t\t\t\t\t:page-sizes=\"[10, 20, 50, 100]\"\r\n\t\t\t\t\t\t\t:current-page.sync=\"fission_page\"\r\n\t\t\t\t\t\t\t:total=\"fission_cur_total\"\r\n\t\t\t\t\t\t></el-pagination>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</el-tab-pane>\r\n\r\n\t\t\t\t<el-tab-pane label=\"用户留存\" name=\"user_keep\">\r\n\t\t\t\t\t<div class=\"search\">\r\n\t\t\t\t\t\t<el-date-picker\r\n\t\t\t\t\t\t\ttype=\"date\"\r\n\t\t\t\t\t\t\tvalue-format=\"yyyy-MM-dd\"\r\n\t\t\t\t\t\t\tformat=\"yyyy-MM-dd\"\r\n\t\t\t\t\t\t\tplaceholder=\"开始时间\"\r\n\t\t\t\t\t\t\tv-model=\"keep_startDate\"\r\n\t\t\t\t\t\t\tclass=\"handle-label mr10\"\r\n\t\t\t\t\t\t\t@change=\"startDateChange('user_keep')\"\r\n\t\t\t\t\t\t></el-date-picker>\r\n\t\t\t\t\t\t<i class=\"line mr10\">-</i>\r\n\t\t\t\t\t\t<el-date-picker\r\n\t\t\t\t\t\t\ttype=\"date\"\r\n\t\t\t\t\t\t\tvalue-format=\"yyyy-MM-dd\"\r\n\t\t\t\t\t\t\tformat=\"yyyy-MM-dd\"\r\n\t\t\t\t\t\t\tplaceholder=\"结束时间\"\r\n\t\t\t\t\t\t\tv-model=\"keep_endDate\"\r\n\t\t\t\t\t\t\tclass=\"handle-label mr10\"\r\n\t\t\t\t\t\t\t@change=\"endDateChange('user_keep')\"\r\n\t\t\t\t\t\t></el-date-picker>\r\n\t\t\t\t\t\t<el-button type=\"primary\" @click=\"search('user_keep')\">搜索</el-button>\r\n\t\t\t\t\t\t<el-button type=\"primary\" @click=\"exportExcel('user_keep')\">导出</el-button>\r\n\t\t\t\t\t\t<span class=\"font-class\">默认展示近7天的数据</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<el-table v-loading=\"tableLoading_keep\" :data=\"keepData\" border class=\"table\" ref=\"multipleTable\">\r\n\t\t\t\t\t\t<el-table-column prop=\"countDate\" label=\"日期\" align=\"center\" sortable></el-table-column>\r\n\t\t\t\t\t\t<el-table-column prop=\"totalUserNum\" label=\"用户量\" align=\"center\" sortable></el-table-column>\r\n\t\t\t\t\t\t<el-table-column prop=\"loginCount\" label=\"登录人数\" align=\"center\" sortable></el-table-column>\r\n\t\t\t\t\t\t<el-table-column prop=\"userJobsNum\" label=\"干活人数\" align=\"center\" sortable></el-table-column>\r\n\t\t\t\t\t\t<el-table-column prop=\"loginCountRate\" label=\"干活登录比\" align=\"center\" sortable></el-table-column>\r\n\t\t\t\t\t\t<el-table-column prop=\"userNum\" label=\"新增用户数\" align=\"center\" sortable></el-table-column>\r\n\t\t\t\t\t\t<el-table-column prop=\"newUserJobsNum\" label=\"新增干活数\" align=\"center\" sortable></el-table-column>\r\n\t\t\t\t\t\t<el-table-column prop=\"oneDayUserRetention\" label=\"1日后干活留存\" align=\"center\" sortable></el-table-column>\r\n\t\t\t\t\t\t<el-table-column prop=\"threeDayUserRetention\" label=\"3日后干活留存\" align=\"center\" sortable></el-table-column>\r\n\t\t\t\t\t\t<el-table-column prop=\"sevenDayUserRetention\" label=\"7日后干活留存\" align=\"center\" sortable></el-table-column>\r\n\t\t\t\t\t</el-table>\r\n\t\t\t\t\t<div class=\"pagination\">\r\n\t\t\t\t\t\t<el-pagination\r\n\t\t\t\t\t\t\tbackground\r\n\t\t\t\t\t\t\t@current-change=\"handleCurrentChange($event, 'user_keep')\"\r\n\t\t\t\t\t\t\t@size-change=\"handleSizeChange($event, 'user_keep')\"\r\n\t\t\t\t\t\t\tlayout=\"total, sizes, prev, pager, next, jumper\"\r\n\t\t\t\t\t\t\t:page-sizes=\"[10, 20, 50, 100]\"\r\n\t\t\t\t\t\t\t:current-page.sync=\"keep_page\"\r\n\t\t\t\t\t\t\t:total=\"keep_cur_total\"\r\n\t\t\t\t\t\t></el-pagination>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</el-tab-pane>\r\n\r\n\t\t\t\t<el-tab-pane label=\"师徒关系查询\" name=\"master_apprentice\">\r\n\t\t\t\t\t<div class=\"search\">\r\n\t\t\t\t\t\t<el-date-picker\r\n\t\t\t\t\t\t\ttype=\"date\"\r\n\t\t\t\t\t\t\tvalue-format=\"yyyy-MM-dd\"\r\n\t\t\t\t\t\t\tformat=\"yyyy-MM-dd\"\r\n\t\t\t\t\t\t\tplaceholder=\"开始时间\"\r\n\t\t\t\t\t\t\tv-model=\"master_startDate\"\r\n\t\t\t\t\t\t\tclass=\"handle-label mr10\"\r\n\t\t\t\t\t\t\t@change=\"startDateChange('master_apprentice')\"\r\n\t\t\t\t\t\t></el-date-picker>\r\n\t\t\t\t\t\t<i class=\"line mr10\">-</i>\r\n\t\t\t\t\t\t<el-date-picker\r\n\t\t\t\t\t\t\ttype=\"date\"\r\n\t\t\t\t\t\t\tvalue-format=\"yyyy-MM-dd\"\r\n\t\t\t\t\t\t\tformat=\"yyyy-MM-dd\"\r\n\t\t\t\t\t\t\tplaceholder=\"结束时间\"\r\n\t\t\t\t\t\t\tv-model=\"master_endDate\"\r\n\t\t\t\t\t\t\tclass=\"handle-label mr10\"\r\n\t\t\t\t\t\t\t@change=\"endDateChange('master_apprentice')\"\r\n\t\t\t\t\t\t></el-date-picker>\r\n\t\t\t\t\t\t<el-select v-model=\"selectVal\" placeholder=\"请选择\" class=\"handle-input mr10 handle-select\">\r\n\t\t\t\t\t\t\t<el-option label=\"师傅ID\" :value=\"1\"></el-option>\r\n\t\t\t\t\t\t\t<el-option label=\"徒弟ID\" :value=\"2\"></el-option>\r\n\t\t\t\t\t\t\t<el-option label=\"徒孙ID\" :value=\"3\"></el-option>\r\n\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t\t<el-input v-model.number=\"select_inputId\" ref=\"select_inputId\" clearable placeholder=\"输入ID\" class=\"handle-input mr10\"></el-input>\r\n\t\t\t\t\t\t<el-button type=\"primary\" @click=\"search('master_apprentice')\">搜索</el-button>\r\n\t\t\t\t\t\t<el-button type=\"primary\" @click=\"exportExcel('master_apprentice')\">导出</el-button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<el-table v-loading=\"tableLoading_master\" :data=\"masterData\" border class=\"table\" ref=\"multipleTable\">\r\n\t\t\t\t\t\t<el-table-column prop=\"userId\" label=\"ID\" align=\"center\" sortable fixed></el-table-column>\r\n\t\t\t\t\t\t<el-table-column prop=\"relationship\" label=\"师徒关系\" :formatter=\"relationShipFormat\" align=\"center\" sortable></el-table-column>\r\n\t\t\t\t\t\t<el-table-column prop=\"state\" label=\"状态\" :formatter=\"stateFormat\" align=\"center\"></el-table-column>\r\n\t\t\t\t\t\t<el-table-column prop=\"articleIp\" label=\"总文章IP\" align=\"center\" sortable></el-table-column>\r\n\t\t\t\t\t\t<el-table-column prop=\"payIp\" label=\"总支付IP\" align=\"center\" sortable></el-table-column>\r\n\t\t\t\t\t\t<el-table-column prop=\"adPv\" label=\"总广告PV\" align=\"center\" sortable></el-table-column>\r\n\t\t\t\t\t\t<el-table-column prop=\"adIp\" label=\"总广告IP\" align=\"center\" sortable></el-table-column>\r\n\t\t\t\t\t\t<el-table-column prop=\"adPvRate\" label=\"广告点击率\" align=\"center\" sortable></el-table-column>\r\n\t\t\t\t\t\t<el-table-column prop=\"payMoney\" label=\"支付金额\" align=\"center\" sortable></el-table-column>\r\n\t\t\t\t\t</el-table>\r\n\t\t\t\t\t<div class=\"pagination\">\r\n\t\t\t\t\t\t<el-pagination\r\n\t\t\t\t\t\t\tbackground\r\n\t\t\t\t\t\t\t@current-change=\"handleCurrentChange($event, 'master_apprentice')\"\r\n\t\t\t\t\t\t\t@size-change=\"handleSizeChange($event, 'master_apprentice')\"\r\n\t\t\t\t\t\t\tlayout=\"total, sizes, prev, pager, next, jumper\"\r\n\t\t\t\t\t\t\t:page-sizes=\"[10, 20, 50, 100]\"\r\n\t\t\t\t\t\t\t:current-page.sync=\"master_page\"\r\n\t\t\t\t\t\t\t:total=\"master_cur_total\"\r\n\t\t\t\t\t\t></el-pagination>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</el-tab-pane>\r\n\t\t\t</el-tabs>\r\n\t\t</div>\r\n\r\n\t\t<!-- 详情列表 -->\r\n\t\t<el-dialog title=\"其他裂变\" :validate-on-rule-change=\"false\" :visible.sync=\"dialogVisible\" width=\"70%\">\r\n\t\t\t<el-table v-loading=\"tableLoading_other\" :data=\"fissionDetailData\" border class=\"table\" ref=\"multipleTable\">\r\n\t\t\t\t<el-table-column\r\n\t\t\t\t\tv-for=\"(value, key, index) in fissionDetailData[0]\"\r\n\t\t\t\t\t:key=\"key\"\r\n\t\t\t\t\t:prop=\"key\"\r\n\t\t\t\t\t:label=\"index === 0 ? '用户ID' : index === 1 ? '徒弟（1级）' : index === 2 ? '徒孙（2级）' : index + '级'\"\r\n\t\t\t\t\talign=\"center\"\r\n\t\t\t\t\tsortable\r\n\t\t\t\t\tfixed\r\n\t\t\t\t></el-table-column>\r\n\t\t\t</el-table>\r\n\t\t\t<span slot=\"footer\" class=\"dialog-footer\"><el-button type=\"primary\" @click=\"dialogVisible = false\">确 定</el-button></span>\r\n\t\t</el-dialog>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport { exportExcel } from '@/utils/index.js';\r\nexport default {\r\n\tname: 'user_fission_keep',\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tdialogVisible: false,\r\n\t\t\ttabsName: 'user_fission',\r\n\r\n\t\t\ttableLoading_fission: true,\r\n\t\t\ttableLoading_keep: true,\r\n\t\t\ttableLoading_master: false,\r\n\t\t\ttableLoading_other: true,\r\n\r\n\t\t\tfission_startDate: this.$moment().subtract(7,'days').format('YYYY-MM-DD'),\r\n\t\t\tfission_endDate: this.$moment().format('YYYY-MM-DD'),\r\n\t\t\tfission_select_userId: '',\r\n\t\t\tfission_page: 1,\r\n\t\t\tfission_size: 10,\r\n\t\t\tfissionData: [],\r\n\t\t\tfission_cur_total: 0,\r\n\t\t\tfissionDetailData: [],\r\n\r\n\t\t\tkeep_startDate: this.$moment().subtract(7,'days').format('YYYY-MM-DD'),\r\n\t\t\tkeep_endDate: this.$moment().format('YYYY-MM-DD'),\r\n\t\t\tkeep_page: 1,\r\n\t\t\tkeep_size: 10,\r\n\t\t\tkeepData: [],\r\n\t\t\tkeep_cur_total: 0,\r\n\r\n\t\t\tmaster_startDate: null,\r\n\t\t\tmaster_endDate: null,\r\n\t\t\tselectVal: 1,\r\n\t\t\tselect_inputId: '',\r\n\t\t\tmaster_page: 1,\r\n\t\t\tmaster_size: 10,\r\n\t\t\tmasterData: [],\r\n\t\t\tmaster_cur_total: 0\r\n\t\t};\r\n\t},\r\n\tmethods: {\r\n\t\tshowMsg(msg) {\r\n\t\t\tthis.$message({ message: msg, type: 'warning' });\r\n\t\t},\r\n\t\tstartDateChange(name) {\r\n\t\t\tif (name === 'user_fission') {\r\n\t\t\t\tif (this.fission_startDate > this.fission_endDate) {\r\n\t\t\t\t\tthis.showMsg('起始日期不得大于结束日期');\r\n\t\t\t\t\tthis.fission_startDate = this.fission_endDate;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (name === 'user_keep') {\r\n\t\t\t\tif (this.keep_startDate > this.keep_endDate) {\r\n\t\t\t\t\tthis.showMsg('起始日期不得大于结束日期');\r\n\t\t\t\t\tthis.keep_startDate = this.keep_endDate;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (name === 'master_apprentice') {\r\n\t\t\t\tif (this.master_startDate > this.master_endDate) {\r\n\t\t\t\t\tthis.showMsg('起始日期不得大于结束日期');\r\n\t\t\t\t\tthis.master_startDate = this.master_endDate;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tendDateChange(name) {\r\n\t\t\tif (name === 'user_fission') {\r\n\t\t\t\tif (this.fission_startDate > this.fission_endDate) {\r\n\t\t\t\t\tthis.showMsg('结束日期不得小于起始日期');\r\n\t\t\t\t\tthis.fission_endDate = this.fission_startDate;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (name === 'user_keep') {\r\n\t\t\t\tif (this.keep_startDate > this.keep_endDate) {\r\n\t\t\t\t\tthis.showMsg('结束日期不得小于起始日期');\r\n\t\t\t\t\tthis.keep_endDate = this.keep_startDate;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (name === 'master_apprentice') {\r\n\t\t\t\tif (this.master_startDate > this.master_endDate) {\r\n\t\t\t\t\tthis.showMsg('结束日期不得小于起始日期');\r\n\t\t\t\t\tthis.master_endDate = this.master_startDate;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tsearch(tabName) {\r\n\t\t\tif (tabName === 'user_fission') {\r\n\t\t\t\tthis.fission_page = 1;\r\n\t\t\t\tthis.getUserFission();\r\n\t\t\t}\r\n\t\t\tif (tabName === 'user_keep') {\r\n\t\t\t\tthis.keep_page = 1;\r\n\t\t\t\tthis.getUserKeep();\r\n\t\t\t}\r\n\t\t\tif (tabName === 'master_apprentice') {\r\n\t\t\t\tif (this.select_inputId === '' || this.select_inputId === null) {\r\n\t\t\t\t\tthis.$message.error('请输入ID');\r\n\t\t\t\t\tthis.$refs['select_inputId'].focus();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.master_page = 1;\r\n\t\t\t\tthis.getMasterApprentice();\r\n\t\t\t}\r\n\t\t},\r\n\t\texportExcel(tabName) {\r\n\t\t\t// let header = [],\r\n\t\t\t// \tfilterVal = [],\r\n\t\t\t// \tdata = [];\r\n\t\t\t// if (tabName === 'user_fission') {\r\n\t\t\t// \tfilterVal = [\r\n\t\t\t// \t\t'userId', 'state', 'prenticeNum', 'grandsonNum',\r\n\t\t\t// \t\t'towFissionNum', 'prenticBannedNum', 'grandsonBannedNum',\r\n\t\t\t// \t\t'prenticArticleIp', 'prenticAdPv', 'prenticAdPvRate',\r\n\t\t\t// \t\t'grandsonArticleId', 'grandsonAdPv', 'grandsonAdPvRate'\r\n\t\t\t// \t];\r\n\t\t\t// \theader = [\r\n\t\t\t// \t\t'用户ID', '用户状态', '徒弟数量', '徒孙数量', '二次裂变系数',\r\n\t\t\t// \t\t'徒弟封禁数', '徒孙封禁数', '徒弟文章IP量', '徒弟广告PV量',\r\n\t\t\t// \t\t'徒弟广告点击率', '徒孙文章IP量', '徒孙广告PV量', '徒弟广告点击率'\r\n\t\t\t// \t];\r\n\t\t\t// \tdata = this.fissionData;\r\n\t\t\t// }\r\n\t\t\t// if (tabName === 'user_keep') { return; }\r\n\t\t\t// if (tabName === 'master_apprentice') { return; }\r\n\t\t\t// exportExcel({\r\n\t\t\t// \theader,\r\n\t\t\t// \tdata,\r\n\t\t\t// \tfilterVal,\r\n\t\t\t// \tfilename: '玉龙资讯'\r\n\t\t\t// });\r\n\t\t},\r\n\t\tlookDetail(row) {\r\n\t\t\tthis.tableLoading_other = true;\r\n\t\t\tthis.getfissionDetail(row.userId);\r\n\t\t},\r\n\t\tformatDetailData(userId, oldData) {\r\n\t\t\tif (oldData.length <= 0) return oldData;\r\n\t\t\tlet newData = [];\r\n\t\t\tlet obj = { other0: userId };\r\n\t\t\toldData.forEach((item, index) => {\r\n\t\t\t\tobj['other' + (index + 1)] = item;\r\n\t\t\t});\r\n\t\t\tnewData.push(obj);\r\n\t\t\treturn newData;\r\n\t\t},\r\n\t\tasync getfissionDetail(userId) {\r\n\t\t\tlet postData = { userId };\r\n\t\t\tlet {\r\n\t\t\t\tdata: { code, data }\r\n\t\t\t} = await this.$axios.post(this.BASE_URL + 'admin/user/otherFissionDetails', postData);\r\n\t\t\tif (code == '200') {\r\n\t\t\t\tthis.fissionDetailData = this.formatDetailData(userId, data);\r\n\t\t\t\tthis.tableLoading_other = false;\r\n\t\t\t}\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tthis.dialogVisible = true;\r\n\t\t\t});\r\n\t\t},\r\n\t\t//  当前页\r\n\t\thandleCurrentChange(val, tabName) {\r\n\t\t\tif (tabName === 'user_fission') {\r\n\t\t\t\tthis.fission_page = val;\r\n\t\t\t\tthis.getUserFission();\r\n\t\t\t}\r\n\t\t\tif (tabName === 'user_keep') {\r\n\t\t\t\tthis.keep_page = val;\r\n\t\t\t\tthis.getUserKeep();\r\n\t\t\t}\r\n\t\t\tif (tabName === 'master_apprentice') {\r\n\t\t\t\tthis.master_page = val;\r\n\t\t\t\tthis.getMasterApprentice();\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 每页条数\r\n\t\thandleSizeChange(val, tabName) {\r\n\t\t\tif (tabName === 'user_fission') {\r\n\t\t\t\tthis.fission_size = val;\r\n\t\t\t\tthis.getUserFission();\r\n\t\t\t}\r\n\t\t\tif (tabName === 'user_keep') {\r\n\t\t\t\tthis.keep_size = val;\r\n\t\t\t\tthis.getUserKeep();\r\n\t\t\t}\r\n\t\t\tif (tabName === 'master_apprentice') {\r\n\t\t\t\tthis.master_size = val;\r\n\t\t\t\tthis.getMasterApprentice();\r\n\t\t\t}\r\n\t\t},\r\n\t\tstateFormat(row, column, cellValue, index) {\r\n\t\t\tconst list = ['禁用', '正常', '异常'];\r\n\t\t\treturn list[cellValue];\r\n\t\t},\r\n\t\trelationShipFormat(row, column, cellValue, index) {\r\n\t\t\tif (cellValue === null) return '——';\r\n\t\t\tconst list = ['徒孙...', '徒孙', '徒弟', '师父', '师爷', '师爷...'];\r\n\t\t\treturn list[cellValue - 1];\r\n\t\t},\r\n\t\tasync getUserFission() {\r\n\t\t\tthis.tableLoading_fission = true;\r\n\t\t\tlet postData = {\r\n\t\t\t\tstartDate: this.fission_startDate,\r\n\t\t\t\tendDate: this.fission_endDate,\r\n\t\t\t\tuserId: this.fission_select_userId,\r\n\t\t\t\tpage: this.fission_page,\r\n\t\t\t\tsize: this.fission_size\r\n\t\t\t};\r\n\t\t\tlet {\r\n\t\t\t\tdata: { code, data }\r\n\t\t\t} = await this.$axios.post(this.BASE_URL + 'admin/user/fissionStatistics', postData);\r\n\t\t\tif (code == '200') {\r\n\t\t\t\tthis.fissionData = data.list;\r\n\t\t\t\tthis.fission_cur_total = data.total;\r\n\t\t\t\tthis.tableLoading_fission = false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync getUserKeep() {\r\n\t\t\tthis.tableLoading_keep = true;\r\n\t\t\tlet postData = {\r\n\t\t\t\tstartDate: this.keep_startDate,\r\n\t\t\t\tendDate: this.keep_endDate,\r\n\t\t\t\tpage: this.keep_page,\r\n\t\t\t\tsize: this.keep_size\r\n\t\t\t};\r\n\t\t\tlet {\r\n\t\t\t\tdata: { code, data, message }\r\n\t\t\t} = await this.$axios.post(this.BASE_URL + 'admin/statistics/userRetentionAnalysis', postData);\r\n\t\t\tif (code == '200') {\r\n\t\t\t\tthis.keepData = data.list;\r\n\t\t\t\tthis.keep_cur_total = data.total;\r\n\t\t\t\tthis.tableLoading_keep = false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync getMasterApprentice() {\r\n\t\t\tthis.tableLoading_master = true;\r\n\t\t\tlet postData = {\r\n\t\t\t\tstartDate: this.master_startDate,\r\n\t\t\t\tendDate: this.master_endDate,\r\n\t\t\t\tparentUserIdType: this.selectVal,\r\n\t\t\t\tuserId: this.select_inputId,\r\n\t\t\t\tpage: this.master_page,\r\n\t\t\t\tsize: this.master_size\r\n\t\t\t};\r\n\t\t\ttry {\r\n\t\t\t\t// 查询 如果 用户不存在 返回的是400  try catch 捕获promise.reject()\r\n\t\t\t\tlet {\r\n\t\t\t\t\tdata: { code, data }\r\n\t\t\t\t} = await this.$axios.post(this.BASE_URL + 'admin/user/relationshipStatistics', postData);\r\n\t\t\t\tif (code === '200') {\r\n\t\t\t\t\tthis.masterData = data.list;\r\n\t\t\t\t\tthis.master_cur_total = data.total;\r\n\t\t\t\t\tthis.tableLoading_master = false;\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\t// 清空数据 关闭加载动画\r\n\t\t\t\tthis.masterData = [];\r\n\t\t\t\tthis.master_cur_total = 0;\r\n\t\t\t\tthis.tableLoading_master = false;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcreated() {\r\n\t\tthis.getUserFission();\r\n\t\tthis.getUserKeep();\r\n\t}\r\n};\r\n</script>\r\n\r\n<style scoped=\"scoped\">\r\n.tabs {\r\n\tmargin-top: 10px;\r\n}\r\n.handle-input {\r\n\twidth: 200px;\r\n\tdisplay: inline-block;\r\n}\r\n.handle-select {\r\n\twidth: 100px;\r\n}\r\n.search {\r\n\tmargin-top: 10px;\r\n\tmargin-bottom: 10px;\r\n}\r\n.mr10 {\r\n\tmargin-right: 10px;\r\n}\r\n</style>\n"],"sourceRoot":"src/main/statistics"}]}