{"remainingRequest":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\src\\main\\basic\\home_popup_windows.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\src\\main\\basic\\home_popup_windows.vue","mtime":1598013144485},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _parseInt from \"C:\\\\Users\\\\\\u949F\\u5B66\\u521A\\\\Desktop\\\\jfzx-admin\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/parse-int\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\\\u949F\\u5B66\\u521A\\\\Desktop\\\\jfzx-admin\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport \"core-js/modules/es6.function.name\";\nimport _Object$assign from \"C:\\\\Users\\\\\\u949F\\u5B66\\u521A\\\\Desktop\\\\jfzx-admin\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/object/assign\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: 'home_popup_windows',\n  data: function data() {\n    return {\n      hasC: false,\n      tableLoading: true,\n      dialogFormVisible: false,\n      formLabelWidth: '150px',\n      page: 1,\n      cur_total: 0,\n      size: 10,\n      tableData: [],\n      windowsForm: {\n        title: '',\n        status: '1',\n        sortNum: 1,\n        useType: 0,\n        imgurl: '',\n        paper: '',\n        isUseButton: true,\n        buttonName: '我知道了',\n        buttonUrl: '',\n        linkType: 1\n      },\n      uploadAction: this.BASE_URL + 'admin/upload/uploadImgByType',\n      tokenObj: {\n        token: localStorage.getItem('token')\n      },\n      uploadImgData: {\n        type: '4'\n      },\n      rules: {\n        title: [{\n          required: true,\n          message: '请输入标题',\n          trigger: 'blur'\n        }],\n        status: [{\n          required: true,\n          message: '请选择状态',\n          trigger: 'change'\n        }],\n        sortNum: [{\n          required: true,\n          message: '请输入排序',\n          trigger: 'blur'\n        }],\n        useType: [{\n          required: true,\n          message: '请选择针对用户',\n          trigger: 'change'\n        }],\n        paper: [{\n          required: true,\n          message: '请输入文案',\n          trigger: 'blur'\n        }],\n        isUseButton: [{\n          required: true,\n          message: '请选择是否有按钮',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  methods: {\n    addWindows: function addWindows() {\n      this.$router.push('/home_popup_windows_addWindows');\n    },\n    editActivity: function editActivity(row) {\n      var _this = this;\n\n      this.windowsForm = _Object$assign({}, row);\n      this.$nextTick(function () {\n        _this.$refs.windowsForm.clearValidate();\n\n        _this.$refs.content.setContent(row.paper);\n      });\n      this.dialogFormVisible = true;\n    },\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.page = val;\n      this.getData();\n    },\n    handleSizeChange: function handleSizeChange(val) {\n      this.size = val;\n      this.getData();\n    },\n    dialogClose: function dialogClose() {\n      this.dialogFormVisible = false;\n    },\n    onBeforeUploadImage: function onBeforeUploadImage(file) {\n      var isImg = this.isImage(file.name);\n      var isLit2M = this.isLit2M(file.size);\n      return isImg && isLit2M;\n    },\n    fileChange: function fileChange(res, file) {\n      this.windowsForm.imgurl = res.data;\n    },\n    handleRemove: function handleRemove() {\n      this.windowsForm.imgurl = '';\n    },\n    submitForm: function submitForm(formName) {\n      var _this2 = this;\n\n      this.$refs[formName].validate(function (valid) {\n        if (valid) {\n          _this2.$confirm('确定提交吗', '提示', {\n            confirmButtonText: '确定',\n            cancelButtonText: '取消',\n            type: 'warning'\n          }).then(function () {\n            _this2.saveWindows();\n          }).catch(function () {});\n        } else {\n          return false;\n        }\n      });\n    },\n    saveWindows: function () {\n      var _saveWindows = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var _ref, _ref$data, code, message;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.$axios.post(this.BASE_URL + 'admin/system/popout/updatePopout', this.windowsForm);\n\n              case 2:\n                _ref = _context.sent;\n                _ref$data = _ref.data;\n                code = _ref$data.code;\n                message = _ref$data.message;\n\n                if (!(code == '200')) {\n                  _context.next = 11;\n                  break;\n                }\n\n                this.$message.success(message);\n                this.getData();\n                this.dialogClose();\n                return _context.abrupt(\"return\");\n\n              case 11:\n                this.$message.error(message);\n\n              case 12:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function saveWindows() {\n        return _saveWindows.apply(this, arguments);\n      }\n\n      return saveWindows;\n    }(),\n    statusFormat: function statusFormat(row, column, cellValue, index) {\n      return cellValue === true ? '上架' : '下架';\n    },\n    typeFormat: function typeFormat(row, column, cellValue, index) {\n      return cellValue === 0 ? '普通用户' : '其他';\n    },\n    isImage: function isImage(fileName) {\n      // 判断是否是图片\n      var f = fileName;\n\n      if (f == null || f == undefined || f == '') {\n        return false;\n      }\n\n      if (!/\\.(?:png|jpg|bmp|gif|PNG|JPG|BMP|GIF|jpeg)$/.test(f)) {\n        this.$message.error('类型必须是图片(.png|jpg|bmp|gif|PNG|JPG|BMP|GIF)');\n        return false;\n      }\n\n      return true;\n    },\n    isLit2M: function isLit2M(size) {\n      if (size / 1024 / 1024 < 2) {\n        return true;\n      } else {\n        this.$message({\n          message: '图片大小不能超过 2MB!'\n        });\n        return false;\n      }\n    },\n    getData: function () {\n      var _getData = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        var postData, _ref2, _ref2$data, code, data, message;\n\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                postData = {\n                  page: this.page,\n                  size: this.size\n                };\n                _context2.next = 3;\n                return this.$axios.post(this.BASE_URL + 'admin/system/popout/listPagePopout', postData);\n\n              case 3:\n                _ref2 = _context2.sent;\n                _ref2$data = _ref2.data;\n                code = _ref2$data.code;\n                data = _ref2$data.data;\n                message = _ref2$data.message;\n\n                if (!(code == '200')) {\n                  _context2.next = 13;\n                  break;\n                }\n\n                this.tableData = data.list;\n                this.cur_total = _parseInt(data.total);\n                this.tableLoading = false;\n                return _context2.abrupt(\"return\");\n\n              case 13:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function getData() {\n        return _getData.apply(this, arguments);\n      }\n\n      return getData;\n    }()\n  },\n  created: function created() {\n    this.getData();\n  }\n};",{"version":3,"sources":["home_popup_windows.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<div class=\"crumbs\">\r\n\t\t\t<el-breadcrumb separator=\"/\">\r\n\t\t\t\t<el-breadcrumb-item>\r\n\t\t\t\t\t<i class=\"el-icon-lx-cascades\"></i>\r\n\t\t\t\t\t首页弹窗\r\n\t\t\t\t</el-breadcrumb-item>\r\n\t\t\t</el-breadcrumb>\r\n\t\t</div>\r\n\t\t<div class=\"container\">\r\n\t\t\t<div class=\"handle-box\"><el-button type=\"primary\" icon=\"add\" @click=\"addWindows\">新建弹窗</el-button></div>\r\n\t\t\t<el-table v-loading=\"tableLoading\" :data=\"tableData\" border class=\"table\" ref=\"multipleTable\">\r\n\t\t\t\t<el-table-column prop=\"sortNum\" label=\"排序\" align=\"center\" width=\"80\" sortable></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"title\" align=\"center\" label=\"标题\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"status\" align=\"center\" label=\"状态\" :formatter=\"statusFormat\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"updateTime\" align=\"center\" label=\"更新时间\" sortable></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"useType\" align=\"center\" label=\"针对用户\" :formatter=\"typeFormat\"></el-table-column>\r\n\t\t\t\t<el-table-column label=\"操作\" align=\"center\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<el-button type=\"primary\" @click=\"editActivity(scope.row)\">编辑</el-button>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t</el-table>\r\n\t\t\t<div class=\"pagination\">\r\n\t\t\t\t<el-pagination\r\n\t\t\t\t\tbackground\r\n\t\t\t\t\t@current-change=\"handleCurrentChange\"\r\n\t\t\t\t\t@size-change=\"handleSizeChange\"\r\n\t\t\t\t\tlayout=\"total, sizes, prev, pager, next, jumper\"\r\n\t\t\t\t\t:page-sizes=\"[10, 20, 50, 100]\"\r\n\t\t\t\t\t:current-page.sync=\"page\"\r\n\t\t\t\t\t:total=\"cur_total\"\r\n\t\t\t\t></el-pagination>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<!-- 编辑弹窗 -->\r\n\t\t<el-dialog title=\"编辑弹窗\" :validate-on-rule-change=\"false\" width=\"70%\" @closed=\"dialogClose\" :visible.sync=\"dialogFormVisible\">\r\n\t\t\t<el-form :model=\"windowsForm\" :label-width=\"formLabelWidth\" :rules=\"rules\" class=\"form--wrap\" ref=\"windowsForm\">\r\n\t\t\t\t<el-form-item label=\"标题\" prop=\"title\"><el-input v-model=\"windowsForm.title\"></el-input></el-form-item>\r\n\t\t\t\t<el-form-item label=\"状态\" prop=\"status\">\r\n\t\t\t\t\t<el-switch v-model=\"windowsForm.status\" active-color=\"#13ce66\" inactive-color=\"#dddddd\" :active-value=\"true\" :inactive-value=\"false\"></el-switch>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"排序\" prop=\"sortNum\">\r\n\t\t\t\t\t<el-input-number v-model=\"windowsForm.sortNum\" controls-position=\"right\"></el-input-number>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"针对用户\" prop=\"useType\">\r\n\t\t\t\t\t<el-select v-model=\"windowsForm.useType\"><el-option label=\"普通用户\" :value=\"0\"></el-option></el-select>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"图片\" prop=\"imgurl\">\r\n\t\t\t\t\t<div class=\"upload-box\">\r\n\t\t\t\t\t\t<el-upload\r\n\t\t\t\t\t\t\t:action=\"uploadAction\" \r\n\t\t\t\t\t\t\tref=\"upload\" \r\n\t\t\t\t\t\t\tlist-type=\"picture-card\" \r\n\t\t\t\t\t\t\t:headers=\"tokenObj\" \r\n\t\t\t\t\t\t\t:data=\"uploadImgData\" \r\n\t\t\t\t\t\t\t:show-file-list=\"false\" \r\n\t\t\t\t\t\t\t:before-upload=\"onBeforeUploadImage\" \r\n\t\t\t\t\t\t\t:on-success=\"(res, file) => {return fileChange(res, file)}\">\r\n\t\t\t\t\t\t\t<img v-if=\"windowsForm.imgurl\" :src=\"windowsForm.imgurl\">\r\n\t\t\t\t\t\t\t<i v-else slot=\"default\" class=\"el-icon-plus\"></i>\r\n\t\t\t\t\t\t</el-upload>\r\n\t\t\t\t\t\t<el-button class=\"upload-box-btn\" @click=\"handleRemove\">清空</el-button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"是否有按钮\" prop=\"isUseButton\">\r\n\t\t\t\t\t<el-switch \r\n\t\t\t\t\t\tv-model=\"windowsForm.isUseButton\" \r\n\t\t\t\t\t\tactive-color=\"#13ce66\" \r\n\t\t\t\t\t\tinactive-color=\"#dddddd\" \r\n\t\t\t\t\t\t:active-value=\"true\" \r\n\t\t\t\t\t\t:inactive-value=\"false\">\r\n\t\t\t\t\t</el-switch>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"按钮名称\" prop=\"buttonName\"><el-input v-model=\"windowsForm.buttonName\"></el-input></el-form-item>\r\n\t\t\t\t<el-form-item label=\"按钮链接\" prop=\"buttonUrl\"><el-input v-model=\"windowsForm.buttonUrl\"></el-input></el-form-item>\r\n\t\t\t\t<el-form-item>\r\n\t\t\t\t\t<el-radio v-model=\"windowsForm.linkType\" :label=\"1\">跳转链接</el-radio>\r\n\t\t\t\t\t<el-radio v-model=\"windowsForm.linkType\" :label=\"2\">标签栏切换链接</el-radio>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"文案\" prop=\"paper\"><tinymce ref=\"content\" :height=\"300\" :childHasChange=\"hasC\" v-model=\"windowsForm.paper\" /></el-form-item>\r\n\t\t\t</el-form>\r\n\t\t\t<div slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t<el-button @click=\"dialogClose\">取 消</el-button>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"submitForm('windowsForm')\">确 定</el-button>\r\n\t\t\t</div>\r\n\t\t</el-dialog>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tname: 'home_popup_windows',\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\thasC: false,\r\n\t\t\ttableLoading: true,\r\n\t\t\tdialogFormVisible: false,\r\n\t\t\tformLabelWidth: '150px',\r\n\t\t\tpage: 1,\r\n\t\t\tcur_total: 0,\r\n\t\t\tsize: 10,\r\n\t\t\ttableData: [],\r\n\t\t\twindowsForm: {\r\n\t\t\t\ttitle: '',\r\n\t\t\t\tstatus: '1',\r\n\t\t\t\tsortNum: 1,\r\n\t\t\t\tuseType: 0,\r\n\t\t\t\timgurl: '',\r\n\t\t\t\tpaper: '',\r\n\t\t\t\tisUseButton: true,\r\n\t\t\t\tbuttonName: '我知道了',\r\n\t\t\t\tbuttonUrl: '',\r\n\t\t\t\tlinkType:1\r\n\t\t\t},\r\n\t\t\tuploadAction: this.BASE_URL + 'admin/upload/uploadImgByType',\r\n\t\t\ttokenObj: { token: localStorage.getItem('token') },\r\n\t\t\tuploadImgData: { type: '4' },\r\n\t\t\trules: {\r\n\t\t\t\ttitle: [{ required: true, message: '请输入标题', trigger: 'blur' }],\r\n\t\t\t\tstatus: [{ required: true, message: '请选择状态', trigger: 'change' }],\r\n\t\t\t\tsortNum: [{ required: true, message: '请输入排序', trigger: 'blur' }],\r\n\t\t\t\tuseType: [{ required: true, message: '请选择针对用户', trigger: 'change' }],\r\n\t\t\t\tpaper: [{ required: true, message: '请输入文案', trigger: 'blur' }],\r\n\t\t\t\tisUseButton: [{ required: true, message: '请选择是否有按钮', trigger: 'blur' }]\r\n\t\t\t}\r\n\t\t};\r\n\t},\r\n\tmethods: {\r\n\t\taddWindows() {\r\n\t\t\tthis.$router.push('/home_popup_windows_addWindows');\r\n\t\t},\r\n\t\teditActivity(row) {\r\n\t\t\tthis.windowsForm = Object.assign({}, row);\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tthis.$refs.windowsForm.clearValidate();\r\n\t\t\t\tthis.$refs.content.setContent(row.paper);\r\n\t\t\t});\r\n\t\t\tthis.dialogFormVisible = true;\r\n\t\t},\r\n\t\thandleCurrentChange(val) {\r\n\t\t\tthis.page = val;\r\n\t\t\tthis.getData();\r\n\t\t},\r\n\t\thandleSizeChange(val) {\r\n\t\t\tthis.size = val;\r\n\t\t\tthis.getData();\r\n\t\t},\r\n\t\tdialogClose() {\r\n\t\t\tthis.dialogFormVisible = false;\r\n\t\t},\r\n\t\tonBeforeUploadImage(file) {\r\n\t\t\tconst isImg = this.isImage(file.name);\r\n\t\t\tconst isLit2M = this.isLit2M(file.size);\r\n\t\t\treturn isImg && isLit2M;\r\n\t\t},\r\n\t\tfileChange(res, file) {\r\n\t\t\tthis.windowsForm.imgurl = res.data;\r\n\t\t},\r\n\t\thandleRemove(){\r\n\t\t\tthis.windowsForm.imgurl = '';\r\n\t\t},\r\n\t\tsubmitForm(formName) {\r\n\t\t\tthis.$refs[formName].validate(valid => {\r\n\t\t\t\tif (valid) {\r\n\t\t\t\t\tthis.$confirm('确定提交吗', '提示', {\r\n\t\t\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t\t}).then(() => {\r\n\t\t\t\t\t\tthis.saveWindows();\r\n\t\t\t\t\t}).catch(() => {});\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tasync saveWindows() {\r\n\t\t\tlet {\r\n\t\t\t\tdata: { code, message }\r\n\t\t\t} = await this.$axios.post(this.BASE_URL + 'admin/system/popout/updatePopout', this.windowsForm);\r\n\t\t\tif (code == '200') {\r\n\t\t\t\tthis.$message.success(message);\r\n\t\t\t\tthis.getData();\r\n\t\t\t\tthis.dialogClose();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.$message.error(message);\r\n\t\t},\r\n\t\tstatusFormat(row, column, cellValue, index) {\r\n\t\t\treturn cellValue === true ? '上架' : '下架';\r\n\t\t},\r\n\t\ttypeFormat(row, column, cellValue, index) {\r\n\t\t\treturn cellValue === 0 ? '普通用户' : '其他';\r\n\t\t},\r\n\t\tisImage(fileName) {\r\n\t\t\t// 判断是否是图片\r\n\t\t\tvar f = fileName;\r\n\t\t\tif (f == null || f == undefined || f == '') {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (!/\\.(?:png|jpg|bmp|gif|PNG|JPG|BMP|GIF|jpeg)$/.test(f)) {\r\n\t\t\t\tthis.$message.error('类型必须是图片(.png|jpg|bmp|gif|PNG|JPG|BMP|GIF)');\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tisLit2M(size) {\r\n\t\t\tif (size / 1024 / 1024 < 2) {\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\tthis.$message({\r\n\t\t\t\t\tmessage: '图片大小不能超过 2MB!'\r\n\t\t\t\t});\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync getData() {\r\n\t\t\tlet postData = {\r\n\t\t\t\tpage: this.page,\r\n\t\t\t\tsize: this.size\r\n\t\t\t};\r\n\t\t\tlet {\r\n\t\t\t\tdata: { code, data, message }\r\n\t\t\t} = await this.$axios.post(this.BASE_URL + 'admin/system/popout/listPagePopout', postData);\r\n\t\t\tif (code == '200') {\r\n\t\t\t\tthis.tableData = data.list;\r\n\t\t\t\tthis.cur_total = parseInt(data.total);\r\n\t\t\t\tthis.tableLoading = false;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcreated() {\r\n\t\tthis.getData();\r\n\t}\r\n};\r\n</script>"],"sourceRoot":"src/main/basic"}]}