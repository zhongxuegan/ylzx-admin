{"remainingRequest":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\src\\main\\basic\\time_price.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\src\\main\\basic\\time_price.vue","mtime":1597905047168},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _Array$isArray from \"C:\\\\Users\\\\\\u949F\\u5B66\\u521A\\\\Desktop\\\\jfzx-admin\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/array/is-array\";\nimport _Object$assign from \"C:\\\\Users\\\\\\u949F\\u5B66\\u521A\\\\Desktop\\\\jfzx-admin\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/object/assign\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\\\u949F\\u5B66\\u521A\\\\Desktop\\\\jfzx-admin\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: 'elite_club',\n  data: function data() {\n    return {\n      page: 1,\n      size: 10,\n      cur_total: 0,\n      currentPage: 1,\n      tableLoading: false,\n      dialogFormVisible: false,\n      dataList: [],\n      rule: '',\n      formLabelWidth: '90px',\n      dataForm: {\n        startDate: null,\n        endDate: null,\n        children: [{\n          startInterval: '',\n          endInterval: '',\n          incomePricePerIP: null,\n          costPricePerIP: null,\n          vipIncomePricePerIP: null,\n          vipCostPricePerIP: null\n        }]\n      },\n      rules: {\n        startDate: [{\n          required: true,\n          message: '开始日期不能为空',\n          trigger: 'change'\n        }],\n        endDate: [{\n          required: true,\n          message: '结束日期不能为空',\n          trigger: 'change'\n        }]\n      }\n    };\n  },\n  created: function created() {\n    this.getData();\n  },\n  methods: {\n    startDateChange: function startDateChange() {\n      if (this.dataForm.startDate > this.dataForm.endDate) {\n        this.$message({\n          message: '开始日期不得大于结束日期',\n          type: 'warning'\n        });\n        this.dataForm.startDate = this.$moment(this.dataForm.endDate).subtract(1, 'days').format('YYYY-MM-DD');\n      }\n    },\n    endDateChange: function endDateChange() {\n      if (this.dataForm.startDate > this.dataForm.endDate) {\n        this.$message({\n          message: '结束日期不得小于开始日期',\n          type: 'warning'\n        });\n        this.dataForm.endDate = this.$moment(this.dataForm.startDate).add(1, 'days').format('YYYY-MM-DD');\n      }\n    },\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.page = val;\n      this.currentPage = val;\n      this.getData();\n    },\n    handleSizeChange: function handleSizeChange(val) {\n      this.page = 1;\n      this.currentPage = 1;\n      this.size = val;\n      this.getData();\n    },\n    findTime: function () {\n      var _findTime = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(time) {\n        var _ref, data;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.$axios.post(this.BASE_URL + \"admin/timePrice/findTimePriceByDate?startDate=\".concat(time));\n\n              case 2:\n                _ref = _context.sent;\n                data = _ref.data.data;\n                this.dataForm = _Object$assign(data);\n                this.dialogFormVisible = true;\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function findTime(_x) {\n        return _findTime.apply(this, arguments);\n      }\n\n      return findTime;\n    }(),\n    add: function add() {\n      this.$router.push('/time_price_add');\n    },\n    editActivity: function editActivity(data) {\n      this.findTime();\n    },\n    saveAward: function saveAward() {\n      var _this = this;\n\n      var postData = this.dataForm;\n      this.$axios.post(this.BASE_URL + \"admin/timePrice/saveTimePrice?startDate=\".concat(this.dataForm.startDate, \"&endDate=\").concat(this.dataForm.endDate), this.dataForm.children).then(function (res) {\n        if (res.data.code === '200') {\n          _this.$message({\n            message: '保存成功',\n            type: 'success'\n          });\n\n          _this.getData();\n\n          _this.$refs['dataForm'].resetFields();\n\n          setTimeout(function () {\n            _this.dialogFormVisible = false;\n          }, 1000);\n        } else {\n          _this.$message({\n            message: '保存失败',\n            type: 'error'\n          });\n        }\n      });\n    },\n    submitForm: function submitForm(formName) {\n      var _this2 = this;\n\n      this.$refs[formName].validate(function (valid) {\n        if (valid) {\n          _this2.saveAward();\n        }\n      });\n    },\n    confirmDelete: function confirmDelete(time) {\n      var _this3 = this;\n\n      this.$confirm('此操作将永久删除, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        _this3.deleteTime(time);\n      }).catch(function () {\n        _this3.$message({\n          type: 'info',\n          message: '已取消删除'\n        });\n      });\n    },\n    deleteTime: function () {\n      var _deleteTime = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2(time) {\n        var _ref2, code;\n\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.$axios.post(this.BASE_URL + \"admin/timePrice/deleteTimePrice?startDate=\".concat(time));\n\n              case 2:\n                _ref2 = _context2.sent;\n                code = _ref2.data.code;\n\n                if (+code === 200) {\n                  this.$message.success({\n                    message: '删除成功'\n                  });\n                  this.getData();\n                }\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function deleteTime(_x2) {\n        return _deleteTime.apply(this, arguments);\n      }\n\n      return deleteTime;\n    }(),\n    getData: function () {\n      var _getData = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee3() {\n        var page, size, _ref3, data;\n\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                page = this.page, size = this.size;\n                this.tableLoading = true;\n                _context3.next = 4;\n                return this.$axios.post(this.BASE_URL + \"admin/timePrice/listTimePrice?page=\".concat(page, \"&size=\").concat(size));\n\n              case 4:\n                _ref3 = _context3.sent;\n                data = _ref3.data.data;\n                this.dataList = this.operateList(data.list);\n                this.tableLoading = false;\n                this.cur_total = data.total;\n\n              case 9:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function getData() {\n        return _getData.apply(this, arguments);\n      }\n\n      return getData;\n    }(),\n    operateList: function operateList(list) {\n      if (!_Array$isArray(list)) return;\n      var arr = [];\n      if (!_Array$isArray(list)) return;\n\n      for (var i = 0; i < list.length; i++) {\n        for (var j = 0; j < list[i].children.length; j++) {\n          arr.push({\n            num: j === 0 ? list[i].children.length : null,\n            startDate: list[i].startDate,\n            endDate: list[i].endDate,\n            startInterval: list[i].children[j].startInterval,\n            endInterval: list[i].children[j].endInterval,\n            incomePricePerIP: list[i].children[j].incomePricePerIP,\n            costPricePerIP: list[i].children[j].costPricePerIP,\n            vipCostPricePerIP: list[i].children[j].vipCostPricePerIP,\n            vipIncomePricePerIP: list[i].children[j].vipIncomePricePerIP\n          });\n        }\n      }\n\n      return arr;\n    },\n    addTime: function addTime() {\n      this.dataForm.children.push({\n        startInterval: null,\n        endInterval: null,\n        incomePricePerIP: null,\n        costPricePerIP: null,\n        vipIncomePricePerIP: null,\n        vipCostPricePerIP: null\n      });\n    },\n    removeTime: function removeTime(item) {\n      // var index = this.dataForm.children.indexOf(item);\n      // if (index !== -1) {\n      //   this.dataForm.children.splice(index, 1);\n      // }\n      if (this.dataForm.children.length <= 1) return;\n      this.dataForm.children.pop();\n    },\n    objectSpanMethod: function objectSpanMethod(_ref4) {\n      var row = _ref4.row,\n          column = _ref4.column,\n          rowIndex = _ref4.rowIndex,\n          columnIndex = _ref4.columnIndex;\n\n      if (columnIndex === 0) {\n        if (row.num && rowIndex % row.num === 0) {\n          return {\n            rowspan: row.num,\n            colspan: 1\n          };\n        } else {\n          return {\n            rowspan: 0,\n            colspan: 0\n          };\n        }\n      }\n    }\n  }\n};",{"version":3,"sources":["time_price.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<div class=\"crumbs\">\r\n\t\t\t<el-breadcrumb separator=\"/\">\r\n\t\t\t\t<el-breadcrumb-item>\r\n\t\t\t\t\t<i class=\"el-icon-lx-cascades\"></i>\r\n\t\t\t\t\t限时提价\r\n\t\t\t\t</el-breadcrumb-item>\r\n\t\t\t</el-breadcrumb>\r\n\t\t</div>\r\n\t\t<div class=\"container\">\r\n\t\t\t<div class=\"handle-box\"><el-button type=\"primary\" icon=\"add\" @click=\"add\">新增</el-button></div>\r\n\t\t\t<el-table v-loading=\"tableLoading\" :span-method=\"objectSpanMethod\" :data=\"dataList\" border row-key=\"id\" class=\"table\">\r\n\t\t\t\t<el-table-column prop=\"startDate\" label=\"日期\" align=\"center\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<span>{{ scope.row.startDate }}</span>\r\n\t\t\t\t\t\t-\r\n\t\t\t\t\t\t<span>{{ scope.row.endDate }}</span>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column align=\"center\" label=\"时段\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<span>{{ scope.row.startInterval }}</span>\r\n\t\t\t\t\t\t-\r\n\t\t\t\t\t\t<span>{{ scope.row.endInterval }}</span>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column align=\"center\" label=\"普通会员 IP收入/IP成本\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<span>{{ scope.row.incomePricePerIP }}</span>\r\n\t\t\t\t\t\t/\r\n\t\t\t\t\t\t<span>{{ scope.row.costPricePerIP }}</span>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column align=\"center\" label=\"VIP IP收入/IP成本\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<span>{{ scope.row.vipIncomePricePerIP }}</span>\r\n\t\t\t\t\t\t/\r\n\t\t\t\t\t\t<span>{{ scope.row.vipCostPricePerIP }}</span>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column label=\"操作\" align=\"center\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<el-button type=\"primary\" @click=\"findTime(scope.row.startDate)\">编辑</el-button>\r\n\t\t\t\t\t\t<el-button type=\"primary\" @click=\"confirmDelete(scope.row.startDate)\">删除</el-button>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t</el-table>\r\n\t\t\t<div class=\"pagination\">\r\n\t\t\t\t<el-pagination\r\n\t\t\t\t\tbackground\r\n\t\t\t\t\t@current-change=\"handleCurrentChange\"\r\n\t\t\t\t\t@size-change=\"handleSizeChange\"\r\n\t\t\t\t\tlayout=\"total, sizes, prev, pager, next, jumper\"\r\n\t\t\t\t\t:page-sizes=\"[10, 20, 50, 100]\"\r\n\t\t\t\t\t:current-page.sync=\"currentPage\"\r\n\t\t\t\t\t:total=\"cur_total\"\r\n\t\t\t\t></el-pagination>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<!-- 编辑弹出框 -->\r\n\t\t<el-dialog title=\"新增/编辑\" width=\"60%\" :visible.sync=\"dialogFormVisible\">\r\n\t\t\t<el-form :model=\"dataForm\" :inline=\"true\" :label-width=\"formLabelWidth\" :rules=\"rules\" class=\"form--wrap\" ref=\"dataForm\">\r\n\t\t\t\t<el-row>\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"开始日期\" prop=\"startDate\" :label-width=\"formLabelWidth\">\r\n\t\t\t\t\t\t\t<el-date-picker v-model=\"dataForm.startDate\" type=\"date\" value-format=\"yyyy-MM-dd\" placeholder=\"选择日期\" @change=\"startDateChange\"></el-date-picker>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"结束日期\" prop=\"endDate\" :label-width=\"formLabelWidth\">\r\n\t\t\t\t\t\t\t<el-date-picker v-model=\"dataForm.endDate\" value-format=\"yyyy-MM-dd\" type=\"date\" placeholder=\"选择日期\" @change=\"endDateChange\"></el-date-picker>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t</el-row>\r\n\t\t\t\t<div style=\"border-top:1px solid #ccc;padding-top:15px;\" v-for=\"(item, index) in dataForm.children\" :key=\"index\">\r\n\t\t\t\t\t<el-row>\r\n\t\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t\t<el-form-item label=\"开始时间\" :key=\"index\" :rules=\"[{ required: true, message: '', trigger: 'blur' }]\">\r\n\t\t\t\t\t\t\t\t<el-time-picker v-model=\"item.startInterval\" value-format=\"hh:mm:ss\" placeholder=\"开始时间\"></el-time-picker>\r\n\t\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t\t</el-col>\r\n\t\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t\t<el-form-item label=\"结束时间\" :key=\"index\" :rules=\"[{ required: true, message: '', trigger: 'blur' }]\">\r\n\t\t\t\t\t\t\t\t<el-time-picker v-model=\"item.endInterval\" value-format=\"hh:mm:ss\" placeholder=\"结束时间\"></el-time-picker>\r\n\t\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t\t</el-col>\r\n\t\t\t\t\t</el-row>\r\n\t\t\t\t\t<el-row>\r\n\t\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t\t<el-form-item label=\"普通IP收入\" :key=\"index\"><el-input v-model=\"item.incomePricePerIP\" placeholder=\"普通IP收入\"></el-input></el-form-item>\r\n\t\t\t\t\t\t</el-col>\r\n\t\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t\t<el-form-item label=\"普通IP成本\" :key=\"index\"><el-input v-model=\"item.costPricePerIP\" placeholder=\"普通IP成本\"></el-input></el-form-item>\r\n\t\t\t\t\t\t</el-col>\r\n\t\t\t\t\t</el-row>\r\n\t\t\t\t\t<el-row>\r\n\t\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t\t<el-form-item label=\"VIP IP收入\" :key=\"index\"><el-input v-model=\"item.vipIncomePricePerIP\" placeholder=\"VIP IP收入\"></el-input></el-form-item>\r\n\t\t\t\t\t\t</el-col>\r\n\t\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t\t<el-form-item label=\"VIP IP成本\" :key=\"index\"><el-input v-model=\"item.vipCostPricePerIP\" placeholder=\"VIP IP成本\"></el-input></el-form-item>\r\n\t\t\t\t\t\t</el-col>\r\n\t\t\t\t\t</el-row>\r\n\t\t\t\t</div>\r\n\t\t\t\t<el-form-item>\r\n\t\t\t\t\t<el-button @click.prevent=\"removeTime\" type=\"warning\">删除</el-button>\r\n\t\t\t\t\t<el-button @click.prevent=\"addTime\" type=\"info\">新增</el-button>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</el-form>\r\n\t\t\t<div slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t<el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"submitForm('dataForm')\">确 定</el-button>\r\n\t\t\t</div>\r\n\t\t</el-dialog>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tname: 'elite_club',\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tpage: 1,\r\n\t\t\tsize: 10,\r\n\t\t\tcur_total: 0,\r\n\t\t\tcurrentPage: 1,\r\n\t\t\ttableLoading: false,\r\n\t\t\tdialogFormVisible: false,\r\n\t\t\tdataList: [],\r\n\t\t\trule: '',\r\n\t\t\tformLabelWidth: '90px',\r\n\t\t\tdataForm: {\r\n\t\t\t\tstartDate: null,\r\n\t\t\t\tendDate: null,\r\n\t\t\t\tchildren: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tstartInterval: '',\r\n\t\t\t\t\t\tendInterval: '',\r\n\t\t\t\t\t\tincomePricePerIP: null,\r\n\t\t\t\t\t\tcostPricePerIP: null,\r\n\t\t\t\t\t\tvipIncomePricePerIP: null,\r\n\t\t\t\t\t\tvipCostPricePerIP: null\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\trules: {\r\n\t\t\t\tstartDate: [{ required: true, message: '开始日期不能为空', trigger: 'change' }],\r\n\t\t\t\tendDate: [{ required: true, message: '结束日期不能为空', trigger: 'change' }]\r\n\t\t\t}\r\n\t\t};\r\n\t},\r\n\tcreated() {\r\n\t\tthis.getData();\r\n\t},\r\n\tmethods: {\r\n\t\tstartDateChange() {\r\n\t\t\tif (this.dataForm.startDate > this.dataForm.endDate) {\r\n\t\t\t\tthis.$message({\r\n\t\t\t\t\tmessage: '开始日期不得大于结束日期',\r\n\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t});\r\n\t\t\t\tthis.dataForm.startDate = this.$moment(this.dataForm.endDate).subtract(1, 'days').format('YYYY-MM-DD');\r\n\t\t\t}\r\n\t\t},\r\n\t\tendDateChange() {\r\n\t\t\tif (this.dataForm.startDate > this.dataForm.endDate) {\r\n\t\t\t\tthis.$message({\r\n\t\t\t\t\tmessage: '结束日期不得小于开始日期',\r\n\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t});\r\n\t\t\t\tthis.dataForm.endDate = this.$moment(this.dataForm.startDate).add(1, 'days').format('YYYY-MM-DD')\r\n\t\t\t}\r\n\t\t},\r\n\t\thandleCurrentChange(val) {\r\n\t\t\tthis.page = val;\r\n\t\t\tthis.currentPage = val;\r\n\t\t\tthis.getData();\r\n\t\t},\r\n\t\thandleSizeChange(val) {\r\n\t\t\tthis.page = 1;\r\n\t\t\tthis.currentPage = 1;\r\n\t\t\tthis.size = val;\r\n\t\t\tthis.getData();\r\n\t\t},\r\n\r\n\t\tasync findTime(time) {\r\n\t\t\tlet {\r\n\t\t\t\tdata: { data }\r\n\t\t\t} = await this.$axios.post(this.BASE_URL + `admin/timePrice/findTimePriceByDate?startDate=${time}`);\r\n\t\t\tthis.dataForm = Object.assign(data);\r\n\t\t\tthis.dialogFormVisible = true;\r\n\t\t},\r\n\r\n\t\tadd() {\r\n\t\t\tthis.$router.push('/time_price_add');\r\n\t\t},\r\n\t\teditActivity(data) {\r\n\t\t\tthis.findTime();\r\n\t\t},\r\n\t\tsaveAward() {\r\n\t\t\tlet postData = this.dataForm;\r\n\t\t\tthis.$axios\r\n\t\t\t\t.post(this.BASE_URL + `admin/timePrice/saveTimePrice?startDate=${this.dataForm.startDate}&endDate=${this.dataForm.endDate}`, this.dataForm.children)\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tif (res.data.code === '200') {\r\n\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\tmessage: '保存成功',\r\n\t\t\t\t\t\t\ttype: 'success'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.getData();\r\n\t\t\t\t\t\tthis.$refs['dataForm'].resetFields();\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tthis.dialogFormVisible = false;\r\n\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\tmessage: '保存失败',\r\n\t\t\t\t\t\t\ttype: 'error'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t},\r\n\t\tsubmitForm(formName) {\r\n\t\t\tthis.$refs[formName].validate(valid => {\r\n\t\t\t\tif (valid) {\r\n\t\t\t\t\tthis.saveAward();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tconfirmDelete(time) {\r\n\t\t\tthis.$confirm('此操作将永久删除, 是否继续?', '提示', {\r\n\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\ttype: 'warning'\r\n\t\t\t})\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tthis.deleteTime(time);\r\n\t\t\t\t})\r\n\t\t\t\t.catch(() => {\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\ttype: 'info',\r\n\t\t\t\t\t\tmessage: '已取消删除'\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t},\r\n\r\n\t\tasync deleteTime(time) {\r\n\t\t\tlet {\r\n\t\t\t\tdata: { code }\r\n\t\t\t} = await this.$axios.post(this.BASE_URL + `admin/timePrice/deleteTimePrice?startDate=${time}`);\r\n\t\t\tif (+code === 200) {\r\n\t\t\t\tthis.$message.success({\r\n\t\t\t\t\tmessage: '删除成功'\r\n\t\t\t\t});\r\n\t\t\t\tthis.getData();\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync getData() {\r\n\t\t\tlet { page, size } = this;\r\n\t\t\tthis.tableLoading = true;\r\n\t\t\tlet {\r\n\t\t\t\tdata: { data }\r\n\t\t\t} = await this.$axios.post(this.BASE_URL + `admin/timePrice/listTimePrice?page=${page}&size=${size}`);\r\n\t\t\tthis.dataList = this.operateList(data.list);\r\n\t\t\tthis.tableLoading = false;\r\n\t\t\tthis.cur_total = data.total;\r\n\t\t},\r\n\t\toperateList(list) {\r\n\t\t\tif (!Array.isArray(list)) return;\r\n\t\t\tlet arr = [];\r\n\t\t\tif (!Array.isArray(list)) return;\r\n\t\t\tfor (let i = 0; i < list.length; i++) {\r\n\t\t\t\tfor (let j = 0; j < list[i].children.length; j++) {\r\n\t\t\t\t\tarr.push({\r\n\t\t\t\t\t\tnum: j === 0 ? list[i].children.length : null,\r\n\t\t\t\t\t\tstartDate: list[i].startDate,\r\n\t\t\t\t\t\tendDate: list[i].endDate,\r\n\t\t\t\t\t\tstartInterval: list[i].children[j].startInterval,\r\n\t\t\t\t\t\tendInterval: list[i].children[j].endInterval,\r\n\t\t\t\t\t\tincomePricePerIP: list[i].children[j].incomePricePerIP,\r\n\t\t\t\t\t\tcostPricePerIP: list[i].children[j].costPricePerIP,\r\n\t\t\t\t\t\tvipCostPricePerIP: list[i].children[j].vipCostPricePerIP,\r\n\t\t\t\t\t\tvipIncomePricePerIP: list[i].children[j].vipIncomePricePerIP\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn arr;\r\n\t\t},\r\n\r\n\t\taddTime() {\r\n\t\t\tthis.dataForm.children.push({\r\n\t\t\t\tstartInterval: null,\r\n\t\t\t\tendInterval: null,\r\n\t\t\t\tincomePricePerIP: null,\r\n\t\t\t\tcostPricePerIP: null,\r\n\t\t\t\tvipIncomePricePerIP: null,\r\n\t\t\t\tvipCostPricePerIP: null\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tremoveTime(item) {\r\n\t\t\t// var index = this.dataForm.children.indexOf(item);\r\n\t\t\t// if (index !== -1) {\r\n\t\t\t//   this.dataForm.children.splice(index, 1);\r\n\t\t\t// }\r\n\t\t\tif (this.dataForm.children.length <= 1) return;\r\n\t\t\tthis.dataForm.children.pop();\r\n\t\t},\r\n\r\n\t\tobjectSpanMethod({ row, column, rowIndex, columnIndex }) {\r\n\t\t\tif (columnIndex === 0) {\r\n\t\t\t\tif (row.num && rowIndex % row.num === 0) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\trowspan: row.num,\r\n\t\t\t\t\t\tcolspan: 1\r\n\t\t\t\t\t};\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\trowspan: 0,\r\n\t\t\t\t\t\tcolspan: 0\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n<style scoped>\r\n.handle-box {\r\n\tpadding-bottom: 15px;\r\n}\r\n.handle-input {\r\n\twidth: 230px;\r\n\tdisplay: inline-block;\r\n}\r\n.mr10 {\r\n\tmargin-right: 10px;\r\n}\r\n.el-input {\r\n\twidth: 200px;\r\n}\r\n.form--wrap .line {\r\n\ttext-align: center;\r\n}\r\n</style>\n"],"sourceRoot":"src/main/basic"}]}