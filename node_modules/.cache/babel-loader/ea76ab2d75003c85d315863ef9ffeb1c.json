{"remainingRequest":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\src\\main\\activity\\mixins\\mixins.js","dependencies":[{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\src\\main\\activity\\mixins\\mixins.js","mtime":1597978790500},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _Date$now from \"C:\\\\Users\\\\\\u949F\\u5B66\\u521A\\\\Desktop\\\\jfzx-admin\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/date/now\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\\\u949F\\u5B66\\u521A\\\\Desktop\\\\jfzx-admin\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport { formatUnit } from '@/utils/index.js'; // 日期验证\n\nexport var verifyDateMinxins = {\n  methods: {\n    startDateChange: function startDateChange() {\n      if (this.activityForm.config.startTime > this.activityForm.config.endTime) {\n        this.$message({\n          message: '结束日期不得小于起始日期',\n          type: 'warning'\n        });\n        this.activityForm.config.startTime = this.activityForm.config.endTime;\n      }\n    },\n    endDateChange: function endDateChange() {\n      if (this.activityForm.config.startTime > this.activityForm.config.endTime) {\n        this.$message({\n          message: '结束日期不得小于起始日期',\n          type: 'warning'\n        });\n        this.activityForm.config.endTime = this.activityForm.config.startTime;\n      }\n    }\n  } // 新增活动/跳转页面\n\n};\nexport var addActivityMinxins = {\n  methods: {\n    addActivity: function addActivity(path, flag) {\n      var newNum;\n\n      if (flag && flag === true) {\n        if (this.tableData.length > 0) {\n          var numList = this.tableData.map(function (item) {\n            return item.num;\n          });\n          newNum = Math.max.apply(null, numList) + 1;\n        } else {\n          newNum = 1;\n        }\n\n        path += '?num=' + newNum;\n      }\n\n      this.$router.push(path);\n    }\n  } // 查询活动\n\n};\nexport var editActivityMinxins = {\n  methods: {\n    editActivity: function () {\n      var _editActivity = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(row) {\n        var _this = this;\n\n        var _ref, _ref$data, code, data, message;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.$axios.get(this.BASE_URL + \"admin/activity/config/detail?id=\".concat(row.id));\n\n              case 2:\n                _ref = _context.sent;\n                _ref$data = _ref.data;\n                code = _ref$data.code;\n                data = _ref$data.data;\n                message = _ref$data.message;\n\n                if (code === '200') {\n                  // 分 转 元\n                  this.activityForm = formatUnit(data, true);\n                  this.dialogFormVisible = true;\n                }\n\n                this.$nextTick(function () {\n                  _this.$refs.content.setContent(data.config.scheme);\n\n                  _this.$refs.activityForm.clearValidate();\n                });\n\n              case 9:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function editActivity(_x) {\n        return _editActivity.apply(this, arguments);\n      }\n\n      return editActivity;\n    }()\n  } // 分页\n\n};\nexport var handlePageMinxins = {\n  methods: {\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.tableLoading = true;\n      this.page = val;\n      this.getData();\n    },\n    handleSizeChange: function handleSizeChange(val) {\n      this.tableLoading = true;\n      this.size = val;\n      this.getData();\n    }\n  }\n};\nexport var pickerOptionsMinxins = {\n  data: function data() {\n    return {\n      pickerOptions: {\n        disabledDate: function disabledDate(time) {\n          return time.getTime() < _Date$now() - 24 * 60 * 60 * 1000;\n        }\n      }\n    };\n  }\n}; // 清空和提交表单\n\nexport var operateMinxins = {\n  methods: {\n    reset: function reset(formName) {\n      var _this2 = this;\n\n      this.$confirm('确定清空表单吗？', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        _this2.$refs[formName].resetFields();\n\n        _this2.$refs.content.setContent('');\n      }).catch(function () {});\n    },\n    submitForm: function submitForm(formName) {\n      var _this3 = this;\n\n      this.$refs[formName].validate(function (valid) {\n        if (valid) {\n          _this3.$confirm('确定添加吗', '提示', {\n            confirmButtonText: '确定',\n            cancelButtonText: '取消',\n            type: 'warning'\n          }).then(function () {\n            _this3.saveActivity();\n          }).catch(function () {});\n        } else {\n          return false;\n        }\n      });\n    }\n  }\n};",{"version":3,"sources":["C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\src\\main\\activity\\mixins\\mixins.js"],"names":["formatUnit","verifyDateMinxins","methods","startDateChange","activityForm","config","startTime","endTime","$message","message","type","endDateChange","addActivityMinxins","addActivity","path","flag","newNum","tableData","length","numList","map","item","num","Math","max","apply","$router","push","editActivityMinxins","editActivity","row","$axios","get","BASE_URL","id","data","code","dialogFormVisible","$nextTick","$refs","content","setContent","scheme","clearValidate","handlePageMinxins","handleCurrentChange","val","tableLoading","page","getData","handleSizeChange","size","pickerOptionsMinxins","pickerOptions","disabledDate","time","getTime","operateMinxins","reset","formName","$confirm","confirmButtonText","cancelButtonText","then","resetFields","catch","submitForm","validate","valid","saveActivity"],"mappings":"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","sourcesContent":["import {\r\n\tformatUnit\r\n} from '@/utils/index.js'\r\n\r\n// 日期验证\r\nexport const verifyDateMinxins = {\r\n\tmethods: {\r\n\t\tstartDateChange() {\r\n\t\t\tif (this.activityForm.config.startTime > this.activityForm.config.endTime) {\r\n\t\t\t\tthis.$message({\r\n\t\t\t\t\tmessage: '结束日期不得小于起始日期',\r\n\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t});\r\n\t\t\t\tthis.activityForm.config.startTime = this.activityForm.config.endTime;\r\n\t\t\t}\r\n\t\t},\r\n\t\tendDateChange() {\r\n\t\t\tif (this.activityForm.config.startTime > this.activityForm.config.endTime) {\r\n\t\t\t\tthis.$message({\r\n\t\t\t\t\tmessage: '结束日期不得小于起始日期',\r\n\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t});\r\n\t\t\t\tthis.activityForm.config.endTime = this.activityForm.config.startTime;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n// 新增活动/跳转页面\r\nexport const addActivityMinxins = {\r\n\tmethods: {\r\n\t\taddActivity(path, flag) {\r\n\t\t\tlet newNum;\r\n\t\t\tif (flag && flag === true) {\r\n\t\t\t\tif (this.tableData.length > 0) {\r\n\t\t\t\t\tlet numList = this.tableData.map(item => item.num);\r\n\t\t\t\t\tnewNum = Math.max.apply(null, numList) + 1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnewNum = 1;\r\n\t\t\t\t}\r\n\t\t\t\tpath += '?num=' + newNum;\r\n\t\t\t}\r\n\t\t\tthis.$router.push(path);\r\n\t\t},\r\n\t}\r\n}\r\n// 查询活动\r\nexport const editActivityMinxins = {\r\n\tmethods: {\r\n\t\tasync editActivity(row) {\r\n\t\t\tlet {\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tcode,\r\n\t\t\t\t\tdata,\r\n\t\t\t\t\tmessage\r\n\t\t\t\t}\r\n\t\t\t} = await this.$axios.get(this.BASE_URL + `admin/activity/config/detail?id=${row.id}`);\r\n\t\t\tif (code === '200') {\r\n\t\t\t\t// 分 转 元\r\n\t\t\t\tthis.activityForm = formatUnit(data, true);\r\n\t\t\t\tthis.dialogFormVisible = true;\r\n\t\t\t}\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tthis.$refs.content.setContent(data.config.scheme);\r\n\t\t\t\tthis.$refs.activityForm.clearValidate();\r\n\t\t\t});\r\n\t\t},\r\n\t}\r\n}\r\n\r\n\r\n// 分页\r\nexport const handlePageMinxins = {\r\n\tmethods: {\r\n\t\thandleCurrentChange(val) {\r\n\t\t\tthis.tableLoading = true;\r\n\t\t\tthis.page = val;\r\n\t\t\tthis.getData();\r\n\t\t},\r\n\t\thandleSizeChange(val) {\r\n\t\t\tthis.tableLoading = true;\r\n\t\t\tthis.size = val;\r\n\t\t\tthis.getData();\r\n\t\t},\r\n\t}\r\n}\r\n\r\nexport const pickerOptionsMinxins = {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tpickerOptions: {\r\n\t\t\t\tdisabledDate(time) {\r\n\t\t\t\t\treturn time.getTime() < Date.now() - 24 * 60 * 60 * 1000;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n}\r\n\r\n// 清空和提交表单\r\nexport const operateMinxins = {\r\n\tmethods: {\r\n\t\treset(formName) {\r\n\t\t\tthis.$confirm('确定清空表单吗？', '提示', {\r\n\t\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t})\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tthis.$refs[formName].resetFields();\r\n\t\t\t\t\tthis.$refs.content.setContent('');\r\n\t\t\t\t})\r\n\t\t\t\t.catch(() => {});\r\n\t\t},\r\n\t\tsubmitForm(formName) {\r\n\t\t\tthis.$refs[formName].validate(valid => {\r\n\t\t\t\tif (valid) {\r\n\t\t\t\t\tthis.$confirm('确定添加吗', '提示', {\r\n\t\t\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t\t}).then(() => {\r\n\t\t\t\t\t\tthis.saveActivity();\r\n\t\t\t\t\t}).catch(() => {});\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t}\r\n}\n"]}]}