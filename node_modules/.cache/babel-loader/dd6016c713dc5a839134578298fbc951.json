{"remainingRequest":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\src\\main\\system\\account_manager.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\src\\main\\system\\account_manager.vue","mtime":1598080583802},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\\\u949F\\u5B66\\u521A\\\\Desktop\\\\jfzx-admin\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: 'basetable',\n  data: function data() {\n    return {\n      tableLoading: true,\n      tableData: [],\n      cur_page: 1,\n      cur_total: 0,\n      pageSize: 10,\n      currentPage: 1,\n      multipleSelection: [],\n      userNameSelect: '',\n      del_list: [],\n      is_search: false,\n      editVisible: false,\n      delVisible: false,\n      menuEditVisible: false,\n      form: {\n        userName: '',\n        password: '',\n        againPassword: ''\n      },\n      menuForm: {\n        parentMenuId: [1],\n        menuName: '',\n        menuUrl: '',\n        menuStatus: null\n      },\n      parentMenuIdOptions: [],\n      props: {\n        value: 'menuId',\n        label: 'menuName',\n        children: 'childs',\n        checkStrictly: true\n      },\n      passwordVisible: false,\n      passwordForm: {\n        id: '',\n        userName: '',\n        oldPassword: '',\n        newPassword: '',\n        againPassword: ''\n      },\n      authorizeVisible: false,\n      authorizeData: [],\n      authorizeForm: {\n        accountId: '',\n        menuIds: []\n      },\n      defaultProps: {\n        children: 'childs',\n        value: 'menuId',\n        label: 'menuName'\n      },\n      delId: -1\n    };\n  },\n  created: function created() {\n    this.findAccountByPage();\n    this.getData();\n  },\n  methods: {\n    // 分页导航\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.currentPage = val;\n      this.cur_page = val;\n      this.findAccountByPage();\n    },\n    handleSizeChange: function handleSizeChange(val) {\n      this.currentPage = 1;\n      this.cur_page = 1;\n      this.pageSize = val;\n      this.findAccountByPage();\n    },\n    // 获取 easy-mock 的模拟数据\n    getData: function getData() {\n      var _this = this;\n\n      this.$axios.get(this.BASE_URL + 'admin/account/findMenuByParentId?parentMenuId=').then(function (res) {\n        var list = res.data.data;\n\n        for (var i = 0; i < list.length; i++) {\n          var childsTemp = '';\n\n          if (res.data.data[i].childs != null && res.data.data[i].childs != 0) {\n            childsTemp = res.data.data[i].childs;\n          }\n\n          _this.authorizeData.push({\n            menuId: res.data.data[i].menuId,\n            menuName: res.data.data[i].menuName,\n            childs: childsTemp\n          });\n        }\n      });\n    },\n    search: function search() {\n      this.cur_page = 1;\n      this.findAccountByPage();\n    },\n    initFrom: function initFrom() {\n      var _this2 = this;\n\n      //初始表单数据\n      this.parentMenuIdOptions = [];\n      this.$axios.get(this.BASE_URL + 'admin/account/findMenuByParentId?parentMenuId=').then(function (res) {\n        _this2.parentMenuIdOptions = _this2.formatterMenu(res.data.data);\n      });\n    },\n    // 格式化菜单数据\n    formatterMenu: function formatterMenu(arr) {\n      var newArr = [];\n\n      for (var i = 0; i < arr.length; i++) {\n        if (arr[i].childrens && arr[i].childrens.length > 0) {\n          newArr.push({\n            menuId: arr[i].nodeId,\n            menuName: arr[i].nodeName,\n            childs: this.formatterMenu(arr[i].childrens)\n          });\n        } else {\n          newArr.push({\n            menuId: arr[i].nodeId,\n            menuName: arr[i].nodeName\n          });\n        }\n      }\n\n      return newArr;\n    },\n    findAccountByPage: function () {\n      var _findAccountByPage = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var postData, _ref, _ref$data$data, content, total, list;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                postData = {\n                  page: this.cur_page,\n                  size: this.pageSize,\n                  userName: this.userNameSelect\n                };\n                _context.next = 3;\n                return this.$axios.post(this.BASE_URL + 'admin/account/findAccountByPage', postData);\n\n              case 3:\n                _ref = _context.sent;\n                _ref$data$data = _ref.data.data;\n                content = _ref$data$data.content;\n                total = _ref$data$data.total;\n                list = _ref$data$data.list;\n                this.tableData = list;\n                this.cur_total = total;\n                this.tableLoading = false;\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function findAccountByPage() {\n        return _findAccountByPage.apply(this, arguments);\n      }\n\n      return findAccountByPage;\n    }(),\n    formatter: function formatter(row, column) {\n      return row.address;\n    },\n    filterTag: function filterTag(value, row) {\n      return row.tag === value;\n    },\n    handleAdd: function handleAdd() {\n      this.editVisible = true;\n    },\n    handlePassword: function handlePassword(index, row) {\n      this.passwordVisible = true;\n      this.passwordForm = {\n        id: row.id,\n        userName: row.userName,\n        oldPassword: '',\n        newPassword: '',\n        againPassword: ''\n      };\n    },\n    handleUserNameChange: function handleUserNameChange(index, row) {\n      var _this3 = this;\n\n      this.$axios.post(this.BASE_URL + 'admin/account/saveAccountInfo', {\n        id: row.id,\n        userName: row.userName,\n        password: row.password\n      }).then(function (res) {\n        if (res.data.code == 200) {\n          _this3.editVisible = false;\n\n          _this3.$message.success('保存成功');\n\n          _this3.findAccountByPage();\n        } else {\n          _this3.$message.error(res.data.message);\n        }\n      });\n    },\n    handleMenuAdd: function handleMenuAdd() {\n      this.menuForm = {\n        //重置\n        parentMenuId: [],\n        menuName: '',\n        menuUrl: '',\n        menuStatus: null\n      };\n      this.initFrom();\n      this.menuEditVisible = true;\n    },\n    handleItemChange: function handleItemChange(val) {\n      var _this4 = this;\n\n      setTimeout(function (_) {\n        _this4.$axios.get(_this4.BASE_URL + 'admin/account/findMenuByParentId?parentMenuId=' + _this4.parentMenuIdOptions[val[0]].value).then(function (res) {\n          var list = res.data.data;\n\n          if (list.length == 0) {\n            _this4.parentMenuIdOptions[val[0]].childs = '';\n            return;\n          }\n\n          for (var i = 0; i < list.length; i++) {\n            _this4.parentMenuIdOptions[val[0]].childs.push({\n              value: res.data.data[i].menuId,\n              label: res.data.data[i].menuName,\n              childs: []\n            });\n          }\n        });\n      }, 300);\n    },\n    handleMenu: function handleMenu(index, row) {\n      var _this5 = this;\n\n      this.authorizeData = [];\n      this.$axios.get(this.BASE_URL + 'admin/account/findMenuByParentId?parentMenuId=').then(function (res) {\n        _this5.authorizeData = _this5.formatterMenu(res.data.data);\n        var formData = new FormData();\n        formData.append('accountId', row.id);\n\n        _this5.$axios.post(_this5.BASE_URL + \"admin/account/findAccountMenuByAccountId?accountId=\".concat(row.id)).then(function (res) {\n          var list = res.data.data;\n\n          _this5.$refs.authorzeTree.setCheckedKeys(list);\n        });\n      });\n      this.authorizeForm.accountId = row.id;\n      this.authorizeVisible = true;\n    },\n    handleEdit: function handleEdit(index, row) {\n      this.form = {\n        userName: row.userName\n      };\n      this.editVisible = true;\n    },\n    handleDelete: function handleDelete(index, row) {\n      this.delId = row.id;\n      this.delVisible = true;\n    },\n    delAll: function delAll() {\n      var length = this.multipleSelection.length;\n      var str = '';\n      this.del_list = this.del_list.concat(this.multipleSelection);\n\n      for (var i = 0; i < length; i++) {\n        str += this.multipleSelection[i].name + ' ';\n      }\n\n      this.$message.error('删除了' + str);\n      this.multipleSelection = [];\n    },\n    handleSelectionChange: function handleSelectionChange(val) {\n      this.multipleSelection = val;\n    },\n    //修改密码\n    changePassword: function changePassword() {\n      var _this6 = this;\n\n      var formData = new FormData();\n      formData.append('id', this.passwordForm.id);\n      formData.append('oldPassword', this.passwordForm.oldPassword);\n      formData.append('newPassword', this.passwordForm.newPassword);\n      this.$axios.post(this.BASE_URL + 'admin/account/changePassword', formData).then(function (res) {\n        if (res.data.code == 200) {\n          _this6.passwordVisible = false;\n\n          _this6.$message.success('保存成功');\n\n          _this6.findAccountByPage();\n        } else {\n          _this6.$message.error(res.data.message);\n        }\n      });\n    },\n    //新增菜单\n    saveMenuEdit: function saveMenuEdit() {\n      var _this7 = this;\n\n      this.$axios.post(this.BASE_URL + 'admin/account/saveMenuInfo', {\n        parentMenuId: this.menuForm.parentMenuId[this.menuForm.parentMenuId.length - 1],\n        menuName: this.menuForm.menuName,\n        menuUrl: this.menuForm.menuUrl,\n        menuStatus: this.menuForm.menuStatus\n      }).then(function (res) {\n        if (res.data.code == '200') {\n          _this7.$message.success('保存成功');\n\n          _this7.menuEditVisible = false;\n        }\n      });\n    },\n    saveEdit: function saveEdit() {\n      var _this8 = this;\n\n      // 保存编辑\n      this.$axios.post(this.BASE_URL + 'admin/account/saveAccountInfo', {\n        userName: this.form.userName,\n        password: this.form.password\n      }).then(function (res) {\n        if (res.data.code == 200) {\n          _this8.editVisible = false;\n\n          _this8.$message.success('保存成功');\n\n          _this8.findAccountByPage();\n        } else {\n          _this8.$message.error(res.data.message);\n        }\n      });\n    },\n    saveAuthorize: function saveAuthorize() {\n      var _this9 = this;\n\n      //更新授权\n      this.$axios.post(this.BASE_URL + 'admin/account/saveAccountMenuRelInfo', {\n        accountId: this.authorizeForm.accountId,\n        halfMenuIds: this.$refs.authorzeTree.getHalfCheckedKeys(),\n        menuIds: this.$refs.authorzeTree.getCheckedKeys()\n      }).then(function (res) {\n        _this9.authorizeVisible = false;\n\n        _this9.$message.success(res.data.message);\n      });\n    },\n    // 确定删除\n    deleteRow: function deleteRow() {\n      var _this10 = this;\n\n      var formData = new FormData();\n      formData.append('accountId', this.delId);\n      this.$axios.post(this.BASE_URL + 'admin/account/delById', formData).then(function (res) {\n        if (res.data.code == 200) {\n          _this10.$message.success(res.data.message);\n\n          _this10.findAccountByPage();\n        } else {\n          _this10.$message.error(res.data.message);\n        }\n      });\n      this.delVisible = false;\n    }\n  }\n};",{"version":3,"sources":["account_manager.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div class=\"table\">\r\n\t\t<div class=\"crumbs\">\r\n\t\t\t<el-breadcrumb separator=\"/\">\r\n\t\t\t\t<el-breadcrumb-item>\r\n\t\t\t\t\t<i class=\"el-icon-lx-cascades\"></i>\r\n\t\t\t\t\t用户管理\r\n\t\t\t\t</el-breadcrumb-item>\r\n\t\t\t</el-breadcrumb>\r\n\t\t</div>\r\n\t\t<div class=\"container\">\r\n\t\t\t<div class=\"handle-box\">\r\n\t\t\t\t<!-- <el-button type=\"primary\" icon=\"delete\" class=\"handle-del mr10\" @click=\"delAll\">批量删除</el-button> -->\r\n\t\t\t\t<el-input v-model=\"userNameSelect\" placeholder=\"用户名\" class=\"handle-input mr10\"></el-input>\r\n\t\t\t\t<el-button type=\"primary\" icon=\"search\" @click=\"search\">搜索</el-button>\r\n\t\t\t\t<el-button type=\"primary\" icon=\"delete\" class=\"handle-del mr10\" @click=\"handleAdd\">新增用户</el-button>\r\n\t\t\t\t<el-button type=\"primary\" icon=\"search\" @click=\"handleMenuAdd()\" class=\"mr10\">新增菜单</el-button>\r\n\t\t\t</div>\r\n\t\t\t<el-table :data=\"tableData\" v-loading=\"tableLoading\" border class=\"table\" ref=\"multipleTable\" @selection-change=\"handleSelectionChange\">\r\n\t\t\t\t<el-table-column type=\"selection\" width=\"55\" align=\"center\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"id\" label=\"ID\" width=\"100\" align=\"center\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"userName\" label=\"用户名\" sortable align=\"center\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<el-input v-model=\"scope.row.userName\" placeholder=\"请输入内容\" @change=\"handleUserNameChange(scope.$index, scope.row)\"></el-input>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column prop=\"addDate\" label=\"注册日期\" align=\"center\"></el-table-column>\r\n\t\t\t\t<el-table-column label=\"操作\" align=\"center\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<el-button type=\"primary\" @click=\"handleMenu(scope.$index, scope.row)\">授权菜单</el-button>\r\n\t\t\t\t\t\t<el-button type=\"primary\" @click=\"handlePassword(scope.$index, scope.row)\">修改密码</el-button>\r\n\t\t\t\t\t\t<el-button type=\"primary\" @click=\"handleDelete(scope.$index, scope.row)\">删除</el-button>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t</el-table>\r\n\t\t\t<div class=\"pagination\">\r\n\t\t\t\t<el-pagination\r\n\t\t\t\t\tbackground\r\n\t\t\t\t\t@current-change=\"handleCurrentChange\"\r\n\t\t\t\t\t@size-change=\"handleSizeChange\"\r\n\t\t\t\t\tlayout=\"total, sizes, prev, pager, next, jumper\"\r\n\t\t\t\t\t:page-sizes=\"[10, 20, 50, 100]\"\r\n\t\t\t\t\t:total=\"cur_total\"\r\n\t\t\t\t\t:current-page.sync=\"currentPage\"\r\n\t\t\t\t></el-pagination>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<!-- 编辑弹出框 -->\r\n\t\t<el-dialog v-dialogDrag title=\"编辑\" :visible.sync=\"editVisible\" width=\"30%\">\r\n\t\t\t<el-form ref=\"form\" :model=\"form\" label-width=\"80px\">\r\n\t\t\t\t<el-form-item label=\"用户名\"><el-input v-model=\"form.userName\"></el-input></el-form-item>\r\n\t\t\t\t<el-form-item label=\"密码\"><el-input v-model=\"form.password\" type=\"password\"></el-input></el-form-item>\r\n\t\t\t\t<el-form-item label=\"确认密码\"><el-input v-model=\"form.againPassword\" type=\"password\"></el-input></el-form-item>\r\n\t\t\t</el-form>\r\n\t\t\t<span slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t<el-button @click=\"editVisible = false\">取 消</el-button>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"saveEdit\">确 定</el-button>\r\n\t\t\t</span>\r\n\t\t</el-dialog>\r\n\t\t<el-dialog v-dialogDrag title=\"修改密码\" :visible.sync=\"passwordVisible\" width=\"30%\">\r\n\t\t\t<el-form ref=\"passwordForm\" :model=\"form\" label-width=\"80px\">\r\n\t\t\t\t<el-form-item label=\"用户名\"><el-input placeholder=\"请输入内容\" v-model=\"passwordForm.userName\" :disabled=\"true\"></el-input></el-form-item>\r\n\t\t\t\t<el-form-item label=\"原密码\"><el-input v-model=\"passwordForm.oldPassword\" type=\"password\"></el-input></el-form-item>\r\n\t\t\t\t<el-form-item label=\"新密码\"><el-input v-model=\"passwordForm.newPassword\" type=\"password\"></el-input></el-form-item>\r\n\t\t\t\t<el-form-item label=\"确认密码\"><el-input v-model=\"passwordForm.againPassword\" type=\"password\"></el-input></el-form-item>\r\n\t\t\t</el-form>\r\n\t\t\t<span slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t<el-button @click=\"passwordVisible = false\">取 消</el-button>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"changePassword\">保 存</el-button>\r\n\t\t\t</span>\r\n\t\t</el-dialog>\r\n\t\t<el-dialog v-dialogDrag title=\"菜单授权\" :visible.sync=\"authorizeVisible\" width=\"50%\">\r\n\t\t\t<el-tree \r\n\t\t\t\t:data=\"authorizeData\" \r\n\t\t\t\tshow-checkbox \r\n\t\t\t\tnode-key=\"menuId\" \r\n\t\t\t\tref=\"authorzeTree\" \r\n\t\t\t\thighlight-current \r\n\t\t\t\t:props=\"defaultProps\">\r\n\t\t\t</el-tree>\r\n\t\t\t<span slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t<el-button @click=\"authorizeVisible = false\">取 消</el-button>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"saveAuthorize\">更 新</el-button>\r\n\t\t\t</span>\r\n\t\t</el-dialog>\r\n\t\t<el-dialog v-dialogDrag title=\"新增菜单\" :visible.sync=\"menuEditVisible\" width=\"50%\">\r\n\t\t\t<el-form ref=\"form\" :model=\"menuForm\" label-width=\"80px\">\r\n\t\t\t\t<el-form-item label=\"上级菜单\">\r\n\t\t\t\t\t<el-cascader \r\n\t\t\t\t\t\tv-model=\"menuForm.parentMenuId\" \r\n\t\t\t\t\t\t:options=\"parentMenuIdOptions\" \r\n\t\t\t\t\t\t:props=\"props\">\r\n\t\t\t\t\t</el-cascader>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"菜单名称\"><el-input v-model=\"menuForm.menuName\"></el-input></el-form-item>\r\n\t\t\t\t<el-form-item label=\"菜单路径\"><el-input v-model=\"menuForm.menuUrl\"></el-input></el-form-item>\r\n\t\t\t\t<el-form-item label=\"菜单状态\">\r\n\t\t\t\t\t<el-select v-model=\"menuForm.menuStatus\" placeholder=\"请选择\">\r\n\t\t\t\t\t\t<el-option label=\"禁用\" :value=\"0\"></el-option>\r\n\t\t\t\t\t\t<el-option label=\"启动\" :value=\"1\"></el-option>\r\n\t\t\t\t\t</el-select>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</el-form>\r\n\t\t\t<span slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t<el-button @click=\"menuEditVisible = false\">取 消</el-button>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"saveMenuEdit\">保 存</el-button>\r\n\t\t\t</span>\r\n\t\t</el-dialog>\r\n\r\n\t\t<!-- 删除提示框 -->\r\n\t\t<el-dialog title=\"提示\" :visible.sync=\"delVisible\" width=\"300px\" center>\r\n\t\t\t<div class=\"del-dialog-cnt\">删除不可恢复，是否确定删除？</div>\r\n\t\t\t<span slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t<el-button @click=\"delVisible = false\">取 消</el-button>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"deleteRow\">确 定</el-button>\r\n\t\t\t</span>\r\n\t\t</el-dialog>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tname: 'basetable',\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\ttableLoading: true,\r\n\t\t\ttableData: [],\r\n\t\t\tcur_page: 1,\r\n\t\t\tcur_total: 0,\r\n\t\t\tpageSize: 10,\r\n\t\t\tcurrentPage: 1,\r\n\t\t\tmultipleSelection: [],\r\n\t\t\tuserNameSelect: '',\r\n\t\t\tdel_list: [],\r\n\t\t\tis_search: false,\r\n\t\t\teditVisible: false,\r\n\t\t\tdelVisible: false,\r\n\t\t\tmenuEditVisible: false,\r\n\t\t\tform: {\r\n\t\t\t\tuserName: '',\r\n\t\t\t\tpassword: '',\r\n\t\t\t\tagainPassword: ''\r\n\t\t\t},\r\n\r\n\t\t\tmenuForm: {\r\n\t\t\t\tparentMenuId: [1],\r\n\t\t\t\tmenuName: '',\r\n\t\t\t\tmenuUrl: '',\r\n\t\t\t\tmenuStatus: null\r\n\t\t\t},\r\n\t\t\tparentMenuIdOptions: [],\r\n\t\t\tprops: {\r\n\t\t\t\tvalue: 'menuId',\r\n\t\t\t\tlabel: 'menuName',\r\n\t\t\t\tchildren: 'childs',\r\n\t\t\t\tcheckStrictly:true\r\n\t\t\t},\r\n\r\n\t\t\tpasswordVisible: false,\r\n\t\t\tpasswordForm: {\r\n\t\t\t\tid: '',\r\n\t\t\t\tuserName: '',\r\n\t\t\t\toldPassword: '',\r\n\t\t\t\tnewPassword: '',\r\n\t\t\t\tagainPassword: ''\r\n\t\t\t},\r\n\r\n\t\t\tauthorizeVisible: false,\r\n\t\t\tauthorizeData: [],\r\n\t\t\tauthorizeForm: {\r\n\t\t\t\taccountId: '',\r\n\t\t\t\tmenuIds: []\r\n\t\t\t},\r\n\t\t\tdefaultProps: {\r\n\t\t\t\tchildren: 'childs',\r\n\t\t\t\tvalue: 'menuId',\r\n\t\t\t\tlabel: 'menuName'\r\n\t\t\t},\r\n\t\t\tdelId: -1\r\n\t\t};\r\n\t},\r\n\tcreated() {\r\n\t\tthis.findAccountByPage();\r\n\t\tthis.getData();\r\n\t},\r\n\tmethods: {\r\n\t\t// 分页导航\r\n\t\thandleCurrentChange(val) {\r\n\t\t\tthis.currentPage = val;\r\n\t\t\tthis.cur_page = val;\r\n\t\t\tthis.findAccountByPage();\r\n\t\t},\r\n\t\thandleSizeChange(val) {\r\n\t\t\tthis.currentPage = 1;\r\n\t\t\tthis.cur_page = 1;\r\n\t\t\tthis.pageSize = val;\r\n\t\t\tthis.findAccountByPage();\r\n\t\t},\r\n\t\t// 获取 easy-mock 的模拟数据\r\n\t\tgetData() {\r\n\t\t\tthis.$axios.get(this.BASE_URL + 'admin/account/findMenuByParentId?parentMenuId=').then(res => {\r\n\t\t\t\tvar list = res.data.data;\r\n\t\t\t\tfor (var i = 0; i < list.length; i++) {\r\n\t\t\t\t\tvar childsTemp = '';\r\n\t\t\t\t\tif (res.data.data[i].childs != null && res.data.data[i].childs != 0) {\r\n\t\t\t\t\t\tchildsTemp = res.data.data[i].childs;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.authorizeData.push({\r\n\t\t\t\t\t\tmenuId: res.data.data[i].menuId,\r\n\t\t\t\t\t\tmenuName: res.data.data[i].menuName,\r\n\t\t\t\t\t\tchilds: childsTemp\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tsearch() {\r\n\t\t\tthis.cur_page = 1;\r\n\t\t\tthis.findAccountByPage();\r\n\t\t},\r\n\t\tinitFrom() {\r\n\t\t\t//初始表单数据\r\n\t\t\tthis.parentMenuIdOptions = [];\r\n\t\t\tthis.$axios.get(this.BASE_URL + 'admin/account/findMenuByParentId?parentMenuId=').then(res => {\r\n\t\t\t\tthis.parentMenuIdOptions = this.formatterMenu(res.data.data);\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 格式化菜单数据\r\n\t\tformatterMenu(arr) {\r\n\t\t\tlet newArr = [];\r\n\t\t\tfor (let i = 0; i < arr.length; i++) {\r\n\t\t\t\tif (arr[i].childrens && arr[i].childrens.length > 0) {\r\n\t\t\t\t\tnewArr.push({\r\n\t\t\t\t\t\tmenuId: arr[i].nodeId,\r\n\t\t\t\t\t\tmenuName: arr[i].nodeName,\r\n\t\t\t\t\t\tchilds: this.formatterMenu(arr[i].childrens)\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnewArr.push({\r\n\t\t\t\t\t\tmenuId: arr[i].nodeId,\r\n\t\t\t\t\t\tmenuName: arr[i].nodeName\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn newArr;\r\n\t\t},\r\n\t\tasync findAccountByPage() {\r\n\t\t\tlet postData = {\r\n\t\t\t\tpage: this.cur_page,\r\n\t\t\t\tsize: this.pageSize,\r\n\t\t\t\tuserName: this.userNameSelect\r\n\t\t\t};\r\n\t\t\tlet {\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tdata: { content, total, list }\r\n\t\t\t\t}\r\n\t\t\t} = await this.$axios.post(this.BASE_URL + 'admin/account/findAccountByPage', postData);\r\n\r\n\t\t\tthis.tableData = list;\r\n\t\t\tthis.cur_total = total;\r\n\t\t\tthis.tableLoading = false;\r\n\t\t},\r\n\t\tformatter(row, column) {\r\n\t\t\treturn row.address;\r\n\t\t},\r\n\r\n\t\tfilterTag(value, row) {\r\n\t\t\treturn row.tag === value;\r\n\t\t},\r\n\t\thandleAdd() {\r\n\t\t\tthis.editVisible = true;\r\n\t\t},\r\n\t\thandlePassword(index, row) {\r\n\t\t\tthis.passwordVisible = true;\r\n\t\t\tthis.passwordForm = {\r\n\t\t\t\tid: row.id,\r\n\t\t\t\tuserName: row.userName,\r\n\t\t\t\toldPassword: '',\r\n\t\t\t\tnewPassword: '',\r\n\t\t\t\tagainPassword: ''\r\n\t\t\t};\r\n\t\t},\r\n\t\thandleUserNameChange(index, row) {\r\n\t\t\tthis.$axios\r\n\t\t\t\t.post(this.BASE_URL + 'admin/account/saveAccountInfo', {\r\n\t\t\t\t\tid: row.id,\r\n\t\t\t\t\tuserName: row.userName,\r\n\t\t\t\t\tpassword: row.password\r\n\t\t\t\t})\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tif (res.data.code == 200) {\r\n\t\t\t\t\t\tthis.editVisible = false;\r\n\t\t\t\t\t\tthis.$message.success('保存成功');\r\n\t\t\t\t\t\tthis.findAccountByPage();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$message.error(res.data.message);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t},\r\n\t\thandleMenuAdd() {\r\n\t\t\tthis.menuForm = {\r\n\t\t\t\t//重置\r\n\t\t\t\tparentMenuId: [],\r\n\t\t\t\tmenuName: '',\r\n\t\t\t\tmenuUrl: '',\r\n\t\t\t\tmenuStatus: null\r\n\t\t\t};\r\n\t\t\tthis.initFrom();\r\n\t\t\tthis.menuEditVisible = true;\r\n\t\t},\r\n\t\thandleItemChange(val) {\r\n\t\t\tsetTimeout(_ => {\r\n\t\t\t\tthis.$axios.get(this.BASE_URL + 'admin/account/findMenuByParentId?parentMenuId=' + this.parentMenuIdOptions[val[0]].value).then(res => {\r\n\t\t\t\t\tvar list = res.data.data;\r\n\t\t\t\t\tif (list.length == 0) {\r\n\t\t\t\t\t\tthis.parentMenuIdOptions[val[0]].childs = '';\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (var i = 0; i < list.length; i++) {\r\n\t\t\t\t\t\tthis.parentMenuIdOptions[val[0]].childs.push({\r\n\t\t\t\t\t\t\tvalue: res.data.data[i].menuId,\r\n\t\t\t\t\t\t\tlabel: res.data.data[i].menuName,\r\n\t\t\t\t\t\t\tchilds: []\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}, 300);\r\n\t\t},\r\n\t\thandleMenu(index, row) {\r\n\t\t\tthis.authorizeData = [];\r\n\t\t\tthis.$axios.get(this.BASE_URL + 'admin/account/findMenuByParentId?parentMenuId=').then(res => {\r\n\t\t\t\tthis.authorizeData = this.formatterMenu(res.data.data);\r\n\t\t\t\tconst formData = new FormData();\r\n\t\t\t\tformData.append('accountId', row.id);\r\n\t\t\t\tthis.$axios\r\n\t\t\t\t\t.post(this.BASE_URL + `admin/account/findAccountMenuByAccountId?accountId=${row.id}`)\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\tvar list = res.data.data;\r\n\t\t\t\t\t\tthis.$refs.authorzeTree.setCheckedKeys(list);\r\n\t\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\tthis.authorizeForm.accountId = row.id;\r\n\t\t\tthis.authorizeVisible = true;\r\n\t\t},\r\n\t\thandleEdit(index, row) {\r\n\t\t\tthis.form = {\r\n\t\t\t\tuserName: row.userName\r\n\t\t\t};\r\n\t\t\tthis.editVisible = true;\r\n\t\t},\r\n\t\thandleDelete(index, row) {\r\n\t\t\tthis.delId = row.id;\r\n\t\t\tthis.delVisible = true;\r\n\t\t},\r\n\t\tdelAll() {\r\n\t\t\tconst length = this.multipleSelection.length;\r\n\t\t\tlet str = '';\r\n\t\t\tthis.del_list = this.del_list.concat(this.multipleSelection);\r\n\t\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\t\tstr += this.multipleSelection[i].name + ' ';\r\n\t\t\t}\r\n\t\t\tthis.$message.error('删除了' + str);\r\n\t\t\tthis.multipleSelection = [];\r\n\t\t},\r\n\t\thandleSelectionChange(val) {\r\n\t\t\tthis.multipleSelection = val;\r\n\t\t},\r\n\t\t//修改密码\r\n\t\tchangePassword() {\r\n\t\t\tconst formData = new FormData();\r\n\t\t\tformData.append('id', this.passwordForm.id);\r\n\t\t\tformData.append('oldPassword', this.passwordForm.oldPassword);\r\n\t\t\tformData.append('newPassword', this.passwordForm.newPassword);\r\n\t\t\tthis.$axios.post(this.BASE_URL + 'admin/account/changePassword', formData).then(res => {\r\n\t\t\t\tif (res.data.code == 200) {\r\n\t\t\t\t\tthis.passwordVisible = false;\r\n\t\t\t\t\tthis.$message.success('保存成功');\r\n\t\t\t\t\tthis.findAccountByPage();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$message.error(res.data.message);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t//新增菜单\r\n\t\tsaveMenuEdit() {\r\n\t\t\tthis.$axios\r\n\t\t\t\t.post(this.BASE_URL + 'admin/account/saveMenuInfo', {\r\n\t\t\t\t\tparentMenuId: this.menuForm.parentMenuId[this.menuForm.parentMenuId.length - 1],\r\n\t\t\t\t\tmenuName: this.menuForm.menuName,\r\n\t\t\t\t\tmenuUrl: this.menuForm.menuUrl,\r\n\t\t\t\t\tmenuStatus: this.menuForm.menuStatus\r\n\t\t\t\t})\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tif (res.data.code == '200') {\r\n\t\t\t\t\t\tthis.$message.success('保存成功');\r\n\t\t\t\t\t\tthis.menuEditVisible = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t},\r\n\t\tsaveEdit() {\r\n\t\t\t// 保存编辑\r\n\t\t\tthis.$axios\r\n\t\t\t\t.post(this.BASE_URL + 'admin/account/saveAccountInfo', {\r\n\t\t\t\t\tuserName: this.form.userName,\r\n\t\t\t\t\tpassword: this.form.password\r\n\t\t\t\t})\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tif (res.data.code == 200) {\r\n\t\t\t\t\t\tthis.editVisible = false;\r\n\t\t\t\t\t\tthis.$message.success('保存成功');\r\n\t\t\t\t\t\tthis.findAccountByPage();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$message.error(res.data.message);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t},\r\n\t\tsaveAuthorize() {\r\n\t\t\t//更新授权\r\n\t\t\tthis.$axios\r\n\t\t\t\t.post(this.BASE_URL + 'admin/account/saveAccountMenuRelInfo', {\r\n\t\t\t\t\taccountId: this.authorizeForm.accountId,\r\n\t\t\t\t\thalfMenuIds: this.$refs.authorzeTree.getHalfCheckedKeys(),\r\n\t\t\t\t\tmenuIds: this.$refs.authorzeTree.getCheckedKeys()\r\n\t\t\t\t})\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tthis.authorizeVisible = false;\r\n\t\t\t\t\tthis.$message.success(res.data.message);\r\n\t\t\t\t});\r\n\t\t},\r\n\t\t// 确定删除\r\n\t\tdeleteRow() {\r\n\t\t\tconst formData = new FormData();\r\n\t\t\tformData.append('accountId', this.delId);\r\n\t\t\tthis.$axios.post(this.BASE_URL + 'admin/account/delById', formData).then(res => {\r\n\t\t\t\tif (res.data.code == 200) {\r\n\t\t\t\t\tthis.$message.success(res.data.message);\r\n\t\t\t\t\tthis.findAccountByPage();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$message.error(res.data.message);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis.delVisible = false;\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.handle-box {\r\n\tmargin-bottom: 15px;\r\n}\r\n\r\n.handle-select {\r\n\twidth: 120px;\r\n}\r\n\r\n.handle-input {\r\n\twidth: 200px;\r\n\tdisplay: inline-block;\r\n}\r\n.del-dialog-cnt {\r\n\tfont-size: 16px;\r\n\ttext-align: center;\r\n}\r\n.table {\r\n\twidth: 100%;\r\n\tfont-size: 14px;\r\n}\r\n.red {\r\n\tcolor: #ff0000;\r\n}\r\n.mr10 {\r\n\tmargin-right: 10px;\r\n}\r\n</style>\n"],"sourceRoot":"src/main/system"}]}