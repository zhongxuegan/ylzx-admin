{"remainingRequest":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\src\\main\\statistics\\user_data_monitoring.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\src\\main\\statistics\\user_data_monitoring.vue","mtime":1597905188080},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.constructor\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport _getIterator from \"C:\\\\Users\\\\\\u949F\\u5B66\\u521A\\\\Desktop\\\\jfzx-admin\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/get-iterator\";\nimport _JSON$stringify from \"C:\\\\Users\\\\\\u949F\\u5B66\\u521A\\\\Desktop\\\\jfzx-admin\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/json/stringify\";\nimport _toConsumableArray from \"C:\\\\Users\\\\\\u949F\\u5B66\\u521A\\\\Desktop\\\\jfzx-admin\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/toConsumableArray\";\nimport _Set from \"C:\\\\Users\\\\\\u949F\\u5B66\\u521A\\\\Desktop\\\\jfzx-admin\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/set\";\nimport _Array$from from \"C:\\\\Users\\\\\\u949F\\u5B66\\u521A\\\\Desktop\\\\jfzx-admin\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/array/from\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\\\u949F\\u5B66\\u521A\\\\Desktop\\\\jfzx-admin\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _Array$isArray from \"C:\\\\Users\\\\\\u949F\\u5B66\\u521A\\\\Desktop\\\\jfzx-admin\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/array/is-array\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: 'basetable',\n  data: function data() {\n    return {\n      tableLoading: false,\n      userType: null,\n      currentPage: 1,\n      tableData: [],\n      // 表格数据\n      cur_page: 1,\n      // 当前页号\n      cur_size: 20,\n      cur_total: 0,\n      // 总记录数\n      select_word: '',\n      startCountDate: this.dateFtt('yyyy-MM-dd', new Date(), 1),\n      endCountDate: this.dateFtt('yyyy-MM-dd', new Date(), 1),\n      filename: '',\n      ids: [],\n      exportList: [],\n      rowStyle: {\n        height: '48px'\n      },\n      cellStyle: {\n        padding: 0\n      },\n      userStatusOptions: [{\n        //0:正常 1:封杀\n        value: 0,\n        label: '禁用'\n      }, {\n        value: 1,\n        label: '正常'\n      }],\n      userTypeArr: [{\n        name: '全部',\n        value: ''\n      }, {\n        name: '普通用户',\n        value: 1\n      }, {\n        name: 'vip用户',\n        value: 2\n      }, {\n        name: 'svip用户',\n        value: 3\n      }]\n    };\n  },\n  filters: {\n    formatString: function formatString(value) {\n      if (value && value.length > 5) {\n        return value.substring(0, 5) + '...';\n      } else {\n        return value;\n      }\n    }\n  },\n  created: function created() {\n    this.getData();\n  },\n  methods: {\n    // 分页导航\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.currentPage = val;\n      this.cur_page = val;\n      this.findCountData();\n    },\n    handleSelectionChange: function handleSelectionChange(val) {\n      this.multipleSelection = val;\n    },\n    handleSizeChange: function handleSizeChange(val) {\n      this.cur_size = val;\n      this.findCountData();\n    },\n    getData: function getData() {\n      this.findCountData();\n    },\n    formaterVersion: function formaterVersion(row, column, cellValue, index) {\n      return cellValue === 1 ? 'android' : cellValue === 2 ? 'ios' : '未知';\n    },\n    formatDate: function formatDate(row, column, cellValue, index) {\n      return cellValue.substring(4, cellValue.length);\n    },\n    search: function search() {\n      this.currentPage = 1;\n      this.cur_page = 1;\n      this.findCountData();\n    },\n    changeStatus: function changeStatus() {\n      this.currentPage = 1;\n      this.cur_page = 1;\n      this.findCountData();\n    },\n    formaterUserType: function formaterUserType(row, column, cellValue, index) {\n      return cellValue === 1 ? '普通用户' : cellValue === 2 ? 'vip用户' : 'svip用户';\n    },\n    buckleAmountBlur: function buckleAmountBlur(index, row) {\n      if (row.buckleAmount.indexOf('%') == -1) {\n        row.buckleAmount = row.buckleAmount + '%';\n      }\n\n      this.$axios.post(this.BASE_URL + 'admin/account/saveBuckleAmount', {\n        //保存扣量\n        userId: row.userId,\n        buckleAmount: row.buckleAmount\n      }).then(function (res) {\n        row.buckleAmount = res.data.data.buckleAmount;\n      });\n    },\n    enableBuckleAmount: function enableBuckleAmount(index, row) {\n      row.buckleAmount = '0%';\n    },\n    addPercent: function addPercent(row, column, cellValue, index) {\n      return cellValue + '%';\n    },\n    operateList: function operateList(list) {\n      if (!_Array$isArray(list)) return;\n      list.map(function (item) {\n        item.editing = false;\n        item.originRemark = item.remark;\n      });\n      return list;\n    },\n    findCountData: function () {\n      var _findCountData = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var postData, _ref, _ref$data$data, list, total;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                postData = {\n                  page: this.cur_page,\n                  size: this.cur_size,\n                  startCountDate: this.startCountDate,\n                  endCountDate: this.endCountDate,\n                  selectWord: this.select_word,\n                  userType: this.userType\n                };\n                _context.next = 3;\n                return this.$axios.post(this.BASE_URL + 'admin/account/userDataMonitoring', postData);\n\n              case 3:\n                _ref = _context.sent;\n                _ref$data$data = _ref.data.data;\n                list = _ref$data$data.list;\n                total = _ref$data$data.total;\n                this.tableData = this.operateList(list);\n                this.cur_total = total;\n                this.tableLoading = false;\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function findCountData() {\n        return _findCountData.apply(this, arguments);\n      }\n\n      return findCountData;\n    }(),\n    userStatusChange: function userStatusChange(index, row) {\n      var _this = this;\n\n      var msg = '';\n      var confirmButtonText = '';\n      var back = 0; //用户取消操作\n\n      if (row.userStatus === '') {\n        return;\n      } else if (row.userStatus === 0) {\n        msg = '封杀用户ID为：' + row.userId + ', 是否继续?';\n        confirmButtonText = '封杀';\n        back = 1;\n      } else if (row.userStatus === 1) {\n        msg = '恢复用户ID为：' + row.userId + ', 是否继续?';\n        confirmButtonText = '启用';\n        back = 0;\n      }\n\n      this.$confirm(msg, '提示', {\n        confirmButtonText: confirmButtonText,\n        cancelButtonText: '取消',\n        type: 'warning',\n        center: true\n      }).then(function () {\n        _this.$axios.post(_this.BASE_URL + 'admin/account/forceOutWecharUser', {\n          //封杀微信用户\n          userId: row.userId,\n          status: row.userStatus\n        }).then(function (res) {\n          row.userStatus = res.data.data.status;\n        });\n\n        _this.$message({\n          type: 'success',\n          message: confirmButtonText + '成功'\n        });\n      }).catch(function () {\n        _this.$message({\n          type: 'info',\n          message: '取消' + confirmButtonText\n        });\n\n        row.userStatus = back;\n      });\n    },\n    startCountDateChange: function startCountDateChange() {\n      if (this.startCountDate > this.endCountDate) {\n        this.$message({\n          message: '起始日期不得大于结束日期',\n          type: 'warning'\n        });\n        this.startCountDate = this.endCountDate;\n      }\n    },\n    endCountDateChange: function endCountDateChange() {\n      if (this.startCountDate > this.endCountDate) {\n        this.$message({\n          message: '结束日期不得小于起始日期',\n          type: 'warning'\n        });\n        this.endCountDate = this.startCountDate;\n      }\n    },\n    // remark\n    editRemark: function editRemark(row) {\n      this.tableData.map(function (item) {\n        item.editing = false;\n      });\n      row.editing = true;\n    },\n    // remark\n    cancelRemark: function cancelRemark(row) {\n      row.remark = row.originRemark;\n      row.editing = false;\n    },\n    saveRemark: function saveRemark(row) {\n      var _this2 = this;\n\n      this.$axios.post(this.BASE_URL + 'admin/account/forceOutWecharUser', {\n        userId: row.userId,\n        status: row.userStatus,\n        remark: row.remark\n      }).then(function (res) {\n        if (+res.data.code === 200) {\n          _this2.$message.success('保存成功');\n\n          _this2.getData();\n        }\n      });\n    },\n    exportExcel: function () {\n      var _exportExcel = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.getTop40Data();\n\n              case 2:\n                this.getDataByID(this.ids);\n\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function exportExcel() {\n        return _exportExcel.apply(this, arguments);\n      }\n\n      return exportExcel;\n    }(),\n    // 导出Excel\n    getTop40Data: function () {\n      var _getTop40Data = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee3() {\n        var exportIds, yesterDayTime, postData, _ref2, list, i;\n\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                exportIds = JSON.parse(localStorage.getItem('exportIds')) || [];\n                yesterDayTime = new Date(this.startCountDate).getTime() - 86400000;\n                this.yesterDay = this.dateFtt('yyyy-MM-dd', new Date(yesterDayTime), 1);\n                this.filename = this.dateFtt('yyyy-MM-dd', new Date(yesterDayTime), 1);\n                postData = {\n                  page: 1,\n                  size: 40,\n                  startCountDate: this.yesterDay,\n                  endCountDate: this.yesterDay,\n                  selectWord: ''\n                };\n                _context3.next = 7;\n                return this.$axios.post(this.BASE_URL + 'admin/account/userDataMonitoring', postData);\n\n              case 7:\n                _ref2 = _context3.sent;\n                list = _ref2.data.data.list;\n\n                if (_Array$isArray(list)) {\n                  _context3.next = 11;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\");\n\n              case 11:\n                for (i = 0; i < list.length; i++) {\n                  this.ids.push(list[i].userId);\n                }\n\n                this.ids = _Array$from(new _Set([].concat(_toConsumableArray(exportIds), _toConsumableArray(this.ids))));\n                localStorage.setItem('exportIds', _JSON$stringify(this.ids));\n\n              case 14:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function getTop40Data() {\n        return _getTop40Data.apply(this, arguments);\n      }\n\n      return getTop40Data;\n    }(),\n    getDataByID: function () {\n      var _getDataByID = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee5(ids) {\n        var _this3 = this;\n\n        var resultArr, textPromises, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, textPromise, res;\n\n        return regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                resultArr = []; // 并发读取远程URL\n\n                textPromises = ids.map(\n                /*#__PURE__*/\n                function () {\n                  var _ref3 = _asyncToGenerator(\n                  /*#__PURE__*/\n                  regeneratorRuntime.mark(function _callee4(id) {\n                    var postData, _ref4, list;\n\n                    return regeneratorRuntime.wrap(function _callee4$(_context4) {\n                      while (1) {\n                        switch (_context4.prev = _context4.next) {\n                          case 0:\n                            postData = {\n                              page: 1,\n                              size: 1,\n                              startCountDate: _this3.yesterDay,\n                              endCountDate: _this3.yesterDay,\n                              selectWord: id\n                            };\n                            _context4.next = 3;\n                            return _this3.$axios.post(_this3.BASE_URL + 'admin/account/userDataMonitoring', postData);\n\n                          case 3:\n                            _ref4 = _context4.sent;\n                            list = _ref4.data.data.list;\n                            return _context4.abrupt(\"return\", list);\n\n                          case 6:\n                          case \"end\":\n                            return _context4.stop();\n                        }\n                      }\n                    }, _callee4, this);\n                  }));\n\n                  return function (_x2) {\n                    return _ref3.apply(this, arguments);\n                  };\n                }()); // 按次序输出\n\n                _iteratorNormalCompletion = true;\n                _didIteratorError = false;\n                _iteratorError = undefined;\n                _context5.prev = 5;\n                _iterator = _getIterator(textPromises);\n\n              case 7:\n                if (_iteratorNormalCompletion = (_step = _iterator.next()).done) {\n                  _context5.next = 16;\n                  break;\n                }\n\n                textPromise = _step.value;\n                _context5.next = 11;\n                return textPromise;\n\n              case 11:\n                res = _context5.sent;\n\n                if (res) {\n                  resultArr.push(res);\n                }\n\n              case 13:\n                _iteratorNormalCompletion = true;\n                _context5.next = 7;\n                break;\n\n              case 16:\n                _context5.next = 22;\n                break;\n\n              case 18:\n                _context5.prev = 18;\n                _context5.t0 = _context5[\"catch\"](5);\n                _didIteratorError = true;\n                _iteratorError = _context5.t0;\n\n              case 22:\n                _context5.prev = 22;\n                _context5.prev = 23;\n\n                if (!_iteratorNormalCompletion && _iterator.return != null) {\n                  _iterator.return();\n                }\n\n              case 25:\n                _context5.prev = 25;\n\n                if (!_didIteratorError) {\n                  _context5.next = 28;\n                  break;\n                }\n\n                throw _iteratorError;\n\n              case 28:\n                return _context5.finish(25);\n\n              case 29:\n                return _context5.finish(22);\n\n              case 30:\n                this.exportList = resultArr.flat();\n                this.handleDownload();\n\n              case 32:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this, [[5, 18, 22, 30], [23,, 25, 29]]);\n      }));\n\n      function getDataByID(_x) {\n        return _getDataByID.apply(this, arguments);\n      }\n\n      return getDataByID;\n    }(),\n    handleDownload: function handleDownload() {\n      var _this4 = this;\n\n      import('@/vendor/Export2Excel').then(function (excel) {\n        var tHeader = ['userId', 'pvCount'];\n        var filterVal = ['userId', 'pvCount'];\n        var list = _this4.exportList;\n\n        var data = _this4.formatJson(filterVal, list);\n\n        console.log(data);\n        return;\n        excel.export_json_to_excel({\n          header: tHeader,\n          data: data,\n          filename: '玉龙资讯' + _this4.filename,\n          autoWidth: true,\n          bookType: 'xlsx'\n        });\n      });\n    },\n    formatJson: function formatJson(filterVal, jsonData) {\n      return jsonData.map(function (v) {\n        return filterVal.map(function (j) {\n          return v[j];\n        });\n      });\n    },\n    // 公用\n    dateFtt: function dateFtt(fmt, date, monthNum) {\n      var o = {\n        'M+': date.getMonth() + monthNum,\n        //月份\n        'd+': date.getDate(),\n        //日\n        'h+': date.getHours(),\n        //小时\n        'm+': date.getMinutes(),\n        //分\n        's+': date.getSeconds(),\n        //秒\n        'q+': Math.floor((date.getMonth() + 3) / 3),\n        //季度\n        S: date.getMilliseconds() //毫秒\n\n      };\n      if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (date.getFullYear() + '').substr(4 - RegExp.$1.length));\n\n      for (var k in o) {\n        if (new RegExp('(' + k + ')').test(fmt)) fmt = fmt.replace(RegExp.$1, RegExp.$1.length == 1 ? o[k] : ('00' + o[k]).substr(('' + o[k]).length));\n      }\n\n      return fmt;\n    }\n  }\n};",{"version":3,"sources":["user_data_monitoring.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div class=\"table\">\r\n\t\t<div class=\"crumbs\">\r\n\t\t\t<el-breadcrumb separator=\"/\">\r\n\t\t\t\t<el-breadcrumb-item>\r\n\t\t\t\t\t<i class=\"el-icon-lx-cascades\"></i>\r\n\t\t\t\t\t用户数据监测\r\n\t\t\t\t</el-breadcrumb-item>\r\n\t\t\t</el-breadcrumb>\r\n\t\t</div>\r\n\t\t<div class=\"container\">\r\n\t\t\t<div class=\"handle-box\">\r\n\t\t\t\t<el-date-picker\r\n\t\t\t\t\ttype=\"date\"\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\tvalue-format=\"yyyy-MM-dd\"\r\n\t\t\t\t\tformat=\"yyyy-MM-dd\"\r\n\t\t\t\t\tplaceholder=\"支付时间\"\r\n\t\t\t\t\tv-model=\"startCountDate\"\r\n\t\t\t\t\tclass=\"handle-label mr10\"\r\n\t\t\t\t\t@change=\"startCountDateChange\"\r\n\t\t\t\t></el-date-picker>\r\n\t\t\t\t<i class=\"line mr10\">-</i>\r\n\t\t\t\t<el-date-picker\r\n\t\t\t\t\ttype=\"date\"\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\tvalue-format=\"yyyy-MM-dd\"\r\n\t\t\t\t\tformat=\"yyyy-MM-dd\"\r\n\t\t\t\t\tplaceholder=\"支付时间\"\r\n\t\t\t\t\tv-model=\"endCountDate\"\r\n\t\t\t\t\tclass=\"handle-label mr10\"\r\n\t\t\t\t\t@change=\"endCountDateChange\"\r\n\t\t\t\t></el-date-picker>\r\n\t\t\t\t<el-select v-model=\"userType\" placeholder=\"用户类型\" class=\"handle-select mr10\" @change=\"changeStatus\">\r\n\t\t\t\t\t<el-option v-for=\"item in userTypeArr\" :key=\"item.value\" :label=\"item.name\" :value=\"item.value\"></el-option>\r\n\t\t\t\t</el-select>\r\n\t\t\t\t<el-input v-model=\"select_word\" placeholder=\"用户ID\" class=\"handle-input mr10\"></el-input>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"search\">搜索</el-button>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"exportExcel\">导出</el-button>\r\n\t\t\t</div>\r\n\t\t\t<el-table\r\n\t\t\t\t:data=\"tableData\"\r\n\t\t\t\tv-loading=\"tableLoading\"\r\n\t\t\t\tborder\r\n\t\t\t\tclass=\"table\"\r\n\t\t\t\tref=\"multipleTable\"\r\n\t\t\t\t@selection-change=\"handleSelectionChange\"\r\n\t\t\t\tsize=\"mini\"\r\n\t\t\t\t:cell-style=\"cellStyle\"\r\n\t\t\t\t:row-style=\"rowStyle\"\r\n\t\t\t\tstyle=\"font-size: 10px\">\r\n\t\t\t\t<el-table-column prop=\"userId\" label=\"用户ID\" width=\"60\" align=\"center\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"remark\" align=\"center\" label=\"备注\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<el-popover trigger=\"hover\" placement=\"right\">\r\n\t\t\t\t\t\t\t<div style=\"margin-bottom:5px;\">\r\n\t\t\t\t\t\t\t\t<el-input type=\"textarea\" v-model=\"scope.row.remark\" :rows=\"3\" v-if=\"scope.row.editing\"></el-input>\r\n\t\t\t\t\t\t\t\t<p v-else>{{ scope.row.originRemark }}</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<el-button type=\"info\" v-if=\"scope.row.editing\" @click=\"cancelRemark(scope.row, scope.$index)\">取消</el-button>\r\n\t\t\t\t\t\t\t<el-button type=\"info\" v-else @click=\"editRemark(scope.row, scope.$index)\">编辑</el-button>\r\n\t\t\t\t\t\t\t<el-button type=\"primary\" @click=\"saveRemark(scope.row)\">保存</el-button>\r\n\t\t\t\t\t\t\t<div slot=\"reference\" class=\"name-wrapper\">\r\n\t\t\t\t\t\t\t\t<p size=\"medium\">{{ scope.row.originRemark ? scope.row.originRemark : '无' | formatString }}</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</el-popover>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column prop=\"parentId\" label=\"师傅ID\" width=\"60\" align=\"center\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"appSystemCode\" label=\"设备类型\" width=\"70\" :formatter=\"formaterVersion\" align=\"center\"></el-table-column>\r\n\t\t\t\t<!-- <el-table-column prop=\"userType\" align=\"center\" :formatter=\"formaterUserType\" label=\"用户类型\"  width=\"100\"></el-table-column> -->\r\n\t\t\t\t<el-table-column prop=\"userStatus\" label=\"状态\" width=\"100\" align=\"center\">\r\n\t\t\t\t\t<template scope=\"scope\">\r\n\t\t\t\t\t\t<el-select v-model=\"scope.row.userStatus\" placeholder=\"请选择\" @change=\"userStatusChange(scope.$index, scope.row)\">\r\n\t\t\t\t\t\t\t<el-option v-for=\"item in userStatusOptions\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\"></el-option>\r\n\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column prop=\"userId\" label=\"扣量\" align=\"center\" width=\"100\">\r\n\t\t\t\t\t<template scope=\"scope\">\r\n\t\t\t\t\t\t<div v-if=\"scope.row.buckleAmount == 0\"><el-button type=\"danger\" @click=\"enableBuckleAmount(scope.$index, scope.row)\">启用</el-button></div>\r\n\t\t\t\t\t\t<div v-if=\"scope.row.buckleAmount != 0\">\r\n\t\t\t\t\t\t\t<el-input v-model=\"scope.row.buckleAmount\" placeholder=\"请输入内容\" width=\"56\" @blur=\"buckleAmountBlur(scope.$index, scope.row)\"></el-input>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column prop=\"adConverRate\" label=\"广告点击率\" :formatter=\"addPercent\" width=\"80\" align=\"center\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"ipPercentRate\" label=\"广告转化率\" :formatter=\"addPercent\" width=\"80\" align=\"center\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"adCount\" label=\"广告点击\" width=\"80\" align=\"center\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"pvCount\" label=\"文章点击PV\" width=\"100\" align=\"center\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"clientIpCount\" label=\"文章点击IP\" width=\"100\" align=\"center\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"pvIncome\" label=\"支付点击\" width=\"80\" align=\"center\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"incomeClientRate\" label=\"点击支付率\" :formatter=\"addPercent\" width=\"80\" align=\"center\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"originCount\" label=\"原文点击\" width=\"80\" align=\"center\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"originCountRate\" label=\"原文点击率\" :formatter=\"addPercent\" width=\"80\" align=\"center\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"m1Count\" label=\"M1\" width=\"60\" align=\"center\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"m2Count\" label=\"M2\" width=\"60\" align=\"center\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"m3Count\" label=\"M3\" width=\"60\" align=\"center\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"wecharBackRate\" label=\"返回微信率\" :formatter=\"addPercent\" width=\"80\" align=\"center\"></el-table-column>\r\n\t\t\t\t<!-- <el-table-column prop=\"shareCount\" label=\"分享文章量\" width=\"80\" align=\"center\"></el-table-column> -->\r\n\r\n\t\t\t\t<el-table-column prop=\"pvIncomeMoney\" label=\"支付金额\" width=\"80\" align=\"center\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"yearMonthDay\" :formatter=\"formatDate\" label=\"统计时间\" align=\"center\"></el-table-column>\r\n\t\t\t</el-table>\r\n\t\t\t<div class=\"pagination\">\r\n\t\t\t\t<el-pagination\r\n\t\t\t\t\tbackground\r\n\t\t\t\t\t@current-change=\"handleCurrentChange\"\r\n\t\t\t\t\t@size-change=\"handleSizeChange\"\r\n\t\t\t\t\t:current-page.sync=\"currentPage\"\r\n\t\t\t\t\tlayout=\"total, sizes, prev, pager, next, jumper\"\r\n\t\t\t\t\t:page-sizes=\"[10, 20, 50, 100]\"\r\n\t\t\t\t\t:page-size=\"cur_size\"\r\n\t\t\t\t\t:total=\"cur_total\"\r\n\t\t\t\t></el-pagination>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tname: 'basetable',\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\ttableLoading: false,\r\n\t\t\tuserType: null,\r\n\t\t\tcurrentPage: 1,\r\n\t\t\ttableData: [], // 表格数据\r\n\t\t\tcur_page: 1, // 当前页号\r\n\t\t\tcur_size: 20,\r\n\t\t\tcur_total: 0, // 总记录数\r\n\t\t\tselect_word: '',\r\n\t\t\tstartCountDate: this.dateFtt('yyyy-MM-dd', new Date(), 1),\r\n\t\t\tendCountDate: this.dateFtt('yyyy-MM-dd', new Date(), 1),\r\n\t\t\tfilename: '',\r\n\t\t\tids: [],\r\n\t\t\texportList: [],\r\n\t\t\trowStyle: { height: '48px' },\r\n\t\t\tcellStyle: { padding: 0 },\r\n\t\t\tuserStatusOptions: [\r\n\t\t\t\t{\r\n\t\t\t\t\t//0:正常 1:封杀\r\n\t\t\t\t\tvalue: 0,\r\n\t\t\t\t\tlabel: '禁用'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tvalue: 1,\r\n\t\t\t\t\tlabel: '正常'\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tuserTypeArr: [{ name: '全部', value: '' }, { name: '普通用户', value: 1 }, { name: 'vip用户', value: 2 }, { name: 'svip用户', value: 3 }]\r\n\t\t};\r\n\t},\r\n\tfilters: {\r\n\t\tformatString: function(value) {\r\n\t\t\tif (value && value.length > 5) {\r\n\t\t\t\treturn value.substring(0, 5) + '...';\r\n\t\t\t} else {\r\n\t\t\t\treturn value;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcreated() {\r\n\t\tthis.getData();\r\n\t},\r\n\tmethods: {\r\n\t\t// 分页导航\r\n\t\thandleCurrentChange(val) {\r\n\t\t\tthis.currentPage = val;\r\n\t\t\tthis.cur_page = val;\r\n\t\t\tthis.findCountData();\r\n\t\t},\r\n\t\thandleSelectionChange(val) {\r\n\t\t\tthis.multipleSelection = val;\r\n\t\t},\r\n\t\thandleSizeChange(val) {\r\n\t\t\tthis.cur_size = val;\r\n\t\t\tthis.findCountData();\r\n\t\t},\r\n\t\tgetData() {\r\n\t\t\tthis.findCountData();\r\n\t\t},\r\n\t\tformaterVersion(row, column, cellValue, index) {\r\n\t\t\treturn cellValue === 1 ? 'android' : cellValue === 2 ? 'ios' : '未知';\r\n\t\t},\r\n\t\tformatDate(row, column, cellValue, index) {\r\n\t\t\treturn cellValue.substring(4, cellValue.length);\r\n\t\t},\r\n\t\tsearch() {\r\n\t\t\tthis.currentPage = 1;\r\n\t\t\tthis.cur_page = 1;\r\n\t\t\tthis.findCountData();\r\n\t\t},\r\n\t\tchangeStatus() {\r\n\t\t\tthis.currentPage = 1;\r\n\t\t\tthis.cur_page = 1;\r\n\t\t\tthis.findCountData();\r\n\t\t},\r\n\t\tformaterUserType(row, column, cellValue, index) {\r\n\t\t\treturn cellValue === 1 ? '普通用户' : cellValue === 2 ? 'vip用户' : 'svip用户';\r\n\t\t},\r\n\t\tbuckleAmountBlur(index, row) {\r\n\t\t\tif (row.buckleAmount.indexOf('%') == -1) {\r\n\t\t\t\trow.buckleAmount = row.buckleAmount + '%';\r\n\t\t\t}\r\n\t\t\tthis.$axios\r\n\t\t\t\t.post(this.BASE_URL + 'admin/account/saveBuckleAmount', {\r\n\t\t\t\t\t//保存扣量\r\n\t\t\t\t\tuserId: row.userId,\r\n\t\t\t\t\tbuckleAmount: row.buckleAmount\r\n\t\t\t\t})\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\trow.buckleAmount = res.data.data.buckleAmount;\r\n\t\t\t\t});\r\n\t\t},\r\n\t\tenableBuckleAmount(index, row) {\r\n\t\t\trow.buckleAmount = '0%';\r\n\t\t},\r\n\t\taddPercent(row, column, cellValue, index) {\r\n\t\t\treturn cellValue + '%';\r\n\t\t},\r\n\t\toperateList(list) {\r\n\t\t\tif (!Array.isArray(list)) return;\r\n\t\t\tlist.map(item => {\r\n\t\t\t\titem.editing = false;\r\n\t\t\t\titem.originRemark = item.remark;\r\n\t\t\t});\r\n\t\t\treturn list;\r\n\t\t},\r\n\t\tasync findCountData() {\r\n\t\t\tlet postData = {\r\n\t\t\t\tpage: this.cur_page,\r\n\t\t\t\tsize: this.cur_size,\r\n\t\t\t\tstartCountDate: this.startCountDate,\r\n\t\t\t\tendCountDate: this.endCountDate,\r\n\t\t\t\tselectWord: this.select_word,\r\n\t\t\t\tuserType: this.userType\r\n\t\t\t};\r\n\t\t\tlet {\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tdata: { list, total }\r\n\t\t\t\t}\r\n\t\t\t} = await this.$axios.post(this.BASE_URL + 'admin/account/userDataMonitoring', postData);\r\n\t\t\tthis.tableData = this.operateList(list);\r\n\t\t\tthis.cur_total = total;\r\n\t\t\tthis.tableLoading = false;\r\n\t\t},\r\n\t\tuserStatusChange(index, row) {\r\n\t\t\tvar msg = '';\r\n\t\t\tvar confirmButtonText = '';\r\n\t\t\tvar back = 0; //用户取消操作\r\n\t\t\tif (row.userStatus === '') {\r\n\t\t\t\treturn;\r\n\t\t\t} else if (row.userStatus === 0) {\r\n\t\t\t\tmsg = '封杀用户ID为：' + row.userId + ', 是否继续?';\r\n\t\t\t\tconfirmButtonText = '封杀';\r\n\t\t\t\tback = 1;\r\n\t\t\t} else if (row.userStatus === 1) {\r\n\t\t\t\tmsg = '恢复用户ID为：' + row.userId + ', 是否继续?';\r\n\t\t\t\tconfirmButtonText = '启用';\r\n\t\t\t\tback = 0;\r\n\t\t\t}\r\n\t\t\tthis.$confirm(msg, '提示', {\r\n\t\t\t\tconfirmButtonText: confirmButtonText,\r\n\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\ttype: 'warning',\r\n\t\t\t\tcenter: true\r\n\t\t\t}).then(() => {\r\n\t\t\t\tthis.$axios\r\n\t\t\t\t\t.post(this.BASE_URL + 'admin/account/forceOutWecharUser', {\r\n\t\t\t\t\t\t//封杀微信用户\r\n\t\t\t\t\t\tuserId: row.userId,\r\n\t\t\t\t\t\tstatus: row.userStatus\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\trow.userStatus = res.data.data.status;\r\n\t\t\t\t\t});\r\n\t\t\t\tthis.$message({\r\n\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\tmessage: confirmButtonText + '成功'\r\n\t\t\t\t});\r\n\t\t\t}).catch(() => {\r\n\t\t\t\tthis.$message({\r\n\t\t\t\t\ttype: 'info',\r\n\t\t\t\t\tmessage: '取消' + confirmButtonText\r\n\t\t\t\t});\r\n\t\t\t\trow.userStatus = back;\r\n\t\t\t});\r\n\t\t},\r\n\t\tstartCountDateChange() {\r\n\t\t\tif (this.startCountDate > this.endCountDate) {\r\n\t\t\t\tthis.$message({\r\n\t\t\t\t\tmessage: '起始日期不得大于结束日期',\r\n\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t});\r\n\t\t\t\tthis.startCountDate = this.endCountDate;\r\n\t\t\t}\r\n\t\t},\r\n\t\tendCountDateChange() {\r\n\t\t\tif (this.startCountDate > this.endCountDate) {\r\n\t\t\t\tthis.$message({\r\n\t\t\t\t\tmessage: '结束日期不得小于起始日期',\r\n\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t});\r\n\t\t\t\tthis.endCountDate = this.startCountDate;\r\n\t\t\t}\r\n\t\t},\r\n\t\t// remark\r\n\t\teditRemark(row) {\r\n\t\t\tthis.tableData.map(item => {\r\n\t\t\t\titem.editing = false;\r\n\t\t\t});\r\n\t\t\trow.editing = true;\r\n\t\t},\r\n\t\t// remark\r\n\t\tcancelRemark(row) {\r\n\t\t\trow.remark = row.originRemark;\r\n\t\t\trow.editing = false;\r\n\t\t},\r\n\t\tsaveRemark(row) {\r\n\t\t\tthis.$axios\r\n\t\t\t\t.post(this.BASE_URL + 'admin/account/forceOutWecharUser', {\r\n\t\t\t\t\tuserId: row.userId,\r\n\t\t\t\t\tstatus: row.userStatus,\r\n\t\t\t\t\tremark: row.remark\r\n\t\t\t\t})\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tif (+res.data.code === 200) {\r\n\t\t\t\t\t\tthis.$message.success('保存成功');\r\n\t\t\t\t\t\tthis.getData();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t},\r\n\t\tasync exportExcel() {\r\n\t\t\tawait this.getTop40Data();\r\n\t\t\tthis.getDataByID(this.ids);\r\n\t\t},\r\n\t\t// 导出Excel\r\n\t\tasync getTop40Data() {\r\n\t\t\tlet exportIds = JSON.parse(localStorage.getItem('exportIds')) || [];\r\n\t\t\tvar yesterDayTime = new Date(this.startCountDate).getTime() - 86400000;\r\n\t\t\tthis.yesterDay = this.dateFtt('yyyy-MM-dd', new Date(yesterDayTime), 1);\r\n\t\t\tthis.filename = this.dateFtt('yyyy-MM-dd', new Date(yesterDayTime), 1);\r\n\t\t\tlet postData = {\r\n\t\t\t\tpage: 1,\r\n\t\t\t\tsize: 40,\r\n\t\t\t\tstartCountDate: this.yesterDay,\r\n\t\t\t\tendCountDate: this.yesterDay,\r\n\t\t\t\tselectWord: ''\r\n\t\t\t};\r\n\t\t\tlet {\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tdata: { list }\r\n\t\t\t\t}\r\n\t\t\t} = await this.$axios.post(this.BASE_URL + 'admin/account/userDataMonitoring', postData);\r\n\t\t\tif (!Array.isArray(list)) return;\r\n\t\t\tfor (let i = 0; i < list.length; i++) {\r\n\t\t\t\tthis.ids.push(list[i].userId);\r\n\t\t\t}\r\n\t\t\tthis.ids = Array.from(new Set([...exportIds, ...this.ids]));\r\n\t\t\tlocalStorage.setItem('exportIds', JSON.stringify(this.ids));\r\n\t\t},\r\n\t\tasync getDataByID(ids) {\r\n\t\t\tlet resultArr = [];\r\n\t\t\t// 并发读取远程URL\r\n\t\t\tconst textPromises = ids.map(async id => {\r\n\t\t\t\tlet postData = {\r\n\t\t\t\t\tpage: 1,\r\n\t\t\t\t\tsize: 1,\r\n\t\t\t\t\tstartCountDate: this.yesterDay,\r\n\t\t\t\t\tendCountDate: this.yesterDay,\r\n\t\t\t\t\tselectWord: id\r\n\t\t\t\t};\r\n\t\t\t\tlet {\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tdata: { list }\r\n\t\t\t\t\t}\r\n\t\t\t\t} = await this.$axios.post(this.BASE_URL + 'admin/account/userDataMonitoring', postData);\r\n\t\t\t\treturn list;\r\n\t\t\t});\r\n\t\t\t// 按次序输出\r\n\t\t\tfor (const textPromise of textPromises) {\r\n\t\t\t\tlet res = await textPromise;\r\n\t\t\t\tif (res) {\r\n\t\t\t\t\tresultArr.push(res);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\r\n\t\t\tthis.exportList = resultArr.flat();\r\n\t\t\tthis.handleDownload();\r\n\t\t},\r\n\t\thandleDownload() {\r\n\t\t\timport('@/vendor/Export2Excel').then(excel => {\r\n\t\t\t\tconst tHeader = ['userId', 'pvCount'];\r\n\t\t\t\tconst filterVal = ['userId', 'pvCount'];\r\n\t\t\t\tconst list = this.exportList;\r\n\t\t\t\tconst data = this.formatJson(filterVal, list);\r\n\t\t\t\tconsole.log(data);return;\r\n\t\t\t\texcel.export_json_to_excel({\r\n\t\t\t\t\theader: tHeader,\r\n\t\t\t\t\tdata,\r\n\t\t\t\t\tfilename: '玉龙资讯' + this.filename,\r\n\t\t\t\t\tautoWidth: true,\r\n\t\t\t\t\tbookType: 'xlsx'\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\t\tformatJson(filterVal, jsonData) {\r\n\t\t\treturn jsonData.map(v =>\r\n\t\t\t\tfilterVal.map(j => {\r\n\t\t\t\t\treturn v[j];\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t},\r\n\r\n\t\t// 公用\r\n\t\tdateFtt(fmt, date, monthNum) {\r\n\t\t\tvar o = {\r\n\t\t\t\t'M+': date.getMonth() + monthNum, //月份\r\n\t\t\t\t'd+': date.getDate(), //日\r\n\t\t\t\t'h+': date.getHours(), //小时\r\n\t\t\t\t'm+': date.getMinutes(), //分\r\n\t\t\t\t's+': date.getSeconds(), //秒\r\n\t\t\t\t'q+': Math.floor((date.getMonth() + 3) / 3), //季度\r\n\t\t\t\tS: date.getMilliseconds() //毫秒\r\n\t\t\t};\r\n\t\t\tif (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (date.getFullYear() + '').substr(4 - RegExp.$1.length));\r\n\t\t\tfor (var k in o) if (new RegExp('(' + k + ')').test(fmt)) fmt = fmt.replace(RegExp.$1, RegExp.$1.length == 1 ? o[k] : ('00' + o[k]).substr(('' + o[k]).length));\r\n\t\t\treturn fmt;\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.handle-box {\r\n\tmargin-bottom: 15px;\r\n}\r\n\r\n.handle-label {\r\n\twidth: 140px;\r\n}\r\n\r\n.handle-select {\r\n\twidth: 120px;\r\n}\r\n\r\n.handle-input {\r\n\twidth: 200px;\r\n\tdisplay: inline-block;\r\n}\r\n.del-dialog-cnt {\r\n\tfont-size: 16px;\r\n\ttext-align: center;\r\n}\r\n.table {\r\n\twidth: 100%;\r\n\tfont-size: 14px;\r\n}\r\n.red {\r\n\tcolor: #ff0000;\r\n}\r\n.mr10 {\r\n\tmargin-right: 10px;\r\n}\r\n</style>\n"],"sourceRoot":"src/main/statistics"}]}