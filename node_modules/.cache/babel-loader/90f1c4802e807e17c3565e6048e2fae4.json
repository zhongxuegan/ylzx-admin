{"remainingRequest":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\src\\main\\news\\classify_management.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\src\\main\\news\\classify_management.vue","mtime":1598233488380},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.function.name\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\\\u949F\\u5B66\\u521A\\\\Desktop\\\\jfzx-admin\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _Array$isArray from \"C:\\\\Users\\\\\\u949F\\u5B66\\u521A\\\\Desktop\\\\jfzx-admin\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/array/is-array\";\nimport \"core-js/modules/es6.array.sort\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: 'basetable',\n  data: function data() {\n    return {\n      tableLoading: true,\n      sortReadonly: false,\n      copySort: 0,\n      copyEditSort: 0,\n      sortEditReadonly: false,\n      url: this.BASE_URL + 'admin/article/classify/list',\n      tableData: [],\n      page: 1,\n      size: 10,\n      select_flag: '0',\n      select_name: '',\n      editVisible: false,\n      addVisible: false,\n      form: {\n        name: '',\n        sort: '',\n        money: '',\n        id: '',\n        deleteFlag: null,\n        vipMoney: ''\n      },\n      total: 0\n    };\n  },\n  created: function created() {\n    this.getData();\n  },\n  methods: {\n    changeStatus: function changeStatus(val) {\n      if (val === '1') {\n        this.sortReadonly = true;\n        this.copySort = this.form.sort;\n      } else {\n        this.sortReadonly = false;\n        this.form.sort = this.copySort;\n      }\n    },\n    changeEditStatus: function changeEditStatus(val) {\n      if (val === '1') {\n        this.sortEditReadonly = true;\n        this.copyEditSort = this.form.sort;\n      } else {\n        this.sortEditReadonly = false;\n        this.form.sort = this.copyEditSort;\n      }\n    },\n    changeFlag: function changeFlag() {\n      this.page = 1;\n      this.getData();\n    },\n    handleSizeChange: function handleSizeChange(cur_size) {\n      this.size = cur_size;\n      this.getData();\n    },\n    handleCurrentChange: function handleCurrentChange(cur_page) {\n      this.page = cur_page;\n      this.getData();\n    },\n    operateList: function operateList(list) {\n      if (!_Array$isArray(list)) return;\n      list.map(function (item) {\n        item.status = item.deleteFlag ? '停用' : '启用';\n      });\n      return list;\n    },\n    getData: function () {\n      var _getData = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var postData, _ref, _ref$data$data, list, total;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                postData = {\n                  params: {\n                    page: this.page,\n                    size: this.size,\n                    deleteFlag: this.select_flag,\n                    name: this.select_name\n                  }\n                };\n                _context.next = 3;\n                return this.$axios.get(this.url, postData);\n\n              case 3:\n                _ref = _context.sent;\n                _ref$data$data = _ref.data.data;\n                list = _ref$data$data.list;\n                total = _ref$data$data.total;\n                this.tableData = this.operateList(list);\n                this.total = total;\n                this.tableLoading = false;\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getData() {\n        return _getData.apply(this, arguments);\n      }\n\n      return getData;\n    }(),\n    search: function search() {\n      this.page = 1;\n      this.getData();\n    },\n    handleEdit: function handleEdit(index, row) {\n      var sort = row.sort,\n          money = row.money,\n          id = row.id,\n          deleteFlag = row.deleteFlag,\n          name = row.name,\n          vipMoney = row.vipMoney;\n      this.form = {\n        sort: sort,\n        money: money,\n        id: id,\n        deleteFlag: deleteFlag.toString(),\n        name: name,\n        vipMoney: vipMoney\n      };\n\n      if (Number(sort) === 0) {\n        this.sortEditReadonly = true;\n      } else {\n        this.sortEditReadonly = false;\n      }\n\n      this.editVisible = true;\n    },\n    handleAdd: function () {\n      var _handleAdd = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        var _ref2, data;\n\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.$axios.post(this.BASE_URL + 'admin/article/classify/findMaxSortNum');\n\n              case 2:\n                _ref2 = _context2.sent;\n                data = _ref2.data.data;\n                this.form = {\n                  sort: data,\n                  money: '',\n                  deleteFlag: '0',\n                  name: '',\n                  vipMoney: ''\n                };\n                this.addVisible = true;\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function handleAdd() {\n        return _handleAdd.apply(this, arguments);\n      }\n\n      return handleAdd;\n    }(),\n    saveAdd: function () {\n      var _saveAdd = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee3() {\n        var _ref3, code;\n\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                if (!(this.form.deleteFlag === '0')) {\n                  _context3.next = 4;\n                  break;\n                }\n\n                if (!(this.form.sort < 1)) {\n                  _context3.next = 4;\n                  break;\n                }\n\n                this.$message('排序值不能小于1');\n                return _context3.abrupt(\"return\");\n\n              case 4:\n                if (!(this.form.name == '' || this.form.name == null)) {\n                  _context3.next = 7;\n                  break;\n                }\n\n                this.$message('名称没有填写');\n                return _context3.abrupt(\"return\");\n\n              case 7:\n                _context3.next = 9;\n                return this.$axios.post(this.BASE_URL + 'admin/article/classify/add', this.form);\n\n              case 9:\n                _ref3 = _context3.sent;\n                code = _ref3.data.code;\n                this.addVisible = false;\n                this.$message.success(\"\\u6DFB\\u52A0\\u6210\\u529F\");\n                this.getData();\n\n              case 14:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function saveAdd() {\n        return _saveAdd.apply(this, arguments);\n      }\n\n      return saveAdd;\n    }(),\n    saveEdit: function () {\n      var _saveEdit = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee4() {\n        var _ref4, code;\n\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                if (!(this.form.name !== '底部视频')) {\n                  _context4.next = 5;\n                  break;\n                }\n\n                if (!(this.form.deleteFlag === '0')) {\n                  _context4.next = 5;\n                  break;\n                }\n\n                if (!(this.form.sort < 1)) {\n                  _context4.next = 5;\n                  break;\n                }\n\n                this.$message('排序值不能小于1');\n                return _context4.abrupt(\"return\");\n\n              case 5:\n                if (!(this.form.name == '' || this.form.name == null)) {\n                  _context4.next = 8;\n                  break;\n                }\n\n                this.$message('名称没有填写');\n                return _context4.abrupt(\"return\");\n\n              case 8:\n                _context4.next = 10;\n                return this.$axios.post(this.BASE_URL + 'admin/article/classify/update', this.form);\n\n              case 10:\n                _ref4 = _context4.sent;\n                code = _ref4.data.code;\n                this.editVisible = false;\n                this.$message.success(\"\\u4FEE\\u6539\\u6210\\u529F\");\n                this.getData();\n\n              case 15:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function saveEdit() {\n        return _saveEdit.apply(this, arguments);\n      }\n\n      return saveEdit;\n    }()\n  }\n};",{"version":3,"sources":["classify_management.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div class=\"table\">\r\n\t\t<div class=\"crumbs\">\r\n\t\t\t<el-breadcrumb separator=\"/\">\r\n\t\t\t\t<el-breadcrumb-item>\r\n\t\t\t\t\t<i class=\"el-icon-lx-cascades\"></i>\r\n\t\t\t\t\t分类管理\r\n\t\t\t\t</el-breadcrumb-item>\r\n\t\t\t</el-breadcrumb>\r\n\t\t</div>\r\n\t\t<div class=\"container\">\r\n\t\t\t<div class=\"handle-box\">\r\n\t\t\t\t<el-select v-model=\"select_flag\" placeholder=\"状态\" class=\"handle-select mr10\" @change=\"changeFlag\">\r\n\t\t\t\t\t<el-option key=\"0\" label=\"全部\" value=\"\"></el-option>\r\n\t\t\t\t\t<el-option key=\"1\" label=\"启用\" value=\"0\"></el-option>\r\n\t\t\t\t\t<el-option key=\"2\" label=\"停用\" value=\"1\"></el-option>\r\n\t\t\t\t</el-select>\r\n\t\t\t\t<el-input v-model=\"select_name\" placeholder=\"分类名称\" clearable class=\"handle-input mr10\"></el-input>\r\n\t\t\t\t<el-button type=\"primary\" icon=\"search\" @click=\"search\">搜索</el-button>\r\n\t\t\t\t<el-button type=\"primary\" icon=\"el-icon-add\" @click=\"handleAdd\">新增</el-button>\r\n\t\t\t</div>\r\n\t\t\t<el-table v-loading=\"tableLoading\" :data=\"tableData\" border class=\"table\" ref=\"multipleTable\">\r\n\t\t\t\t<el-table-column prop=\"id\" label=\"id\" sortable align=\"center\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"name\" label=\"名称\" align=\"center\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"money\" label=\"价格\" align=\"center\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"vipMoney\" label=\"VIP价格\" align=\"center\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"sort\" label=\"排序\" sortable align=\"center\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"status\" label=\"状态\" align=\"center\"></el-table-column>\r\n\t\t\t\t<el-table-column label=\"操作\" width=\"180\" align=\"center\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<el-button type=\"primary\" @click=\"handleEdit(scope.$index, scope.row)\">编辑</el-button>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t</el-table>\r\n\t\t\t<div class=\"pagination\">\r\n\t\t\t\t<el-pagination\r\n\t\t\t\t\tbackground\r\n\t\t\t\t\t@size-change=\"handleSizeChange\"\r\n\t\t\t\t\t@current-change=\"handleCurrentChange\"\r\n\t\t\t\t\t:page-sizes=\"[10, 20, 50, 100]\"\r\n\t\t\t\t\t:current-page.sync=\"page\"\r\n\t\t\t\t\tlayout=\"total, sizes, prev, pager, next, jumper\"\r\n\t\t\t\t\t:total=\"total\"\r\n\t\t\t\t></el-pagination>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<!-- 编辑弹出框 -->\r\n\t\t<el-dialog title=\"编辑\" :visible.sync=\"editVisible\" width=\"30%\">\r\n\t\t\t<el-form ref=\"form\" :model=\"form\" label-width=\"70px\">\r\n\t\t\t\t<el-form-item label=\"排序\"><el-input v-model=\"form.sort\" :readonly=\"sortEditReadonly\" type=\"number\" min=\"1\" style=\"width: 100%;\"></el-input></el-form-item>\r\n\t\t\t\t<el-form-item label=\"名称\"><el-input v-model=\"form.name\" style=\"width: 100%;\"></el-input></el-form-item>\r\n\t\t\t\t<el-form-item label=\"价格\"><el-input v-model=\"form.money\" style=\"width: 100%;\"></el-input></el-form-item>\r\n\t\t\t\t<el-form-item label=\"VIP价格\"><el-input v-model=\"form.vipMoney\" style=\"width: 100%;\"></el-input></el-form-item>\r\n\t\t\t\t<el-form-item label=\"状态\">\r\n\t\t\t\t\t<el-select v-model=\"form.deleteFlag\" style=\"width: 100%;\" @change=\"changeEditStatus\">\r\n\t\t\t\t\t\t<el-option key=\"1\" label=\"启用\" value=\"0\"></el-option>\r\n\t\t\t\t\t\t<el-option key=\"2\" label=\"停用\" value=\"1\"></el-option>\r\n\t\t\t\t\t</el-select>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-input v-model=\"form.id\" type=\"hidden\"></el-input>\r\n\t\t\t</el-form>\r\n\t\t\t<span slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t<el-button @click=\"editVisible = false\">取 消</el-button>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"saveEdit\">确 定</el-button>\r\n\t\t\t</span>\r\n\t\t</el-dialog>\r\n\r\n\t\t<!-- 新增弹出框 -->\r\n\t\t<el-dialog title=\"新增\" :visible.sync=\"addVisible\" width=\"30%\">\r\n\t\t\t<el-form ref=\"form\" :model=\"form\" label-width=\"70px\">\r\n\t\t\t\t<el-form-item label=\"排序\"><el-input v-model=\"form.sort\" :readonly=\"sortReadonly\" type=\"number\" min=\"1\" style=\"width: 100%;\"></el-input></el-form-item>\r\n\t\t\t\t<el-form-item label=\"名称\"><el-input v-model=\"form.name\" style=\"width: 100%;\"></el-input></el-form-item>\r\n\t\t\t\t<el-form-item label=\"价格\"><el-input v-model=\"form.money\" style=\"width: 100%;\"></el-input></el-form-item>\r\n\t\t\t\t<el-form-item label=\"VIP价格\"><el-input v-model=\"form.vipMoney\" style=\"width: 100%;\"></el-input></el-form-item>\r\n\t\t\t\t<el-form-item label=\"状态\">\r\n\t\t\t\t\t<el-select v-model=\"form.deleteFlag\" style=\"width: 100%;\" @change=\"changeStatus\">\r\n\t\t\t\t\t\t<el-option key=\"1\" label=\"启用\" value=\"0\"></el-option>\r\n\t\t\t\t\t\t<el-option key=\"2\" label=\"停用\" value=\"1\"></el-option>\r\n\t\t\t\t\t</el-select>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</el-form>\r\n\t\t\t<span slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t<el-button @click=\"addVisible = false\">取 消</el-button>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"saveAdd\">确 定</el-button>\r\n\t\t\t</span>\r\n\t\t</el-dialog>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tname: 'basetable',\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\ttableLoading:true,\r\n\t\t\tsortReadonly: false,\r\n\t\t\tcopySort: 0,\r\n\t\t\tcopyEditSort: 0,\r\n\t\t\tsortEditReadonly: false,\r\n\t\t\turl: this.BASE_URL + 'admin/article/classify/list',\r\n\t\t\ttableData: [],\r\n\t\t\tpage: 1,\r\n\t\t\tsize: 10,\r\n\t\t\tselect_flag: '0',\r\n\t\t\tselect_name: '',\r\n\t\t\teditVisible: false,\r\n\t\t\taddVisible: false,\r\n\t\t\tform: {\r\n\t\t\t\tname: '',\r\n\t\t\t\tsort: '',\r\n\t\t\t\tmoney: '',\r\n\t\t\t\tid: '',\r\n\t\t\t\tdeleteFlag: null,\r\n\t\t\t\tvipMoney: ''\r\n\t\t\t},\r\n\t\t\ttotal: 0\r\n\t\t};\r\n\t},\r\n\tcreated() {\r\n\t\tthis.getData();\r\n\t},\r\n\tmethods: {\r\n\t\tchangeStatus(val) {\r\n\t\t\tif (val === '1') {\r\n\t\t\t\tthis.sortReadonly = true;\r\n\t\t\t\tthis.copySort = this.form.sort;\r\n\t\t\t} else {\r\n\t\t\t\tthis.sortReadonly = false;\r\n\t\t\t\tthis.form.sort = this.copySort;\r\n\t\t\t}\r\n\t\t},\r\n\t\tchangeEditStatus(val) {\r\n\t\t\tif (val === '1') {\r\n\t\t\t\tthis.sortEditReadonly = true;\r\n\t\t\t\tthis.copyEditSort = this.form.sort;\r\n\t\t\t} else {\r\n\t\t\t\tthis.sortEditReadonly = false;\r\n\t\t\t\tthis.form.sort = this.copyEditSort;\r\n\t\t\t}\r\n\t\t},\r\n\t\tchangeFlag(){\r\n\t\t\tthis.page = 1;\r\n\t\t\tthis.getData();\r\n\t\t},\r\n\t\thandleSizeChange(cur_size) {\r\n\t\t\tthis.size = cur_size;\r\n\t\t\tthis.getData();\r\n\t\t},\r\n\t\thandleCurrentChange(cur_page) {\r\n\t\t\tthis.page = cur_page;\r\n\t\t\tthis.getData();\r\n\t\t},\r\n\t\toperateList(list) {\r\n\t\t\tif (!Array.isArray(list)) return;\r\n\t\t\tlist.map(item => {\r\n\t\t\t\titem.status = item.deleteFlag ? '停用' : '启用';\r\n\t\t\t});\r\n\t\t\treturn list;\r\n\t\t},\r\n\t\tasync getData() {\r\n\t\t\tlet postData = {\r\n\t\t\t\tparams: {\r\n\t\t\t\t\tpage: this.page,\r\n\t\t\t\t\tsize: this.size,\r\n\t\t\t\t\tdeleteFlag: this.select_flag,\r\n\t\t\t\t\tname: this.select_name\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tlet {\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tdata: { list, total }\r\n\t\t\t\t}\r\n\t\t\t} = await this.$axios.get(this.url, postData);\r\n\t\t\tthis.tableData = this.operateList(list);\r\n\t\t\tthis.total = total;\r\n\t\t\tthis.tableLoading = false;\r\n\t\t},\r\n\t\tsearch() {\r\n\t\t\tthis.page = 1;\r\n\t\t\tthis.getData();\r\n\t\t},\r\n\t\thandleEdit(index, row) {\r\n\t\t\tlet { sort, money, id, deleteFlag, name, vipMoney } = row;\r\n\t\t\tthis.form = {\r\n\t\t\t\tsort,\r\n\t\t\t\tmoney,\r\n\t\t\t\tid,\r\n\t\t\t\tdeleteFlag: deleteFlag.toString(),\r\n\t\t\t\tname,\r\n\t\t\t\tvipMoney\r\n\t\t\t};\r\n\t\t\tif (Number(sort) === 0) {\r\n\t\t\t\tthis.sortEditReadonly = true;\r\n\t\t\t} else {\r\n\t\t\t\tthis.sortEditReadonly = false;\r\n\t\t\t}\r\n\t\t\tthis.editVisible = true;\r\n\t\t},\r\n\t\tasync handleAdd() {\r\n\t\t\tlet {\r\n\t\t\t\tdata: { data }\r\n\t\t\t} = await this.$axios.post(this.BASE_URL + 'admin/article/classify/findMaxSortNum');\r\n\t\t\tthis.form = {\r\n\t\t\t\tsort: data,\r\n\t\t\t\tmoney: '',\r\n\t\t\t\tdeleteFlag: '0',\r\n\t\t\t\tname: '',\r\n\t\t\t\tvipMoney: ''\r\n\t\t\t};\r\n\r\n\t\t\tthis.addVisible = true;\r\n\t\t},\r\n\t\tasync saveAdd() {\r\n\t\t\tif (this.form.deleteFlag === '0') {\r\n\t\t\t\tif (this.form.sort < 1) {\r\n\t\t\t\t\tthis.$message('排序值不能小于1');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.form.name == '' || this.form.name == null) {\r\n\t\t\t\tthis.$message('名称没有填写');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlet {\r\n\t\t\t\tdata: { code }\r\n\t\t\t} = await this.$axios.post(this.BASE_URL + 'admin/article/classify/add', this.form);\r\n\t\t\tthis.addVisible = false;\r\n\t\t\tthis.$message.success(`添加成功`);\r\n\t\t\tthis.getData();\r\n\t\t},\r\n\t\tasync saveEdit() {\r\n\t\t\tif (this.form.name !== '底部视频') {\r\n\t\t\t\tif (this.form.deleteFlag === '0') {\r\n\t\t\t\t\tif (this.form.sort < 1) {\r\n\t\t\t\t\t\tthis.$message('排序值不能小于1');\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.form.name == '' || this.form.name == null) {\r\n\t\t\t\tthis.$message('名称没有填写');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlet {\r\n\t\t\t\tdata: { code }\r\n\t\t\t} = await this.$axios.post(this.BASE_URL + 'admin/article/classify/update', this.form);\r\n\t\t\tthis.editVisible = false;\r\n\t\t\tthis.$message.success(`修改成功`);\r\n\t\t\tthis.getData();\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.handle-box {\r\n\tmargin-bottom: 15px;\r\n}\r\n\r\n.handle-select {\r\n\twidth: 120px;\r\n}\r\n\r\n.handle-input {\r\n\twidth: 200px;\r\n\tdisplay: inline-block;\r\n}\r\n.del-dialog-cnt {\r\n\tfont-size: 16px;\r\n\ttext-align: center;\r\n}\r\n.table {\r\n\twidth: 100%;\r\n\tfont-size: 14px;\r\n}\r\n.red {\r\n\tcolor: #ff0000;\r\n}\r\n.mr10 {\r\n\tmargin-right: 10px;\r\n}\r\n</style>\n"],"sourceRoot":"src/main/news"}]}