{"remainingRequest":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\src\\main\\basic\\add\\home_popup_windows_addWindows.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\src\\main\\basic\\add\\home_popup_windows_addWindows.vue","mtime":1598013171526},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n\tname:'home_popup_windows_addWindows',\n\tdata(){\n\t\treturn{\r\n\t\t\thasC: false,\r\n\t\t\tformLabelWidth:'150px',\n\t\t\twindowsForm:{\r\n\t\t\t\ttitle:'',\r\n\t\t\t\tstatus:true,\r\n\t\t\t\tuseType:0,\r\n\t\t\t\timgurl:'',\r\n\t\t\t\tpaper:'',\r\n\t\t\t\tisUseButton:true,\r\n\t\t\t\tbuttonName:'我知道了',\r\n\t\t\t\tbuttonUrl:'',\r\n\t\t\t\tlinkType:1\r\n\t\t\t},\r\n\t\t\tuploadAction: this.BASE_URL + 'admin/upload/uploadImgByType',\r\n\t\t\ttokenObj: { token: localStorage.getItem(\"token\") },\r\n\t\t\tuploadImgData: { type: \"4\" },\r\n\t\t\trules:{\r\n\t\t\t\ttitle:[{ required:true,message:'请输入标题',trigger:'blur' }],\r\n\t\t\t\tstatus:[{ required:true,message:'请选择状态',trigger:'change' }],\r\n\t\t\t\tsortNum:[{ required:true,message:'请输入排序',trigger:'blur' }],\r\n\t\t\t\tuseType:[{ required:true,message:'请选择针对用户',trigger:'change' }],\r\n\t\t\t\tpaper:[{ required:true,message:'请输入文案',trigger:'blur' }],\r\n\t\t\t\tisUseButton:[{ required:true,message:'请选择是否有按钮',trigger:'blur' }],\r\n\t\t\t}\n\t\t}\n\t},\n\tmethods:{\r\n\t\thandleRemove(){\r\n\t\t\tthis.windowsForm.imgurl = '';\r\n\t\t},\r\n\t\tonBeforeUploadImage(file) {\r\n\t\t  const isImg = this.isImage(file.name);\r\n\t\t  const isLit2M = this.isLit2M(file.size);\r\n\t\t  return isImg && isLit2M;\r\n\t\t},\r\n\t\tfileChange(res) {\r\n\t\t  this.windowsForm.imgurl = res.data;\r\n\t\t},\r\n\t\treset(){\r\n\t\t\tthis.$confirm('确定重置吗', '提示', {\r\n\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\ttype: 'warning'\r\n\t\t\t}).then(()=>{\r\n\t\t\t\tthis.$refs.windowsForm.resetFields();\r\n\t\t\t\tthis.$refs.content.setContent('');\r\n\t\t\t}).catch(()=>{})\r\n\t\t},\r\n\t\tsubmitForm(formName){\r\n\t\t\tthis.$refs[formName].validate(valid=>{\r\n\t\t\t\tif(valid){\r\n\t\t\t\t\tthis.$confirm('确定提交吗', '提示', {\r\n\t\t\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t\t}).then(()=>{\r\n\t\t\t\t\t\tthis.saveWindows();\r\n\t\t\t\t\t}).catch(()=>{})\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tasync saveWindows(){\r\n\t\t\tlet { data:{ code,message } } = await this.$axios.post(this.BASE_URL+'admin/system/popout/addPopout',this.windowsForm);\r\n\t\t\tif(code == '200'){\r\n\t\t\t\tthis.$message.success(message);\r\n\t\t\t\tthis.$refs.windowsForm.resetFields();\r\n\t\t\t\tthis.$refs.content.setContent('');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.$message.error(message);\r\n\t\t},\r\n\t\tisImage(fileName) {\r\n\t\t  // 判断是否是图片\r\n\t\t  var f = fileName;\r\n\t\t  if (f == null || f == undefined || f == \"\") {\r\n\t\t    return false;\r\n\t\t  }\r\n\t\t  if (!/\\.(?:png|jpg|bmp|gif|PNG|JPG|BMP|GIF|jpeg)$/.test(f)) {\r\n\t\t    this.$message.error(\"类型必须是图片(.png|jpg|bmp|gif|PNG|JPG|BMP|GIF)\");\r\n\t\t    return false;\r\n\t\t  }\r\n\t\t  return true;\r\n\t\t},\r\n\t\tisLit2M(size) {\r\n\t\t  if (size / 1024 / 1024 < 2) {\r\n\t\t    return true;\r\n\t\t  } else {\r\n\t\t    this.$message({\r\n\t\t      message: \"图片大小不能超过 2MB!\"\r\n\t\t    });\r\n\t\t    return false;\r\n\t\t  }\r\n\t\t},\r\n\t}\n}\n",{"version":3,"sources":["home_popup_windows_addWindows.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"home_popup_windows_addWindows.vue","sourceRoot":"src/main/basic/add","sourcesContent":["<template>\n\t<div>\n\t\t<div class=\"crumbs\">\r\n\t\t\t<el-breadcrumb separator=\"/\">\r\n\t\t\t\t<el-breadcrumb-item>\r\n\t\t\t\t\t<i class=\"el-icon-lx-cascades\"></i>\r\n\t\t\t\t\t首页弹窗\r\n\t\t\t\t</el-breadcrumb-item>\r\n\t\t\t\t<el-breadcrumb-item>\r\n\t\t\t\t\t新建弹窗\r\n\t\t\t\t</el-breadcrumb-item>\r\n\t\t\t</el-breadcrumb>\r\n\t\t</div>\r\n\t\t<div class=\"container\">\r\n\t\t\t<div class=\"form-box\">\r\n\t\t\t\t<el-form :model=\"windowsForm\" :label-width=\"formLabelWidth\" :rules=\"rules\" class=\"form--wrap\" ref=\"windowsForm\">\r\n\t\t\t\t\t<el-form-item label=\"标题\" prop=\"title\">\r\n\t\t\t\t\t\t<el-input v-model=\"windowsForm.title\"></el-input>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item label=\"状态\" prop=\"status\">\r\n\t\t\t\t\t\t<el-switch\r\n\t\t\t\t\t\t  v-model=\"windowsForm.status\"\r\n\t\t\t\t\t\t  active-color=\"#13ce66\"\r\n\t\t\t\t\t\t  inactive-color=\"#dddddd\"\r\n\t\t\t\t\t\t  :active-value=\"true\"\r\n\t\t\t\t\t\t  :inactive-value=\"false\">\r\n\t\t\t\t\t\t</el-switch>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item label=\"针对用户\" prop=\"useType\">\r\n\t\t\t\t\t\t<el-select v-model=\"windowsForm.useType\">\r\n\t\t\t\t\t\t\t<el-option label=\"普通用户\" :value=\"0\"></el-option>\r\n\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item label=\"图片\" prop=\"imgurl\">\r\n\t\t\t\t\t\t<div class=\"upload-box\">\r\n\t\t\t\t\t\t\t<el-upload\r\n\t\t\t\t\t\t\t\t:action=\"uploadAction\" \r\n\t\t\t\t\t\t\t\tref=\"upload\" \r\n\t\t\t\t\t\t\t\tlist-type=\"picture-card\" \r\n\t\t\t\t\t\t\t\t:headers=\"tokenObj\" \r\n\t\t\t\t\t\t\t\t:data=\"uploadImgData\" \r\n\t\t\t\t\t\t\t\t:show-file-list=\"false\" \r\n\t\t\t\t\t\t\t\t:before-upload=\"onBeforeUploadImage\" \r\n\t\t\t\t\t\t\t\t:on-success=\"(res, file) => {return fileChange(res, file)}\">\r\n\t\t\t\t\t\t\t\t<img v-if=\"windowsForm.imgurl\" :src=\"windowsForm.imgurl\">\r\n\t\t\t\t\t\t\t\t<i v-else slot=\"default\" class=\"el-icon-plus\"></i>\r\n\t\t\t\t\t\t\t</el-upload>\r\n\t\t\t\t\t\t\t<el-button class=\"upload-box-btn\" @click=\"handleRemove\">清空</el-button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item label=\"是否有按钮\" prop=\"isUseButton\">\r\n\t\t\t\t\t\t<el-switch\r\n\t\t\t\t\t\t  v-model=\"windowsForm.isUseButton\"\r\n\t\t\t\t\t\t  active-color=\"#13ce66\"\r\n\t\t\t\t\t\t  inactive-color=\"#dddddd\"\r\n\t\t\t\t\t\t  :active-value=\"true\"\r\n\t\t\t\t\t\t  :inactive-value=\"false\">\r\n\t\t\t\t\t\t</el-switch>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item label=\"按钮名称\" prop=\"buttonName\">\r\n\t\t\t\t\t\t<el-input v-model=\"windowsForm.buttonName\"></el-input>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item label=\"按钮链接\" prop=\"buttonUrl\">\r\n\t\t\t\t\t\t<el-input v-model=\"windowsForm.buttonUrl\"></el-input>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item>\r\n\t\t\t\t\t\t<el-radio v-model=\"windowsForm.linkType\" :label=\"1\">跳转链接</el-radio>\r\n\t\t\t\t\t\t<el-radio v-model=\"windowsForm.linkType\" :label=\"2\">标签栏切换链接</el-radio>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item label=\"文案\" prop=\"paper\">\r\n\t\t\t\t\t\t<tinymce ref=\"content\" :height=\"300\" :childHasChange=\"hasC\" v-model=\"windowsForm.paper\" />\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item>\r\n\t\t\t\t\t\t<el-button @click=\"reset\">取 消</el-button>\r\n\t\t\t\t\t\t<el-button type=\"primary\" @click=\"submitForm('windowsForm')\">确 定</el-button>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t</el-form>\r\n\t\t\t</div>\r\n\t\t</div>\n\t</div>\t\n</template>\n\n<script>\nexport default {\n\tname:'home_popup_windows_addWindows',\n\tdata(){\n\t\treturn{\r\n\t\t\thasC: false,\r\n\t\t\tformLabelWidth:'150px',\n\t\t\twindowsForm:{\r\n\t\t\t\ttitle:'',\r\n\t\t\t\tstatus:true,\r\n\t\t\t\tuseType:0,\r\n\t\t\t\timgurl:'',\r\n\t\t\t\tpaper:'',\r\n\t\t\t\tisUseButton:true,\r\n\t\t\t\tbuttonName:'我知道了',\r\n\t\t\t\tbuttonUrl:'',\r\n\t\t\t\tlinkType:1\r\n\t\t\t},\r\n\t\t\tuploadAction: this.BASE_URL + 'admin/upload/uploadImgByType',\r\n\t\t\ttokenObj: { token: localStorage.getItem(\"token\") },\r\n\t\t\tuploadImgData: { type: \"4\" },\r\n\t\t\trules:{\r\n\t\t\t\ttitle:[{ required:true,message:'请输入标题',trigger:'blur' }],\r\n\t\t\t\tstatus:[{ required:true,message:'请选择状态',trigger:'change' }],\r\n\t\t\t\tsortNum:[{ required:true,message:'请输入排序',trigger:'blur' }],\r\n\t\t\t\tuseType:[{ required:true,message:'请选择针对用户',trigger:'change' }],\r\n\t\t\t\tpaper:[{ required:true,message:'请输入文案',trigger:'blur' }],\r\n\t\t\t\tisUseButton:[{ required:true,message:'请选择是否有按钮',trigger:'blur' }],\r\n\t\t\t}\n\t\t}\n\t},\n\tmethods:{\r\n\t\thandleRemove(){\r\n\t\t\tthis.windowsForm.imgurl = '';\r\n\t\t},\r\n\t\tonBeforeUploadImage(file) {\r\n\t\t  const isImg = this.isImage(file.name);\r\n\t\t  const isLit2M = this.isLit2M(file.size);\r\n\t\t  return isImg && isLit2M;\r\n\t\t},\r\n\t\tfileChange(res) {\r\n\t\t  this.windowsForm.imgurl = res.data;\r\n\t\t},\r\n\t\treset(){\r\n\t\t\tthis.$confirm('确定重置吗', '提示', {\r\n\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\ttype: 'warning'\r\n\t\t\t}).then(()=>{\r\n\t\t\t\tthis.$refs.windowsForm.resetFields();\r\n\t\t\t\tthis.$refs.content.setContent('');\r\n\t\t\t}).catch(()=>{})\r\n\t\t},\r\n\t\tsubmitForm(formName){\r\n\t\t\tthis.$refs[formName].validate(valid=>{\r\n\t\t\t\tif(valid){\r\n\t\t\t\t\tthis.$confirm('确定提交吗', '提示', {\r\n\t\t\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t\t}).then(()=>{\r\n\t\t\t\t\t\tthis.saveWindows();\r\n\t\t\t\t\t}).catch(()=>{})\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tasync saveWindows(){\r\n\t\t\tlet { data:{ code,message } } = await this.$axios.post(this.BASE_URL+'admin/system/popout/addPopout',this.windowsForm);\r\n\t\t\tif(code == '200'){\r\n\t\t\t\tthis.$message.success(message);\r\n\t\t\t\tthis.$refs.windowsForm.resetFields();\r\n\t\t\t\tthis.$refs.content.setContent('');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.$message.error(message);\r\n\t\t},\r\n\t\tisImage(fileName) {\r\n\t\t  // 判断是否是图片\r\n\t\t  var f = fileName;\r\n\t\t  if (f == null || f == undefined || f == \"\") {\r\n\t\t    return false;\r\n\t\t  }\r\n\t\t  if (!/\\.(?:png|jpg|bmp|gif|PNG|JPG|BMP|GIF|jpeg)$/.test(f)) {\r\n\t\t    this.$message.error(\"类型必须是图片(.png|jpg|bmp|gif|PNG|JPG|BMP|GIF)\");\r\n\t\t    return false;\r\n\t\t  }\r\n\t\t  return true;\r\n\t\t},\r\n\t\tisLit2M(size) {\r\n\t\t  if (size / 1024 / 1024 < 2) {\r\n\t\t    return true;\r\n\t\t  } else {\r\n\t\t    this.$message({\r\n\t\t      message: \"图片大小不能超过 2MB!\"\r\n\t\t    });\r\n\t\t    return false;\r\n\t\t  }\r\n\t\t},\r\n\t}\n}\n</script>\n"]}]}