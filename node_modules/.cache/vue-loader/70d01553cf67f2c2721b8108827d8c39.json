{"remainingRequest":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\src\\main\\basic\\common_question.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\src\\main\\basic\\common_question.vue","mtime":1597905073287},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default {\r\n\tname: 'elite_club',\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\thasC: false,\r\n\t\t\tpage: 1,\r\n\t\t\tsize: 10,\r\n\t\t\tadvertStatus: '',\r\n\t\t\tcur_total: 0,\r\n\t\t\tcurrentPage: 1,\r\n\t\t\ttableLoading: false,\r\n\t\t\tdialogFormVisible: false,\r\n\t\t\tdataList: [],\r\n\t\t\tformLabelWidth: '150px',\r\n\t\t\tclassifyList: [],\r\n\t\t\tdataForm: {\r\n\t\t\t\tid: '',\r\n\t\t\t\tclassifyId: '',\r\n\t\t\t\ttitle: '',\r\n\t\t\t\tquestion: ''\r\n\t\t\t},\r\n\t\t\trules: {\r\n\t\t\t\ttitle: [{ required: true, message: '问题标题不能为空', trigger: 'blur' }],\r\n\t\t\t\tquestion: [{ required: true, message: '答案不能为空', trigger: 'blur' }],\r\n\t\t\t\tclassifyId: [{ required: true, message: '问题类别不能为空', trigger: 'change' }]\r\n\t\t\t}\r\n\t\t};\r\n\t},\r\n\tcreated() {\r\n\t\tthis.getClassifyList();\r\n\t\tthis.getData();\r\n\t},\r\n\tmethods: {\r\n\t\thandleCurrentChange(val) {\r\n\t\t\tthis.page = val;\r\n\t\t\tthis.currentPage = val;\r\n\t\t\tthis.getData();\r\n\t\t},\r\n\r\n\t\thandleSizeChange(val) {\r\n\t\t\tthis.page = 1;\r\n\t\t\tthis.currentPage = 1;\r\n\t\t\tthis.size = val;\r\n\t\t\tthis.getData();\r\n\t\t},\r\n\t\tformatClassifyId(row, column, cellValue, index) {\r\n\t\t\tlet result = this.classifyList.find(item => item.id === cellValue);\r\n\t\t\treturn result.name;\r\n\t\t},\r\n\t\thandleAdd() {\r\n\t\t\tthis.dialogFormVisible = true;\r\n\t\t\tthis.$nextTick(()=>{\r\n\t\t\t\tthis.$refs.dataForm.resetFields();\r\n\t\t\t\tthis.$refs.content.setContent('');\r\n\t\t\t})\r\n\t\t},\r\n\t\tedit(data) {\r\n\t\t\tthis.dialogFormVisible = true;\r\n\t\t\tthis.dataForm = Object.assign(this.dataForm, data);\r\n\t\t\tthis.$nextTick(()=>{\r\n\t\t\t\tthis.$refs.content.setContent(data.question);\r\n\t\t\t})\r\n\t\t},\r\n\t\thandleDelete(id) {\r\n\t\t\tthis.$confirm('此操作将删除该条记录, 是否继续?', '提示', {\r\n\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\ttype: 'warning'\r\n\t\t\t}).then(async () => {\r\n\t\t\t\tlet {\r\n\t\t\t\t\tdata: { code, message }\r\n\t\t\t\t} = await this.$axios.post(this.BASE_URL + `admin/commonQuestion/deleteCommonQuestion?id=${id}`);\r\n\t\t\t\tif (code === '200') {\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\tmessage: '删除成功',\r\n\t\t\t\t\t\ttype: 'success'\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.getData();\r\n\t\t\t\t}\r\n\t\t\t}).catch(e => { });\r\n\t\t},\r\n\t\tsave() {\r\n\t\t\tlet postData = this.dataForm;\r\n\t\t\tthis.$axios.post(this.BASE_URL + 'admin/commonQuestion/saveCommonQuestion', postData).then(res => {\r\n\t\t\t\tif (res.data.code === '200') {\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\tmessage: '保存成功',\r\n\t\t\t\t\t\ttype: 'success'\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.getData();\r\n\t\t\t\t\tthis.$refs['dataForm'].resetFields();\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.dialogFormVisible = false;\r\n\t\t\t\t\t}, 1000);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\tmessage: '保存失败',\r\n\t\t\t\t\t\ttype: 'error'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tsubmitForm(formName) {\r\n\t\t\tthis.$refs[formName].validate(valid => {\r\n\t\t\t\tif (valid) {\r\n\t\t\t\t\tthis.save();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tasync getClassifyList() {\r\n\t\t\tlet postData = {\r\n\t\t\t\tpage: 1,\r\n\t\t\t\tsize: 999\r\n\t\t\t};\r\n\t\t\tlet {\r\n\t\t\t\tdata: { data }\r\n\t\t\t} = await this.$axios.post(this.BASE_URL + 'admin/commonQuestion/listPageCommonQuestionClassify', postData);\r\n\t\t\tthis.classifyList = data.list;\r\n\t\t},\r\n\r\n\t\tasync getData() {\r\n\t\t\tlet { page, size } = this;\r\n\t\t\tlet postData = {\r\n\t\t\t\tpage,\r\n\t\t\t\tsize\r\n\t\t\t};\r\n\t\t\tthis.tableLoading = true;\r\n\t\t\tlet {\r\n\t\t\t\tdata: { data }\r\n\t\t\t} = await this.$axios.post(this.BASE_URL + 'admin/commonQuestion/listPageCommonQuestion', postData);\r\n\t\t\tthis.dataList = data.list;\r\n\t\t\tthis.tableLoading = false;\r\n\t\t\tthis.cur_total = data.total;\r\n\t\t}\r\n\t}\r\n};\r\n",{"version":3,"sources":["common_question.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"common_question.vue","sourceRoot":"src/main/basic","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<div class=\"crumbs\">\r\n\t\t\t<el-breadcrumb separator=\"/\">\r\n\t\t\t\t<el-breadcrumb-item>\r\n\t\t\t\t\t<i class=\"el-icon-lx-cascades\"></i>\r\n\t\t\t\t\t常见问题管理\r\n\t\t\t\t</el-breadcrumb-item>\r\n\t\t\t</el-breadcrumb>\r\n\t\t</div>\r\n\t\t<div class=\"container\">\r\n\t\t\t<div class=\"handle-box\"><el-button type=\"primary\" icon=\"add\" @click=\"handleAdd\">新增</el-button></div>\r\n\t\t\t<el-table v-loading=\"tableLoading\" :data=\"dataList\" border class=\"table\">\r\n\t\t\t\t<el-table-column prop=\"id\" label=\"编号\" align=\"center\" width=\"100\" sortable></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"classifyId\" label=\"问题类别\" :formatter=\"formatClassifyId\" align=\"center\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"title\" align=\"center\" label=\"标题\"></el-table-column>\r\n\t\t\t\t<el-table-column label=\"操作\" align=\"center\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<el-button type=\"primary\" @click=\"edit(scope.row)\">编辑</el-button>\r\n\t\t\t\t\t\t<el-button type=\"primary\" @click=\"handleDelete(scope.row.id)\">删除</el-button>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t</el-table>\r\n\t\t\t<div class=\"pagination\">\r\n\t\t\t\t<el-pagination\r\n\t\t\t\t\tbackground\r\n\t\t\t\t\t@current-change=\"handleCurrentChange\"\r\n\t\t\t\t\t@size-change=\"handleSizeChange\"\r\n\t\t\t\t\tlayout=\"total, sizes, prev, pager, next, jumper\"\r\n\t\t\t\t\t:page-sizes=\"[10, 20, 50, 100]\"\r\n\t\t\t\t\t:current-page.sync=\"currentPage\"\r\n\t\t\t\t\t:total=\"cur_total\">\r\n\t\t\t\t</el-pagination>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<!-- 编辑弹出框 -->\r\n\t\t<el-dialog title=\"新增/编辑\" width=\"70%\" :visible.sync=\"dialogFormVisible\">\r\n\t\t\t<el-form :model=\"dataForm\" :label-width=\"formLabelWidth\" :rules=\"rules\" class=\"form--wrap\" ref=\"dataForm\">\r\n\t\t\t\t<el-form-item label=\"分类ID\" prop=\"classifyId\" :label-width=\"formLabelWidth\">\r\n\t\t\t\t\t<el-select v-model=\"dataForm.classifyId\" placeholder=\"分类ID\" class=\"handle-select mr10\">\r\n\t\t\t\t\t\t<el-option v-for=\"op in classifyList\" :key=\"op.id\" :label=\"op.name\" :value=\"op.id\"></el-option>\r\n\t\t\t\t\t</el-select>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"标题\" prop=\"title\">\r\n\t\t\t\t\t<el-input v-model=\"dataForm.title\" autocomplete=\"off\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"答案\" prop=\"question\">\r\n\t\t\t\t\t<tinymce ref=\"content\" :height=\"300\" :childHasChange=\"hasC\" v-model=\"dataForm.question\" />\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</el-form>\r\n\t\t\t<div slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t<el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"submitForm('dataForm')\">确 定</el-button>\r\n\t\t\t</div>\r\n\t\t</el-dialog>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tname: 'elite_club',\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\thasC: false,\r\n\t\t\tpage: 1,\r\n\t\t\tsize: 10,\r\n\t\t\tadvertStatus: '',\r\n\t\t\tcur_total: 0,\r\n\t\t\tcurrentPage: 1,\r\n\t\t\ttableLoading: false,\r\n\t\t\tdialogFormVisible: false,\r\n\t\t\tdataList: [],\r\n\t\t\tformLabelWidth: '150px',\r\n\t\t\tclassifyList: [],\r\n\t\t\tdataForm: {\r\n\t\t\t\tid: '',\r\n\t\t\t\tclassifyId: '',\r\n\t\t\t\ttitle: '',\r\n\t\t\t\tquestion: ''\r\n\t\t\t},\r\n\t\t\trules: {\r\n\t\t\t\ttitle: [{ required: true, message: '问题标题不能为空', trigger: 'blur' }],\r\n\t\t\t\tquestion: [{ required: true, message: '答案不能为空', trigger: 'blur' }],\r\n\t\t\t\tclassifyId: [{ required: true, message: '问题类别不能为空', trigger: 'change' }]\r\n\t\t\t}\r\n\t\t};\r\n\t},\r\n\tcreated() {\r\n\t\tthis.getClassifyList();\r\n\t\tthis.getData();\r\n\t},\r\n\tmethods: {\r\n\t\thandleCurrentChange(val) {\r\n\t\t\tthis.page = val;\r\n\t\t\tthis.currentPage = val;\r\n\t\t\tthis.getData();\r\n\t\t},\r\n\r\n\t\thandleSizeChange(val) {\r\n\t\t\tthis.page = 1;\r\n\t\t\tthis.currentPage = 1;\r\n\t\t\tthis.size = val;\r\n\t\t\tthis.getData();\r\n\t\t},\r\n\t\tformatClassifyId(row, column, cellValue, index) {\r\n\t\t\tlet result = this.classifyList.find(item => item.id === cellValue);\r\n\t\t\treturn result.name;\r\n\t\t},\r\n\t\thandleAdd() {\r\n\t\t\tthis.dialogFormVisible = true;\r\n\t\t\tthis.$nextTick(()=>{\r\n\t\t\t\tthis.$refs.dataForm.resetFields();\r\n\t\t\t\tthis.$refs.content.setContent('');\r\n\t\t\t})\r\n\t\t},\r\n\t\tedit(data) {\r\n\t\t\tthis.dialogFormVisible = true;\r\n\t\t\tthis.dataForm = Object.assign(this.dataForm, data);\r\n\t\t\tthis.$nextTick(()=>{\r\n\t\t\t\tthis.$refs.content.setContent(data.question);\r\n\t\t\t})\r\n\t\t},\r\n\t\thandleDelete(id) {\r\n\t\t\tthis.$confirm('此操作将删除该条记录, 是否继续?', '提示', {\r\n\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\ttype: 'warning'\r\n\t\t\t}).then(async () => {\r\n\t\t\t\tlet {\r\n\t\t\t\t\tdata: { code, message }\r\n\t\t\t\t} = await this.$axios.post(this.BASE_URL + `admin/commonQuestion/deleteCommonQuestion?id=${id}`);\r\n\t\t\t\tif (code === '200') {\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\tmessage: '删除成功',\r\n\t\t\t\t\t\ttype: 'success'\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.getData();\r\n\t\t\t\t}\r\n\t\t\t}).catch(e => { });\r\n\t\t},\r\n\t\tsave() {\r\n\t\t\tlet postData = this.dataForm;\r\n\t\t\tthis.$axios.post(this.BASE_URL + 'admin/commonQuestion/saveCommonQuestion', postData).then(res => {\r\n\t\t\t\tif (res.data.code === '200') {\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\tmessage: '保存成功',\r\n\t\t\t\t\t\ttype: 'success'\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.getData();\r\n\t\t\t\t\tthis.$refs['dataForm'].resetFields();\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.dialogFormVisible = false;\r\n\t\t\t\t\t}, 1000);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\tmessage: '保存失败',\r\n\t\t\t\t\t\ttype: 'error'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tsubmitForm(formName) {\r\n\t\t\tthis.$refs[formName].validate(valid => {\r\n\t\t\t\tif (valid) {\r\n\t\t\t\t\tthis.save();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tasync getClassifyList() {\r\n\t\t\tlet postData = {\r\n\t\t\t\tpage: 1,\r\n\t\t\t\tsize: 999\r\n\t\t\t};\r\n\t\t\tlet {\r\n\t\t\t\tdata: { data }\r\n\t\t\t} = await this.$axios.post(this.BASE_URL + 'admin/commonQuestion/listPageCommonQuestionClassify', postData);\r\n\t\t\tthis.classifyList = data.list;\r\n\t\t},\r\n\r\n\t\tasync getData() {\r\n\t\t\tlet { page, size } = this;\r\n\t\t\tlet postData = {\r\n\t\t\t\tpage,\r\n\t\t\t\tsize\r\n\t\t\t};\r\n\t\t\tthis.tableLoading = true;\r\n\t\t\tlet {\r\n\t\t\t\tdata: { data }\r\n\t\t\t} = await this.$axios.post(this.BASE_URL + 'admin/commonQuestion/listPageCommonQuestion', postData);\r\n\t\t\tthis.dataList = data.list;\r\n\t\t\tthis.tableLoading = false;\r\n\t\t\tthis.cur_total = data.total;\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n<style scoped>\r\n.handle-box {\r\n\tpadding-bottom: 15px;\r\n}\r\n.handle-input {\r\n\twidth: 200px;\r\n\tdisplay: inline-block;\r\n}\r\n.mr10 {\r\n\tmargin-right: 10px;\r\n}\r\n.el-input {\r\n\twidth: 70%;\r\n}\r\n.form--wrap .line {\r\n\ttext-align: center;\r\n}\r\n.avatar {\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tdisplay: block;\r\n}\r\n</style>\n"]}]}