{"remainingRequest":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\src\\main\\advertising\\back_page_manage.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\src\\main\\advertising\\back_page_manage.vue","mtime":1596275511869},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default {\r\n\tname: 'backPageManager',\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tisEdit: false,\r\n\t\t\tpage: 1,\r\n\t\t\tclassifyList: [],\r\n\t\t\tclassifyIds: [],\r\n\t\t\toriginClassifyList: [],\r\n\t\t\tbackFormOrigin: {},\r\n\t\t\tclassifyIdsOrigin: [],\r\n\t\t\tbackForm: {\r\n\t\t\t\tarticleScale: null,\r\n\t\t\t\tadvertScale: null,\r\n\t\t\t\tshowCount: null,\r\n\t\t\t\turl: null,\r\n\t\t\t\ttwoUrl: null,\r\n\t\t\t\tthreeUrl: null,\r\n\t\t\t\toneAdvertName: null,\r\n\t\t\t\ttwoAdvertName: null,\r\n\t\t\t\tthreeAdvertName: null\r\n\t\t\t}\r\n\t\t};\r\n\t},\r\n\tcreated() {\r\n\t\tthis.getClassifyList();\r\n\t\tthis.getsettingData();\r\n\t},\r\n\tmethods: {\r\n\t\tasync getClassifyList() {\r\n\t\t\tlet postData = {\r\n\t\t\t\tparams: {\r\n\t\t\t\t\tpage: 1,\r\n\t\t\t\t\tsize: 100,\r\n\t\t\t\t\tdeleteFlag: '0',\r\n\t\t\t\t\tname: ''\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tlet {\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tdata: { list }\r\n\t\t\t\t}\r\n\t\t\t} = await this.$axios.get(this.BASE_URL + 'admin/article/classify/list', postData);\r\n\t\t\tthis.classifyList = list;\r\n\t\t\tthis.classifyIds = this.pushSelectedClassfiyFromClassifyList();\r\n\t\t\tthis.classifyIdsOrigin = [...this.classifyIds];\r\n\t\t},\r\n\t\tasync getsettingData() {\r\n\t\t\tlet {\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tdata: { showCount, advertScale, articleScale, url, twoUrl, threeUrl,oneAdvertName,twoAdvertName,threeAdvertName }\r\n\t\t\t\t}\r\n\t\t\t} = await this.$axios.post(this.BASE_URL + 'admin/article/back/page/config/getBackPageConfig');\r\n\t\t\tthis.backForm = {\r\n\t\t\t\tshowCount,\r\n\t\t\t\tadvertScale,\r\n\t\t\t\tarticleScale,\r\n\t\t\t\turl,\r\n\t\t\t\ttwoUrl,\r\n\t\t\t\tthreeUrl,\r\n\t\t\t\toneAdvertName,\r\n\t\t\t\ttwoAdvertName,\r\n\t\t\t\tthreeAdvertName\r\n\t\t\t};\r\n\t\t\tthis.backFormOrigin = Object.assign({}, this.backForm);\r\n\t\t},\r\n\t\tpushorignClassifyList() {\r\n\t\t\tlet result = [];\r\n\t\t\tthis.classifyList.map(item => {\r\n\t\t\t\tresult.push(item.id);\r\n\t\t\t});\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\tpushSelectedClassfiyFromClassifyList() {\r\n\t\t\tlet result = [];\r\n\t\t\tthis.classifyList.map(item => {\r\n\t\t\t\tif (item.backPageCheckFlag === 1) {\r\n\t\t\t\t\tresult.push(item.id);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\tasync saveBackUpateConfig() {\r\n\t\t\tthis.originClassifyList = this.pushorignClassifyList();\r\n\t\t\tlet result = this.generateClassifyList(this.originClassifyList, this.classifyIds);\r\n\t\t\tthis.backForm.classifys = result;\r\n\t\t\tawait this.$axios.post(this.BASE_URL + 'admin/article/back/page/config/updateBackPageConfig', this.backForm);\r\n\t\t\tthis.$message({\r\n\t\t\t\tmessage: '修改成功',\r\n\t\t\t\ttype: 'success'\r\n\t\t\t});\r\n\t\t\tthis.getClassifyList();\r\n\t\t\tthis.getsettingData();\r\n\t\t\tthis.isEdit = false;\r\n\t\t},\r\n\r\n\t\t// 根据选中的classifyId生成后台需要的格式\r\n\t\tgenerateClassifyList(arrParent, arrChild) {\r\n\t\t\tlet result = [];\r\n\t\t\tfor (let i = 0; i < arrParent.length; i++) {\r\n\t\t\t\tresult.push({ id: arrParent[i], backPageCheckFlag: 0 });\r\n\t\t\t\tfor (let j = 0; j < arrChild.length; j++) {\r\n\t\t\t\t\tif (arrChild[j] === arrParent[i]) {\r\n\t\t\t\t\t\tresult[i].backPageCheckFlag = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\treset() {\r\n\t\t\tthis.classifyIds = this.classifyIdsOrigin;\r\n\t\t\tthis.backForm = Object.assign({}, this.backFormOrigin);\r\n\t\t\tthis.isEdit = false;\r\n\t\t},\r\n\t\tconfirm() {\r\n\t\t\tthis.saveBackUpateConfig();\r\n\t\t},\r\n\t\tedit() {\r\n\t\t\tthis.isEdit = true;\r\n\t\t}\r\n\t}\r\n};\r\n",{"version":3,"sources":["back_page_manage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"back_page_manage.vue","sourceRoot":"src/main/advertising","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<el-form ref=\"backForm\" :model=\"backForm\" label-width=\"200px\">\r\n\t\t\t<el-form-item label=\"栏目分类\">\r\n\t\t\t\t<el-checkbox-group v-model=\"classifyIds\">\r\n\t\t\t\t\t<el-checkbox v-for=\"item in classifyList\" :disabled=\"!isEdit\" name=\"wexinClassify\" :label=\"item.id\" :key=\"item.id\">{{ item.name }}</el-checkbox>\r\n\t\t\t\t</el-checkbox-group>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"文章\">\r\n\t\t\t\t<template v-if=\"isEdit\">\r\n\t\t\t\t\t<el-input type=\"number\" class=\"input--width200\" v-model=\"backForm.articleScale\"></el-input>\r\n\t\t\t\t</template>\r\n\t\t\t\t<template v-else>\r\n\t\t\t\t\t<span>{{ backForm.articleScale }}</span>\r\n\t\t\t\t</template>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"广告\">\r\n\t\t\t\t<template v-if=\"isEdit\">\r\n\t\t\t\t\t<el-input type=\"number\" class=\"input--width200\" v-model=\"backForm.advertScale\"></el-input>\r\n\t\t\t\t</template>\r\n\t\t\t\t<template v-else>\r\n\t\t\t\t\t<span>{{ backForm.advertScale }}</span>\r\n\t\t\t\t</template>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"显示条数\">\r\n\t\t\t\t<template v-if=\"isEdit\">\r\n\t\t\t\t\t<el-input type=\"number\" class=\"input--width200\" v-model=\"backForm.showCount\"></el-input>\r\n\t\t\t\t</template>\r\n\t\t\t\t<template v-else>\r\n\t\t\t\t\t<span>{{ backForm.showCount }}</span>\r\n\t\t\t\t</template>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"一反广告名称\">\r\n\t\t\t\t<template v-if=\"isEdit\">\r\n\t\t\t\t\t<el-input maxlength=\"50\" show-word-limit class=\"input--width200\" v-model=\"backForm.oneAdvertName\" style=\"width:400px;\"></el-input>\r\n\t\t\t\t</template>\r\n\t\t\t\t<template v-else>\r\n\t\t\t\t\t<span>{{ backForm.oneAdvertName }}</span>\r\n\t\t\t\t</template>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"一反后退页链接\">\r\n\t\t\t\t<template v-if=\"isEdit\">\r\n\t\t\t\t\t<el-input class=\"input--width200\" style=\"width:400px;\" v-model=\"backForm.url\"></el-input>\r\n\t\t\t\t</template>\r\n\t\t\t\t<template v-else>\r\n\t\t\t\t\t<span>{{ backForm.url }}</span>\r\n\t\t\t\t</template>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"二反广告名称\">\r\n\t\t\t\t<template v-if=\"isEdit\">\r\n\t\t\t\t\t<el-input maxlength=\"50\" show-word-limit class=\"input--width200\" v-model=\"backForm.twoAdvertName\" style=\"width:400px;\"></el-input>\r\n\t\t\t\t</template>\r\n\t\t\t\t<template v-else>\r\n\t\t\t\t\t<span>{{ backForm.twoAdvertName }}</span>\r\n\t\t\t\t</template>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"二反后退页链接\">\r\n\t\t\t\t<template v-if=\"isEdit\">\r\n\t\t\t\t\t<el-input class=\"input--width200\" style=\"width:400px;\" v-model=\"backForm.twoUrl\"></el-input>\r\n\t\t\t\t</template>\r\n\t\t\t\t<template v-else>\r\n\t\t\t\t\t<span>{{ backForm.twoUrl }}</span>\r\n\t\t\t\t</template>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"三反广告名称\">\r\n\t\t\t\t<template v-if=\"isEdit\">\r\n\t\t\t\t\t<el-input maxlength=\"50\" show-word-limit class=\"input--width200\" v-model=\"backForm.threeAdvertName\" style=\"width:400px;\"></el-input>\r\n\t\t\t\t</template>\r\n\t\t\t\t<template v-else>\r\n\t\t\t\t\t<span>{{ backForm.threeAdvertName }}</span>\r\n\t\t\t\t</template>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"三反后退页链接\">\r\n\t\t\t\t<template v-if=\"isEdit\">\r\n\t\t\t\t\t<el-input class=\"input--width200\" style=\"width:400px;\" v-model=\"backForm.threeUrl\"></el-input>\r\n\t\t\t\t</template>\r\n\t\t\t\t<template v-else>\r\n\t\t\t\t\t<span>{{ backForm.threeUrl }}</span>\r\n\t\t\t\t</template>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item style=\"display:block;\">\r\n\t\t\t\t<el-button v-if=\"!isEdit\" type=\"primary\" @click=\"edit\">修改</el-button>\r\n\t\t\t\t<template v-else>\r\n\t\t\t\t\t<el-button type=\"default\" @click=\"reset\">取消</el-button>\r\n\t\t\t\t\t<el-button type=\"primary\" @click=\"confirm\">确认</el-button>\r\n\t\t\t\t</template>\r\n\t\t\t</el-form-item>\r\n\t\t</el-form>\r\n\t</div>\r\n</template>\r\n<script>\r\nexport default {\r\n\tname: 'backPageManager',\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tisEdit: false,\r\n\t\t\tpage: 1,\r\n\t\t\tclassifyList: [],\r\n\t\t\tclassifyIds: [],\r\n\t\t\toriginClassifyList: [],\r\n\t\t\tbackFormOrigin: {},\r\n\t\t\tclassifyIdsOrigin: [],\r\n\t\t\tbackForm: {\r\n\t\t\t\tarticleScale: null,\r\n\t\t\t\tadvertScale: null,\r\n\t\t\t\tshowCount: null,\r\n\t\t\t\turl: null,\r\n\t\t\t\ttwoUrl: null,\r\n\t\t\t\tthreeUrl: null,\r\n\t\t\t\toneAdvertName: null,\r\n\t\t\t\ttwoAdvertName: null,\r\n\t\t\t\tthreeAdvertName: null\r\n\t\t\t}\r\n\t\t};\r\n\t},\r\n\tcreated() {\r\n\t\tthis.getClassifyList();\r\n\t\tthis.getsettingData();\r\n\t},\r\n\tmethods: {\r\n\t\tasync getClassifyList() {\r\n\t\t\tlet postData = {\r\n\t\t\t\tparams: {\r\n\t\t\t\t\tpage: 1,\r\n\t\t\t\t\tsize: 100,\r\n\t\t\t\t\tdeleteFlag: '0',\r\n\t\t\t\t\tname: ''\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tlet {\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tdata: { list }\r\n\t\t\t\t}\r\n\t\t\t} = await this.$axios.get(this.BASE_URL + 'admin/article/classify/list', postData);\r\n\t\t\tthis.classifyList = list;\r\n\t\t\tthis.classifyIds = this.pushSelectedClassfiyFromClassifyList();\r\n\t\t\tthis.classifyIdsOrigin = [...this.classifyIds];\r\n\t\t},\r\n\t\tasync getsettingData() {\r\n\t\t\tlet {\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tdata: { showCount, advertScale, articleScale, url, twoUrl, threeUrl,oneAdvertName,twoAdvertName,threeAdvertName }\r\n\t\t\t\t}\r\n\t\t\t} = await this.$axios.post(this.BASE_URL + 'admin/article/back/page/config/getBackPageConfig');\r\n\t\t\tthis.backForm = {\r\n\t\t\t\tshowCount,\r\n\t\t\t\tadvertScale,\r\n\t\t\t\tarticleScale,\r\n\t\t\t\turl,\r\n\t\t\t\ttwoUrl,\r\n\t\t\t\tthreeUrl,\r\n\t\t\t\toneAdvertName,\r\n\t\t\t\ttwoAdvertName,\r\n\t\t\t\tthreeAdvertName\r\n\t\t\t};\r\n\t\t\tthis.backFormOrigin = Object.assign({}, this.backForm);\r\n\t\t},\r\n\t\tpushorignClassifyList() {\r\n\t\t\tlet result = [];\r\n\t\t\tthis.classifyList.map(item => {\r\n\t\t\t\tresult.push(item.id);\r\n\t\t\t});\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\tpushSelectedClassfiyFromClassifyList() {\r\n\t\t\tlet result = [];\r\n\t\t\tthis.classifyList.map(item => {\r\n\t\t\t\tif (item.backPageCheckFlag === 1) {\r\n\t\t\t\t\tresult.push(item.id);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\tasync saveBackUpateConfig() {\r\n\t\t\tthis.originClassifyList = this.pushorignClassifyList();\r\n\t\t\tlet result = this.generateClassifyList(this.originClassifyList, this.classifyIds);\r\n\t\t\tthis.backForm.classifys = result;\r\n\t\t\tawait this.$axios.post(this.BASE_URL + 'admin/article/back/page/config/updateBackPageConfig', this.backForm);\r\n\t\t\tthis.$message({\r\n\t\t\t\tmessage: '修改成功',\r\n\t\t\t\ttype: 'success'\r\n\t\t\t});\r\n\t\t\tthis.getClassifyList();\r\n\t\t\tthis.getsettingData();\r\n\t\t\tthis.isEdit = false;\r\n\t\t},\r\n\r\n\t\t// 根据选中的classifyId生成后台需要的格式\r\n\t\tgenerateClassifyList(arrParent, arrChild) {\r\n\t\t\tlet result = [];\r\n\t\t\tfor (let i = 0; i < arrParent.length; i++) {\r\n\t\t\t\tresult.push({ id: arrParent[i], backPageCheckFlag: 0 });\r\n\t\t\t\tfor (let j = 0; j < arrChild.length; j++) {\r\n\t\t\t\t\tif (arrChild[j] === arrParent[i]) {\r\n\t\t\t\t\t\tresult[i].backPageCheckFlag = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\treset() {\r\n\t\t\tthis.classifyIds = this.classifyIdsOrigin;\r\n\t\t\tthis.backForm = Object.assign({}, this.backFormOrigin);\r\n\t\t\tthis.isEdit = false;\r\n\t\t},\r\n\t\tconfirm() {\r\n\t\t\tthis.saveBackUpateConfig();\r\n\t\t},\r\n\t\tedit() {\r\n\t\t\tthis.isEdit = true;\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n<style>\r\n.input--width200 {\r\n\twidth: 200px;\r\n}\r\n</style>\n"]}]}