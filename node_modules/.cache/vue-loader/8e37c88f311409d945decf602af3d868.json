{"remainingRequest":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\src\\main\\advertising\\add\\advertising_position_management_add.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\src\\main\\advertising\\add\\advertising_position_management_add.vue","mtime":1598090730473},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default {\r\n\tname: 'advertising_position_management_add',\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tuploadAction: this.BASE_URL + 'admin/upload/uploadImgByType',\r\n\t\t\ttokenObj: { token: localStorage.getItem('token') },\r\n\t\t\tuploadImgData: { type: '2' },\r\n\t\t\tadvertSortReadonly: true,\r\n\t\t\tadvertDto: {\r\n\t\t\t\tgroupId: -1,\r\n\t\t\t\tgroupName: '',\r\n\t\t\t\tmaxAdvertSort: -1,\r\n\t\t\t\tadvertId: '',\r\n\t\t\t\tskipUrl: '',\r\n\t\t\t\tadvertStatus: 2,\r\n\t\t\t\tpurchaseCount: null,\r\n\t\t\t\tprepareSkipUrl: null,\r\n\t\t\t\tadvertAmount: '',\r\n\t\t\t\treaderType: 0,\r\n\t\t\t\tadvertList: []\r\n\t\t\t},\r\n\t\t\trules: {\r\n\t\t\t\tgroupId: [{ required: true, message: '请输入广告主ID', trigger: 'blur' }],\r\n\t\t\t\tgroupName: [{ required: true, message: '请输入广告名称', trigger: 'blur' }],\r\n\t\t\t\tskipUrl: [{ required: true, message: '请输入跳转链接', trigger: 'blur' }],\r\n\t\t\t\tadvertStatus: [{ required: true, message: '请选择状态', trigger: 'change' }],\r\n\t\t\t\tpurchaseCount: [{ required: true, message: '请输入广告投放量', trigger: 'blur' }],\r\n\t\t\t\tadvertAmount: [{ required: true, message: '请输入广告金额', trigger: 'blur' }],\r\n\t\t\t\treaderType: [{ required: true, message: '请选择广告读者', trigger: 'change' }]\r\n\t\t\t},\r\n\t\t\tmakeData: [\r\n\t\t\t\t{\r\n\t\t\t\t\tformRef: 'form1',\r\n\t\t\t\t\tformModel: {},\r\n\t\t\t\t\tadvertSortInputDisable: false,\r\n\t\t\t\t\timgFileList: [],\r\n\t\t\t\t\tformShow: true,\r\n\t\t\t\t\tformName: '第1条广告'\r\n\t\t\t\t}\r\n\t\t\t], // 生成表单所使用的模板\r\n\t\t\tadvertStatusSelectOption: [\r\n\t\t\t\t{\r\n\t\t\t\t\tdictValue: 2,\r\n\t\t\t\t\tdictName: '上架'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tdictValue: 3,\r\n\t\t\t\t\tdictName: '下架'\r\n\t\t\t\t}\r\n\t\t\t], // 广告信息操作表单广告状态下拉框\r\n\t\t\tbottomAdvert: {\r\n\t\t\t\tadvertId: '',\r\n\t\t\t\tadvertSpaceStatus: null,\r\n\t\t\t\tadvertSpaceCode: 2,\r\n\t\t\t\tadvertTitle: '',\r\n\t\t\t\tadvertCoverPicture: '',\r\n\t\t\t\tadvertSort: -1,\r\n\t\t\t\tisBackPage: '0',\r\n\t\t\t\tisBanner: '0',\r\n\t\t\t\ttitleIsRed: '0',\r\n\t\t\t\ttitleIsStrong: '0'\r\n\t\t\t},\r\n\t\t\ttopAdvert: {\r\n\t\t\t\tadvertId: '',\r\n\t\t\t\tadvertSpaceStatus: null,\r\n\t\t\t\tadvertSpaceCode: 1,\r\n\t\t\t\tadvertTitle: '',\r\n\t\t\t\tadvertCoverPicture: '',\r\n\t\t\t\tadvertSort: -1,\r\n\t\t\t\tisBackPage: '0',\r\n\t\t\t\tisBanner: '0',\r\n\t\t\t\ttitleIsRed: '0',\r\n\t\t\t\ttitleIsStrong: '0'\r\n\t\t\t},\r\n\t\t\twordAdvert: {\r\n\t\t\t\tadvertId: '',\r\n\t\t\t\tadvertSpaceStatus: null,\r\n\t\t\t\tadvertSpaceCode: 3,\r\n\t\t\t\tadvertTitle: '',\r\n\t\t\t\tadvertCoverPicture: '',\r\n\t\t\t\tadvertSort: -1,\r\n\t\t\t\tisBackPage: '0',\r\n\t\t\t\tisBanner: '0',\r\n\t\t\t\ttitleIsRed: '0',\r\n\t\t\t\ttitleIsStrong: '0'\r\n\t\t\t},\r\n\t\t\tbottomFixedAdvert: {\r\n\t\t\t\tadvertId: '',\r\n\t\t\t\tadvertSpaceStatus: null,\r\n\t\t\t\tadvertSpaceCode: 5,\r\n\t\t\t\tadvertTitle: '',\r\n\t\t\t\tadvertCoverPicture: '',\r\n\t\t\t\tadvertSort: -1,\r\n\t\t\t\tisBackPage: '0',\r\n\t\t\t\tisBanner: '0',\r\n\t\t\t\ttitleIsRed: '0',\r\n\t\t\t\ttitleIsStrong: '0'\r\n\t\t\t},\r\n\t\t\tarticleInteriorAdvert: {\r\n\t\t\t\tadvertId: '',\r\n\t\t\t\tadvertSpaceStatus: null,\r\n\t\t\t\tadvertSpaceCode: 6,\r\n\t\t\t\tadvertTitle: '',\r\n\t\t\t\tadvertCoverPicture: '',\r\n\t\t\t\tadvertSort: -1,\r\n\t\t\t\tisBackPage: '0',\r\n\t\t\t\tisBanner: '0',\r\n\t\t\t\ttitleIsRed: '0',\r\n\t\t\t\ttitleIsStrong: '0'\r\n\t\t\t},\r\n\t\t\tadvertMaxDto:{\r\n\t\t\t\tmaxAdvertSort:0,\r\n\t\t\t\tmaxGroupId:0\r\n\t\t\t}\r\n\t\t};\r\n\t},\r\n\tmethods: {\r\n\t\t// 如果主广告下架，那么其他的三个部位的广告（如果有广告选择状态的话）要将它进行下架\r\n\t\tchangeAdvertStatus() {\r\n\t\t\tif (this.advertDto.advertStatus === 3) {\r\n\t\t\t\tthis.bottomAdvert.advertSort = -1;\r\n\t\t\t\tthis.advertSortReadonly = true;\r\n\t\t\t\tif (this.bottomAdvert.advertSpaceStatus) {\r\n\t\t\t\t\tthis.bottomAdvert.advertSpaceStatus = 3;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.topAdvert.advertSpaceStatus) {\r\n\t\t\t\t\tthis.topAdvert.advertSpaceStatus = 3;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.wordAdvert.advertSpaceStatus) {\r\n\t\t\t\t\tthis.wordAdvert.advertSpaceStatus = 3;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.bottomFixedAdvert.advertSpaceStatus) {\r\n\t\t\t\t\tthis.bottomFixedAdvert.advertSpaceStatus = 3;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.articleInteriorAdvert.advertSpaceStatus) {\r\n\t\t\t\t\tthis.articleInteriorAdvert.advertSpaceStatus = 3;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.advertDto.advertStatus === 2 && this.bottomAdvert.advertSpaceStatus === 2) {\r\n\t\t\t\tthis.bottomAdvert.advertSort = this.advertMaxDto.maxAdvertSort + 1;\r\n\t\t\t\tthis.advertSortReadonly = false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonBeforeUploadImage(file) {\r\n\t\t\tconst isImg = this.isImage(file.name);\r\n\t\t\tconst isLit2M = this.isLit2M(file.size);\r\n\t\t\treturn isImg && isLit2M;\r\n\t\t},\r\n\t\tfileChange(res, file, index) {\r\n\t\t\t// index: 指向所在那个广告表单\r\n\t\t\tif (index === 0) {\r\n\t\t\t\tthis.bottomAdvert.advertCoverPicture = res.data;\r\n\t\t\t}\r\n\t\t\tif (index === 1) {\r\n\t\t\t\tthis.topAdvert.advertCoverPicture = res.data;\r\n\t\t\t}\r\n\t\t\tif (index === 2) {\r\n\t\t\t\tthis.bottomFixedAdvert.advertCoverPicture = res.data;\r\n\t\t\t}\r\n\t\t\tif (index === 3) {\r\n\t\t\t\tthis.articleInteriorAdvert.advertCoverPicture = res.data;\r\n\t\t\t}\r\n\t\t},\r\n\t\thandleRemove(index) {\r\n\t\t\tif (index === 0) {\r\n\t\t\t\tthis.bottomAdvert.advertCoverPicture = '';\r\n\t\t\t}\r\n\t\t\tif (index === 1) {\r\n\t\t\t\tthis.topAdvert.advertCoverPicture = '';\r\n\t\t\t}\r\n\t\t\tif (index === 2) {\r\n\t\t\t\tthis.bottomFixedAdvert.advertCoverPicture = '';\r\n\t\t\t}\r\n\t\t\tif (index === 3) {\r\n\t\t\t\tthis.articleInteriorAdvert.advertCoverPicture = '';\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 如果用户填写了三个广告位则加入到advertList传给后台\r\n\t\tpushAdvertIntoAdvertList() {\r\n\t\t\tlet advertId = this.findChildAdvertId();\r\n\t\t\tlet result = [];\r\n\t\t\tif (this.bottomAdvert.advertSpaceStatus) {\r\n\t\t\t\tthis.bottomAdvert.advertId = advertId;\r\n\t\t\t\t// this.bottomAdvert.advertCoverPicture = this.joinArrayItem(this.fileList);\r\n\t\t\t\tresult.push(this.bottomAdvert);\r\n\t\t\t}\r\n\t\t\tif (this.topAdvert.advertSpaceStatus) {\r\n\t\t\t\tthis.topAdvert.advertId = advertId;\r\n\t\t\t\tresult.push(this.topAdvert);\r\n\t\t\t}\r\n\t\t\tif (this.wordAdvert.advertSpaceStatus) {\r\n\t\t\t\tthis.wordAdvert.advertId = advertId;\r\n\t\t\t\tresult.push(this.wordAdvert);\r\n\t\t\t}\r\n\t\t\tif (this.bottomFixedAdvert.advertSpaceStatus) {\r\n\t\t\t\tthis.bottomFixedAdvert.advertId = advertId;\r\n\t\t\t\tresult.push(this.bottomFixedAdvert);\r\n\t\t\t}\r\n\t\t\tif (this.articleInteriorAdvert.advertSpaceStatus) {\r\n\t\t\t\tthis.articleInteriorAdvert.advertId = advertId;\r\n\t\t\t\tresult.push(this.articleInteriorAdvert);\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\tfindChildAdvertId() {\r\n\t\t\tlet tempAdvertId;\r\n\t\t\tif (this.bottomAdvert.advertId) {\r\n\t\t\t\ttempAdvertId = this.bottomAdvert.advertId;\r\n\t\t\t}\r\n\t\t\tif (this.topAdvert.advertId) {\r\n\t\t\t\ttempAdvertId = this.topAdvert.advertId;\r\n\t\t\t}\r\n\t\t\tif (this.wordAdvert.advertId) {\r\n\t\t\t\ttempAdvertId = this.wordAdvert.advertId;\r\n\t\t\t}\r\n\t\t\tif (this.bottomFixedAdvert.advertId) {\r\n\t\t\t\ttempAdvertId = this.bottomFixedAdvert.advertId;\r\n\t\t\t}\r\n\t\t\tif (this.articleInteriorAdvert.advertId) {\r\n\t\t\t\ttempAdvertId = this.articleInteriorAdvert.advertId;\r\n\t\t\t}\r\n\t\t\treturn tempAdvertId;\r\n\t\t},\r\n\t\treset() {\r\n\t\t\tthis.$refs.advertDto.resetFields();\r\n\t\t\tthis.bottomAdvert = {\r\n\t\t\t\tadvertId: '',\r\n\t\t\t\tadvertSpaceStatus: null,\r\n\t\t\t\tadvertSpaceCode: 2,\r\n\t\t\t\tadvertTitle: '',\r\n\t\t\t\tadvertCoverPicture: '',\r\n\t\t\t\tadvertSort: -1,\r\n\t\t\t\tisBackPage: '0',\r\n\t\t\t\tisBanner: '0',\r\n\t\t\t\ttitleIsRed: '0',\r\n\t\t\t\ttitleIsStrong: '0'\r\n\t\t\t};\r\n\t\t\tthis.topAdvert = {\r\n\t\t\t\tadvertId: '',\r\n\t\t\t\tadvertSpaceStatus: null,\r\n\t\t\t\tadvertSpaceCode: 1,\r\n\t\t\t\tadvertTitle: '',\r\n\t\t\t\tadvertCoverPicture: '',\r\n\t\t\t\tadvertSort: -1,\r\n\t\t\t\tisBackPage: '0',\r\n\t\t\t\tisBanner: '0',\r\n\t\t\t\ttitleIsRed: '0',\r\n\t\t\t\ttitleIsStrong: '0'\r\n\t\t\t};\r\n\t\t\tthis.wordAdvert = {\r\n\t\t\t\tadvertId: '',\r\n\t\t\t\tadvertSpaceStatus: null,\r\n\t\t\t\tadvertSpaceCode: 3,\r\n\t\t\t\tadvertTitle: '',\r\n\t\t\t\tadvertCoverPicture: '',\r\n\t\t\t\tadvertSort: -1,\r\n\t\t\t\tisBackPage: '0',\r\n\t\t\t\tisBanner: '0',\r\n\t\t\t\ttitleIsRed: '0',\r\n\t\t\t\ttitleIsStrong: '0'\r\n\t\t\t};\r\n\t\t\tthis.bottomFixedAdvert = {\r\n\t\t\t\tadvertId: '',\r\n\t\t\t\tadvertSpaceStatus: null,\r\n\t\t\t\tadvertSpaceCode: 5,\r\n\t\t\t\tadvertTitle: '',\r\n\t\t\t\tadvertCoverPicture: '',\r\n\t\t\t\tadvertSort: -1,\r\n\t\t\t\tisBackPage: '0',\r\n\t\t\t\tisBanner: '0',\r\n\t\t\t\ttitleIsRed: '0',\r\n\t\t\t\ttitleIsStrong: '0'\r\n\t\t\t};\r\n\t\t\tthis.articleInteriorAdvert = {\r\n\t\t\t\tadvertId: '',\r\n\t\t\t\tadvertSpaceStatus: null,\r\n\t\t\t\tadvertSpaceCode: 6,\r\n\t\t\t\tadvertTitle: '',\r\n\t\t\t\tadvertCoverPicture: '',\r\n\t\t\t\tadvertSort: -1,\r\n\t\t\t\tisBackPage: '0',\r\n\t\t\t\tisBanner: '0',\r\n\t\t\t\ttitleIsRed: '0',\r\n\t\t\t\ttitleIsStrong: '0'\r\n\t\t\t};\r\n\t\t},\r\n\t\t// 新增保存\r\n\t\thandleSumbit() {\r\n\t\t\t// 保存\r\n\t\t\tthis.$refs['advertDto'].validate(valid => {\r\n\t\t\t\tif (valid) {\r\n\t\t\t\t\tthis.$confirm('确认以上信息无误？提交了不能更改', '提示', {\r\n\t\t\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\tif (this.checkAdvert()) {\r\n\t\t\t\t\t\t\t\tthis.advertDto.advertList = this.pushAdvertIntoAdvertList();\r\n\t\t\t\t\t\t\t\tthis.makeData.advertDto = this.advertDto;\r\n\t\t\t\t\t\t\t\tthis.saveAdvertInfo();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(error => {});\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tasync saveAdvertInfo() {\r\n\t\t\tthis.makeData[0].advertDto = this.advertDto;\r\n\t\t\tlet {\r\n\t\t\t\tdata: { code, data, message }\r\n\t\t\t} = await this.$axios.post(this.BASE_URL + 'admin/advert/space/saveAdvertInfo', this.makeData);\r\n\t\t\tif (code == '200') {\r\n\t\t\t\tthis.$message({\r\n\t\t\t\t\tmessage: '新增成功',\r\n\t\t\t\t\ttype: 'success'\r\n\t\t\t\t});\r\n\t\t\t\tthis.reset();\r\n\t\t\t\tthis.getData();\r\n\t\t\t} else {\r\n\t\t\t\tthis.$message({\r\n\t\t\t\t\tmessage: '新增失败',\r\n\t\t\t\t\ttype: 'success'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 校验各个部位广告的字段\r\n\t\tcheckAdvert() {\r\n\t\t\tlet result = [];\r\n\t\t\t// 1:未上架  2:上架  3:下架\r\n\t\t\t// 如果总状态为下架状态，三个广告位状态都为上架状态 则提示总状态改成上架状态\r\n\t\t\tif (this.advertDto.advertStatus !== 2) {\r\n\t\t\t\tif (\r\n\t\t\t\t\tthis.bottomAdvert.advertSpaceStatus === 2 ||\r\n\t\t\t\t\tthis.topAdvert.advertSpaceStatus === 2 ||\r\n\t\t\t\t\tthis.wordAdvert.advertSpaceStatus === 2 ||\r\n\t\t\t\t\tthis.bottomFixedAdvert.advertSpaceStatus === 2 ||\r\n\t\t\t\t\tthis.articleInteriorAdvert.advertSpaceStatus === 2\r\n\t\t\t\t) {\r\n\t\t\t\t\tresult.push('总广告位与子广告位状态不一样，请修改状态');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.advertDto.advertStatus === 2) {\r\n\t\t\t\tif (\r\n\t\t\t\t\tthis.bottomAdvert.advertSpaceStatus !== 2 &&\r\n\t\t\t\t\tthis.topAdvert.advertSpaceStatus !== 2 &&\r\n\t\t\t\t\tthis.wordAdvert.advertSpaceStatus !== 2 &&\r\n\t\t\t\t\tthis.bottomFixedAdvert.advertSpaceStatus !== 2 &&\r\n\t\t\t\t\tthis.articleInteriorAdvert.advertSpaceStatus !== 2\r\n\t\t\t\t) {\r\n\t\t\t\t\tresult.push('总广告位与子广告位状态不一样，请修改状态');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// 1:未上架  2:上架  3:下架\r\n\t\t\t// 底部广告\r\n\t\t\tif (this.bottomAdvert.advertSpaceStatus) {\r\n\t\t\t\t// this.bottomAdvert.advertCoverPicture = this.joinArrayItem(this.fileList);\r\n\t\t\t\tif (this.bottomAdvert.isBanner === '0') {\r\n\t\t\t\t\tif (this.bottomAdvert.advertTitle.trim() === '' || this.bottomAdvert.advertTitle === null) {\r\n\t\t\t\t\t\tresult.push('底部广告标题不能为空');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (this.bottomAdvert.advertCoverPicture.trim() === '' || this.bottomAdvert.advertCoverPicture === null) {\r\n\t\t\t\t\tresult.push('底部广告封面图不能为空');\r\n\t\t\t\t}\r\n\t\t\t\tif (this.bottomAdvert.advertSort.toString().trim() === '' || this.bottomAdvert.advertSort === null) {\r\n\t\t\t\t\tresult.push('底部排序不能为空');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//顶部广告\r\n\t\t\tif (this.topAdvert.advertSpaceStatus) {\r\n\t\t\t\tif (this.topAdvert.advertCoverPicture.trim() === '' || this.topAdvert.advertCoverPicture === null) {\r\n\t\t\t\t\tresult.push('顶部广告封面图不能为空');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// 文字广告\r\n\t\t\tif (this.wordAdvert.advertSpaceStatus) {\r\n\t\t\t\tif (this.wordAdvert.advertTitle.trim() === '' || this.wordAdvert.advertTitle === null) {\r\n\t\t\t\t\tresult.push('文字广告标题不能为空');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet message = result.toString();\r\n\t\t\tif (message) {\r\n\t\t\t\tthis.$message({\r\n\t\t\t\t\tmessage: message,\r\n\t\t\t\t\ttype: 'error'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn result.length <= 0;\r\n\t\t},\r\n\t\t// 以下是校验方法\r\n\t\tisImage(fileName) {\r\n\t\t\t// 判断是否是图片\r\n\t\t\tvar f = fileName;\r\n\t\t\tif (f == null || f == undefined || f == '') {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (!/\\.(?:png|jpg|bmp|gif|PNG|JPG|BMP|GIF|jpeg)$/.test(f)) {\r\n\t\t\t\tthis.$message('类型必须是图片(.png|jpg|bmp|gif|PNG|JPG|BMP|GIF)');\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tisLit2M(size) {\r\n\t\t\tif (size / 1024 / 1024 < 2) {\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\tthis.$message({\r\n\t\t\t\t\tmessage: '图片大小不能超过 2MB!'\r\n\t\t\t\t});\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tbottomAdvStatusChange(e){\r\n\t\t\tif(e === 2 && this.advertDto.advertStatus === 2){\r\n\t\t\t\tthis.bottomAdvert.advertSort = this.advertMaxDto.maxAdvertSort + 1;\r\n\t\t\t\tthis.advertSortReadonly = false;\r\n\t\t\t}else{\r\n\t\t\t\tthis.bottomAdvert.advertSort = -1;\r\n\t\t\t\tthis.advertSortReadonly = true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync getData() {\r\n\t\t\tlet {\r\n\t\t\t\tdata: { code, data }\r\n\t\t\t} = await this.$axios.post(this.BASE_URL + 'admin/advert/space/initAdvertFromData');\r\n\t\t\tthis.advertDto.groupId = data.advertMaxDto.maxGroupId + 1;\r\n\t\t\tthis.advertMaxDto = data.advertMaxDto;\r\n\t\t\tthis.advertStatusSelectOption = data.dictionaryList.filter(item=>{\r\n\t\t\t\titem.dictValue = parseInt(item.dictValue)\r\n\t\t\t\tif(item.dictValue !== 1)return item;\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\tcreated() {\r\n\t\tthis.getData();\r\n\t}\r\n};\r\n",{"version":3,"sources":["advertising_position_management_add.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"advertising_position_management_add.vue","sourceRoot":"src/main/advertising/add","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<div class=\"crumbs\">\r\n\t\t\t<el-breadcrumb separator=\"/\">\r\n\t\t\t\t<el-breadcrumb-item>\r\n\t\t\t\t\t<i class=\"el-icon-lx-cascades\"></i>\r\n\t\t\t\t\t广告位管理\r\n\t\t\t\t</el-breadcrumb-item>\r\n\t\t\t\t<el-breadcrumb-item>新增广告位</el-breadcrumb-item>\r\n\t\t\t</el-breadcrumb>\r\n\t\t</div>\r\n\t\t<div class=\"container\">\r\n\t\t\t<el-form label-width=\"100px\" :inline=\"true\" ref=\"advertDto\" :model=\"advertDto\" :rules=\"rules\" class=\"demo-form-inline\">\r\n\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t<el-form-item label=\"广告主id\" prop=\"groupId\"><el-input v-model=\"advertDto.groupId\" style=\"width: 192px;\"></el-input></el-form-item>\r\n\t\t\t\t</el-col>\r\n\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t<el-form-item label=\"广告主名称\" prop=\"groupName\"><el-input v-model=\"advertDto.groupName\" style=\"width:192px;\"></el-input></el-form-item>\r\n\t\t\t\t</el-col>\r\n\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t<el-form-item label=\"广告增量比例\" prop=\"incrementPercent\">\r\n\t\t\t\t\t\t<el-input v-model=\"advertDto.incrementPercent\" type=\"number\" style=\"width:192px;\"></el-input>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t</el-col>\r\n\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t<el-form-item label=\"广告投放量\" prop=\"purchaseCount\">\r\n\t\t\t\t\t\t<el-input v-model=\"advertDto.purchaseCount\" type=\"number\" min=\"0\" style=\"width: 192px;\"></el-input>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t</el-col>\r\n\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t<el-form-item label=\"跳转链接\" prop=\"skipUrl\"><el-input v-model=\"advertDto.skipUrl\" style=\"width: 192px;\"></el-input></el-form-item>\r\n\t\t\t\t</el-col>\r\n\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t<el-form-item label=\"总状态\" prop=\"advertStatus\">\r\n\t\t\t\t\t\t<el-select v-model=\"advertDto.advertStatus\" @change=\"changeAdvertStatus\" placeholder=\"请选择\" style=\"width: 192px;\">\r\n\t\t\t\t\t\t\t<el-option v-for=\"op in advertStatusSelectOption\" :key=\"op.dictName\" :label=\"op.dictName\" :value=\"op.dictValue\"></el-option>\r\n\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t</el-col>\r\n\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t<el-form-item label=\"备用跳转链接\" prop=\"prepareSkipUrl\"><el-input v-model=\"advertDto.prepareSkipUrl\" style=\"width: 192px;\"></el-input></el-form-item>\r\n\t\t\t\t</el-col>\r\n\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t<el-form-item label=\"广告金额\" prop=\"advertAmount\"><el-input v-model=\"advertDto.advertAmount\" style=\"width: 192px;\"></el-input></el-form-item>\r\n\t\t\t\t</el-col>\r\n\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t<el-form-item label=\"广告读者\" prop=\"readerType\">\r\n\t\t\t\t\t\t<el-select v-model=\"advertDto.readerType\" style=\"width: 192px;\" placeholder=\"请选择\">\r\n\t\t\t\t\t\t\t<el-option label=\"全部\" :value=\"0\"></el-option>\r\n\t\t\t\t\t\t\t<el-option label=\"转发者\" :value=\"1\"></el-option>\r\n\t\t\t\t\t\t\t<el-option label=\"阅读者\" :value=\"2\"></el-option>\r\n\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t</el-col>\r\n\t\t\t\t<section style=\"display:block;clear:both;\">\r\n\t\t\t\t\t<el-divider></el-divider>\r\n\t\t\t\t\t<p class=\"section--title\">底部广告位</p>\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"状态\">\r\n\t\t\t\t\t\t\t<el-select v-model=\"bottomAdvert.advertSpaceStatus\" @change=\"bottomAdvStatusChange\" clearable placeholder=\"请选择\" style=\"width: 192px;\">\r\n\t\t\t\t\t\t\t\t<el-option v-for=\"op in advertStatusSelectOption\" :key=\"op.dictValue\" :label=\"op.dictName\" :value=\"op.dictValue\"></el-option>\r\n\t\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"排序\" prop=\"advertSort\">\r\n\t\t\t\t\t\t\t<el-input v-model=\"bottomAdvert.advertSort\" :readonly=\"advertSortReadonly\" style=\"width: 192px;\"></el-input>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"横幅展示\">\r\n\t\t\t\t\t\t\t<el-switch v-model=\"bottomAdvert.isBanner\" active-color=\"#13ce66\" inactive-color=\"#ccc\" active-value=\"1\" inactive-value=\"0\"></el-switch>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"后退页\">\r\n\t\t\t\t\t\t\t<el-switch v-model=\"bottomAdvert.isBackPage\" active-color=\"#13ce66\" inactive-color=\"#ccc\" active-value=\"1\" inactive-value=\"0\"></el-switch>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"是否描红\">\r\n\t\t\t\t\t\t\t<el-switch v-model=\"bottomAdvert.titleIsRed\" active-color=\"#ff0000\" inactive-color=\"#ccc\" active-value=\"1\" inactive-value=\"0\"></el-switch>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"是否加粗\">\r\n\t\t\t\t\t\t\t<el-switch v-model=\"bottomAdvert.titleIsStrong\" active-color=\"#000\" inactive-color=\"#ccc\" active-value=\"1\" inactive-value=\"0\"></el-switch>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<el-col :span=\"24\">\r\n\t\t\t\t\t\t<el-form-item label=\"标题\"><el-input v-model=\"bottomAdvert.advertTitle\" style=\"width: 552px;\"></el-input></el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<el-col :span=\"24\">\r\n\t\t\t\t\t\t<el-form-item label=\"广告封面图\" prop=\"covertPicture\">\r\n\t\t\t\t\t\t\t<div class=\"upload-box\">\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<el-upload\r\n\t\t\t\t\t\t\t\t\t\t:action=\"uploadAction\"\r\n\t\t\t\t\t\t\t\t\t\tref=\"upload\"\r\n\t\t\t\t\t\t\t\t\t\tlist-type=\"picture-card\"\r\n\t\t\t\t\t\t\t\t\t\t:headers=\"tokenObj\"\r\n\t\t\t\t\t\t\t\t\t\t:data=\"uploadImgData\"\r\n\t\t\t\t\t\t\t\t\t\t:show-file-list=\"false\"\r\n\t\t\t\t\t\t\t\t\t\t:before-upload=\"onBeforeUploadImage\"\r\n\t\t\t\t\t\t\t\t\t\t:on-success=\"\r\n\t\t\t\t\t\t\t\t\t\t\t(res, file) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn fileChange(res, file, 0);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<img v-if=\"bottomAdvert.advertCoverPicture\" :src=\"bottomAdvert.advertCoverPicture\" class=\"avatar\" />\r\n\t\t\t\t\t\t\t\t\t\t<i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n\t\t\t\t\t\t\t\t\t</el-upload>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<el-button class=\"upload-box-btn\" @click=\"handleRemove(0)\">清空</el-button>\r\n\t\t\t\t\t\t\t\t<div class=\"tip\"><p>封面图规格180*180，横幅规格750*180，大小不超过2M</p></div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t</section>\r\n\t\t\t\t<section style=\"display:block;clear:both;\">\r\n\t\t\t\t\t<el-divider></el-divider>\r\n\t\t\t\t\t<p class=\"section--title\">顶部Banner广告位</p>\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"状态\">\r\n\t\t\t\t\t\t\t<el-select v-model=\"topAdvert.advertSpaceStatus\" clearable placeholder=\"请选择\" style=\"width: 100%;\">\r\n\t\t\t\t\t\t\t\t<el-option v-for=\"op in advertStatusSelectOption\" :key=\"op.dictValue\" :label=\"op.dictName\" :value=\"op.dictValue\"></el-option>\r\n\t\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<el-col :span=\"24\">\r\n\t\t\t\t\t\t<el-form-item label=\"广告封面图\" prop=\"covertPicture\">\r\n\t\t\t\t\t\t\t<div class=\"upload-box\">\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<el-upload\r\n\t\t\t\t\t\t\t\t\t\t:action=\"uploadAction\"\r\n\t\t\t\t\t\t\t\t\t\tref=\"upload\"\r\n\t\t\t\t\t\t\t\t\t\tlist-type=\"picture-card\"\r\n\t\t\t\t\t\t\t\t\t\t:headers=\"tokenObj\"\r\n\t\t\t\t\t\t\t\t\t\t:data=\"uploadImgData\"\r\n\t\t\t\t\t\t\t\t\t\t:show-file-list=\"false\"\r\n\t\t\t\t\t\t\t\t\t\t:before-upload=\"onBeforeUploadImage\"\r\n\t\t\t\t\t\t\t\t\t\t:on-success=\"\r\n\t\t\t\t\t\t\t\t\t\t\t(res, file) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn fileChange(res, file, 1);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<img v-if=\"topAdvert.advertCoverPicture\" :src=\"topAdvert.advertCoverPicture\" class=\"avatar\" />\r\n\t\t\t\t\t\t\t\t\t\t<i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n\t\t\t\t\t\t\t\t\t</el-upload>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<el-button class=\"upload-box-btn\" @click=\"handleRemove(1)\">清空</el-button>\r\n\t\t\t\t\t\t\t\t<div class=\"tip\">封面图规格750*100，大小不超过2M</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t</section>\r\n\r\n\t\t\t\t<section style=\"display:block;clear:both;\">\r\n\t\t\t\t\t<el-divider></el-divider>\r\n\t\t\t\t\t<p class=\"section--title\">悬浮广告位</p>\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"状态\">\r\n\t\t\t\t\t\t\t<el-select v-model=\"bottomFixedAdvert.advertSpaceStatus\" clearable placeholder=\"请选择\" style=\"width: 100%;\">\r\n\t\t\t\t\t\t\t\t<el-option v-for=\"op in advertStatusSelectOption\" :key=\"op.dictValue\" :label=\"op.dictName\" :value=\"op.dictValue\"></el-option>\r\n\t\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<el-col :span=\"24\">\r\n\t\t\t\t\t\t<el-form-item label=\"广告封面图\" prop=\"covertPicture\">\r\n\t\t\t\t\t\t\t<div class=\"upload-box\">\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<el-upload\r\n\t\t\t\t\t\t\t\t\t\t:action=\"uploadAction\"\r\n\t\t\t\t\t\t\t\t\t\tref=\"upload\"\r\n\t\t\t\t\t\t\t\t\t\tlist-type=\"picture-card\"\r\n\t\t\t\t\t\t\t\t\t\t:headers=\"tokenObj\"\r\n\t\t\t\t\t\t\t\t\t\t:data=\"uploadImgData\"\r\n\t\t\t\t\t\t\t\t\t\t:show-file-list=\"false\"\r\n\t\t\t\t\t\t\t\t\t\t:before-upload=\"onBeforeUploadImage\"\r\n\t\t\t\t\t\t\t\t\t\t:on-success=\"\r\n\t\t\t\t\t\t\t\t\t\t\t(res, file) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn fileChange(res, file, 2);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<img v-if=\"bottomFixedAdvert.advertCoverPicture\" :src=\"bottomFixedAdvert.advertCoverPicture\" class=\"avatar\" />\r\n\t\t\t\t\t\t\t\t\t\t<i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n\t\t\t\t\t\t\t\t\t</el-upload>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<el-button class=\"upload-box-btn\" @click=\"handleRemove(2)\">清空</el-button>\r\n\t\t\t\t\t\t\t\t<div class=\"tip\">封面图规格750*100，大小不超过2M</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t</section>\r\n\r\n\t\t\t\t<section style=\"display:block;clear:both;\">\r\n\t\t\t\t\t<el-divider></el-divider>\r\n\t\t\t\t\t<p class=\"section--title\">文字链接广告位</p>\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"状态\" prop=\"advertSpaceStatus\">\r\n\t\t\t\t\t\t\t<el-select v-model=\"wordAdvert.advertSpaceStatus\" clearable placeholder=\"请选择\" style=\"width: 100%;\">\r\n\t\t\t\t\t\t\t\t<el-option v-for=\"op in advertStatusSelectOption\" :key=\"op.dictValue\" :label=\"op.dictName\" :value=\"op.dictValue\"></el-option>\r\n\t\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"标题\" prop=\"advertTitle\"><el-input v-model=\"wordAdvert.advertTitle\" style=\"width: 100%;\"></el-input></el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t</section>\r\n\t\t\t\t<section style=\"display:block;clear:both;\">\r\n\t\t\t\t\t<el-divider></el-divider>\r\n\t\t\t\t\t<p class=\"section--title\">文章内页广告位</p>\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"状态\" prop=\"advertSpaceStatus\">\r\n\t\t\t\t\t\t\t<el-select v-model=\"articleInteriorAdvert.advertSpaceStatus\" clearable placeholder=\"请选择\" style=\"width: 100%;\">\r\n\t\t\t\t\t\t\t\t<el-option v-for=\"op in advertStatusSelectOption\" :key=\"op.dictValue\" :label=\"op.dictName\" :value=\"op.dictValue\"></el-option>\r\n\t\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"标题\" prop=\"advertTitle\"><el-input v-model=\"articleInteriorAdvert.advertTitle\" style=\"width: 100%;\"></el-input></el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<el-col :span=\"24\">\r\n\t\t\t\t\t\t<el-form-item label=\"广告封面图\" prop=\"covertPicture\">\r\n\t\t\t\t\t\t\t<div class=\"upload-box\">\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<el-upload\r\n\t\t\t\t\t\t\t\t\t\t:action=\"uploadAction\"\r\n\t\t\t\t\t\t\t\t\t\tref=\"upload\"\r\n\t\t\t\t\t\t\t\t\t\tlist-type=\"picture-card\"\r\n\t\t\t\t\t\t\t\t\t\t:headers=\"tokenObj\"\r\n\t\t\t\t\t\t\t\t\t\t:data=\"uploadImgData\"\r\n\t\t\t\t\t\t\t\t\t\t:show-file-list=\"false\"\r\n\t\t\t\t\t\t\t\t\t\t:before-upload=\"onBeforeUploadImage\"\r\n\t\t\t\t\t\t\t\t\t\t:on-success=\"\r\n\t\t\t\t\t\t\t\t\t\t\t(res, file) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn fileChange(res, file, 3);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<img v-if=\"articleInteriorAdvert.advertCoverPicture\" :src=\"articleInteriorAdvert.advertCoverPicture\" class=\"avatar\" />\r\n\t\t\t\t\t\t\t\t\t\t<i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n\t\t\t\t\t\t\t\t\t</el-upload>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<el-button class=\"upload-box-btn\" @click=\"handleRemove(3)\">清空</el-button>\r\n\t\t\t\t\t\t\t\t<div class=\"tip\">封面图规格750*100，大小不超过2M</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t</section>\r\n\t\t\t</el-form>\r\n\t\t\t<span slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t<el-button @click=\"reset\">取 消</el-button>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"handleSumbit\">保 存</el-button>\r\n\t\t\t</span>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tname: 'advertising_position_management_add',\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tuploadAction: this.BASE_URL + 'admin/upload/uploadImgByType',\r\n\t\t\ttokenObj: { token: localStorage.getItem('token') },\r\n\t\t\tuploadImgData: { type: '2' },\r\n\t\t\tadvertSortReadonly: true,\r\n\t\t\tadvertDto: {\r\n\t\t\t\tgroupId: -1,\r\n\t\t\t\tgroupName: '',\r\n\t\t\t\tmaxAdvertSort: -1,\r\n\t\t\t\tadvertId: '',\r\n\t\t\t\tskipUrl: '',\r\n\t\t\t\tadvertStatus: 2,\r\n\t\t\t\tpurchaseCount: null,\r\n\t\t\t\tprepareSkipUrl: null,\r\n\t\t\t\tadvertAmount: '',\r\n\t\t\t\treaderType: 0,\r\n\t\t\t\tadvertList: []\r\n\t\t\t},\r\n\t\t\trules: {\r\n\t\t\t\tgroupId: [{ required: true, message: '请输入广告主ID', trigger: 'blur' }],\r\n\t\t\t\tgroupName: [{ required: true, message: '请输入广告名称', trigger: 'blur' }],\r\n\t\t\t\tskipUrl: [{ required: true, message: '请输入跳转链接', trigger: 'blur' }],\r\n\t\t\t\tadvertStatus: [{ required: true, message: '请选择状态', trigger: 'change' }],\r\n\t\t\t\tpurchaseCount: [{ required: true, message: '请输入广告投放量', trigger: 'blur' }],\r\n\t\t\t\tadvertAmount: [{ required: true, message: '请输入广告金额', trigger: 'blur' }],\r\n\t\t\t\treaderType: [{ required: true, message: '请选择广告读者', trigger: 'change' }]\r\n\t\t\t},\r\n\t\t\tmakeData: [\r\n\t\t\t\t{\r\n\t\t\t\t\tformRef: 'form1',\r\n\t\t\t\t\tformModel: {},\r\n\t\t\t\t\tadvertSortInputDisable: false,\r\n\t\t\t\t\timgFileList: [],\r\n\t\t\t\t\tformShow: true,\r\n\t\t\t\t\tformName: '第1条广告'\r\n\t\t\t\t}\r\n\t\t\t], // 生成表单所使用的模板\r\n\t\t\tadvertStatusSelectOption: [\r\n\t\t\t\t{\r\n\t\t\t\t\tdictValue: 2,\r\n\t\t\t\t\tdictName: '上架'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tdictValue: 3,\r\n\t\t\t\t\tdictName: '下架'\r\n\t\t\t\t}\r\n\t\t\t], // 广告信息操作表单广告状态下拉框\r\n\t\t\tbottomAdvert: {\r\n\t\t\t\tadvertId: '',\r\n\t\t\t\tadvertSpaceStatus: null,\r\n\t\t\t\tadvertSpaceCode: 2,\r\n\t\t\t\tadvertTitle: '',\r\n\t\t\t\tadvertCoverPicture: '',\r\n\t\t\t\tadvertSort: -1,\r\n\t\t\t\tisBackPage: '0',\r\n\t\t\t\tisBanner: '0',\r\n\t\t\t\ttitleIsRed: '0',\r\n\t\t\t\ttitleIsStrong: '0'\r\n\t\t\t},\r\n\t\t\ttopAdvert: {\r\n\t\t\t\tadvertId: '',\r\n\t\t\t\tadvertSpaceStatus: null,\r\n\t\t\t\tadvertSpaceCode: 1,\r\n\t\t\t\tadvertTitle: '',\r\n\t\t\t\tadvertCoverPicture: '',\r\n\t\t\t\tadvertSort: -1,\r\n\t\t\t\tisBackPage: '0',\r\n\t\t\t\tisBanner: '0',\r\n\t\t\t\ttitleIsRed: '0',\r\n\t\t\t\ttitleIsStrong: '0'\r\n\t\t\t},\r\n\t\t\twordAdvert: {\r\n\t\t\t\tadvertId: '',\r\n\t\t\t\tadvertSpaceStatus: null,\r\n\t\t\t\tadvertSpaceCode: 3,\r\n\t\t\t\tadvertTitle: '',\r\n\t\t\t\tadvertCoverPicture: '',\r\n\t\t\t\tadvertSort: -1,\r\n\t\t\t\tisBackPage: '0',\r\n\t\t\t\tisBanner: '0',\r\n\t\t\t\ttitleIsRed: '0',\r\n\t\t\t\ttitleIsStrong: '0'\r\n\t\t\t},\r\n\t\t\tbottomFixedAdvert: {\r\n\t\t\t\tadvertId: '',\r\n\t\t\t\tadvertSpaceStatus: null,\r\n\t\t\t\tadvertSpaceCode: 5,\r\n\t\t\t\tadvertTitle: '',\r\n\t\t\t\tadvertCoverPicture: '',\r\n\t\t\t\tadvertSort: -1,\r\n\t\t\t\tisBackPage: '0',\r\n\t\t\t\tisBanner: '0',\r\n\t\t\t\ttitleIsRed: '0',\r\n\t\t\t\ttitleIsStrong: '0'\r\n\t\t\t},\r\n\t\t\tarticleInteriorAdvert: {\r\n\t\t\t\tadvertId: '',\r\n\t\t\t\tadvertSpaceStatus: null,\r\n\t\t\t\tadvertSpaceCode: 6,\r\n\t\t\t\tadvertTitle: '',\r\n\t\t\t\tadvertCoverPicture: '',\r\n\t\t\t\tadvertSort: -1,\r\n\t\t\t\tisBackPage: '0',\r\n\t\t\t\tisBanner: '0',\r\n\t\t\t\ttitleIsRed: '0',\r\n\t\t\t\ttitleIsStrong: '0'\r\n\t\t\t},\r\n\t\t\tadvertMaxDto:{\r\n\t\t\t\tmaxAdvertSort:0,\r\n\t\t\t\tmaxGroupId:0\r\n\t\t\t}\r\n\t\t};\r\n\t},\r\n\tmethods: {\r\n\t\t// 如果主广告下架，那么其他的三个部位的广告（如果有广告选择状态的话）要将它进行下架\r\n\t\tchangeAdvertStatus() {\r\n\t\t\tif (this.advertDto.advertStatus === 3) {\r\n\t\t\t\tthis.bottomAdvert.advertSort = -1;\r\n\t\t\t\tthis.advertSortReadonly = true;\r\n\t\t\t\tif (this.bottomAdvert.advertSpaceStatus) {\r\n\t\t\t\t\tthis.bottomAdvert.advertSpaceStatus = 3;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.topAdvert.advertSpaceStatus) {\r\n\t\t\t\t\tthis.topAdvert.advertSpaceStatus = 3;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.wordAdvert.advertSpaceStatus) {\r\n\t\t\t\t\tthis.wordAdvert.advertSpaceStatus = 3;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.bottomFixedAdvert.advertSpaceStatus) {\r\n\t\t\t\t\tthis.bottomFixedAdvert.advertSpaceStatus = 3;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.articleInteriorAdvert.advertSpaceStatus) {\r\n\t\t\t\t\tthis.articleInteriorAdvert.advertSpaceStatus = 3;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.advertDto.advertStatus === 2 && this.bottomAdvert.advertSpaceStatus === 2) {\r\n\t\t\t\tthis.bottomAdvert.advertSort = this.advertMaxDto.maxAdvertSort + 1;\r\n\t\t\t\tthis.advertSortReadonly = false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonBeforeUploadImage(file) {\r\n\t\t\tconst isImg = this.isImage(file.name);\r\n\t\t\tconst isLit2M = this.isLit2M(file.size);\r\n\t\t\treturn isImg && isLit2M;\r\n\t\t},\r\n\t\tfileChange(res, file, index) {\r\n\t\t\t// index: 指向所在那个广告表单\r\n\t\t\tif (index === 0) {\r\n\t\t\t\tthis.bottomAdvert.advertCoverPicture = res.data;\r\n\t\t\t}\r\n\t\t\tif (index === 1) {\r\n\t\t\t\tthis.topAdvert.advertCoverPicture = res.data;\r\n\t\t\t}\r\n\t\t\tif (index === 2) {\r\n\t\t\t\tthis.bottomFixedAdvert.advertCoverPicture = res.data;\r\n\t\t\t}\r\n\t\t\tif (index === 3) {\r\n\t\t\t\tthis.articleInteriorAdvert.advertCoverPicture = res.data;\r\n\t\t\t}\r\n\t\t},\r\n\t\thandleRemove(index) {\r\n\t\t\tif (index === 0) {\r\n\t\t\t\tthis.bottomAdvert.advertCoverPicture = '';\r\n\t\t\t}\r\n\t\t\tif (index === 1) {\r\n\t\t\t\tthis.topAdvert.advertCoverPicture = '';\r\n\t\t\t}\r\n\t\t\tif (index === 2) {\r\n\t\t\t\tthis.bottomFixedAdvert.advertCoverPicture = '';\r\n\t\t\t}\r\n\t\t\tif (index === 3) {\r\n\t\t\t\tthis.articleInteriorAdvert.advertCoverPicture = '';\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 如果用户填写了三个广告位则加入到advertList传给后台\r\n\t\tpushAdvertIntoAdvertList() {\r\n\t\t\tlet advertId = this.findChildAdvertId();\r\n\t\t\tlet result = [];\r\n\t\t\tif (this.bottomAdvert.advertSpaceStatus) {\r\n\t\t\t\tthis.bottomAdvert.advertId = advertId;\r\n\t\t\t\t// this.bottomAdvert.advertCoverPicture = this.joinArrayItem(this.fileList);\r\n\t\t\t\tresult.push(this.bottomAdvert);\r\n\t\t\t}\r\n\t\t\tif (this.topAdvert.advertSpaceStatus) {\r\n\t\t\t\tthis.topAdvert.advertId = advertId;\r\n\t\t\t\tresult.push(this.topAdvert);\r\n\t\t\t}\r\n\t\t\tif (this.wordAdvert.advertSpaceStatus) {\r\n\t\t\t\tthis.wordAdvert.advertId = advertId;\r\n\t\t\t\tresult.push(this.wordAdvert);\r\n\t\t\t}\r\n\t\t\tif (this.bottomFixedAdvert.advertSpaceStatus) {\r\n\t\t\t\tthis.bottomFixedAdvert.advertId = advertId;\r\n\t\t\t\tresult.push(this.bottomFixedAdvert);\r\n\t\t\t}\r\n\t\t\tif (this.articleInteriorAdvert.advertSpaceStatus) {\r\n\t\t\t\tthis.articleInteriorAdvert.advertId = advertId;\r\n\t\t\t\tresult.push(this.articleInteriorAdvert);\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\tfindChildAdvertId() {\r\n\t\t\tlet tempAdvertId;\r\n\t\t\tif (this.bottomAdvert.advertId) {\r\n\t\t\t\ttempAdvertId = this.bottomAdvert.advertId;\r\n\t\t\t}\r\n\t\t\tif (this.topAdvert.advertId) {\r\n\t\t\t\ttempAdvertId = this.topAdvert.advertId;\r\n\t\t\t}\r\n\t\t\tif (this.wordAdvert.advertId) {\r\n\t\t\t\ttempAdvertId = this.wordAdvert.advertId;\r\n\t\t\t}\r\n\t\t\tif (this.bottomFixedAdvert.advertId) {\r\n\t\t\t\ttempAdvertId = this.bottomFixedAdvert.advertId;\r\n\t\t\t}\r\n\t\t\tif (this.articleInteriorAdvert.advertId) {\r\n\t\t\t\ttempAdvertId = this.articleInteriorAdvert.advertId;\r\n\t\t\t}\r\n\t\t\treturn tempAdvertId;\r\n\t\t},\r\n\t\treset() {\r\n\t\t\tthis.$refs.advertDto.resetFields();\r\n\t\t\tthis.bottomAdvert = {\r\n\t\t\t\tadvertId: '',\r\n\t\t\t\tadvertSpaceStatus: null,\r\n\t\t\t\tadvertSpaceCode: 2,\r\n\t\t\t\tadvertTitle: '',\r\n\t\t\t\tadvertCoverPicture: '',\r\n\t\t\t\tadvertSort: -1,\r\n\t\t\t\tisBackPage: '0',\r\n\t\t\t\tisBanner: '0',\r\n\t\t\t\ttitleIsRed: '0',\r\n\t\t\t\ttitleIsStrong: '0'\r\n\t\t\t};\r\n\t\t\tthis.topAdvert = {\r\n\t\t\t\tadvertId: '',\r\n\t\t\t\tadvertSpaceStatus: null,\r\n\t\t\t\tadvertSpaceCode: 1,\r\n\t\t\t\tadvertTitle: '',\r\n\t\t\t\tadvertCoverPicture: '',\r\n\t\t\t\tadvertSort: -1,\r\n\t\t\t\tisBackPage: '0',\r\n\t\t\t\tisBanner: '0',\r\n\t\t\t\ttitleIsRed: '0',\r\n\t\t\t\ttitleIsStrong: '0'\r\n\t\t\t};\r\n\t\t\tthis.wordAdvert = {\r\n\t\t\t\tadvertId: '',\r\n\t\t\t\tadvertSpaceStatus: null,\r\n\t\t\t\tadvertSpaceCode: 3,\r\n\t\t\t\tadvertTitle: '',\r\n\t\t\t\tadvertCoverPicture: '',\r\n\t\t\t\tadvertSort: -1,\r\n\t\t\t\tisBackPage: '0',\r\n\t\t\t\tisBanner: '0',\r\n\t\t\t\ttitleIsRed: '0',\r\n\t\t\t\ttitleIsStrong: '0'\r\n\t\t\t};\r\n\t\t\tthis.bottomFixedAdvert = {\r\n\t\t\t\tadvertId: '',\r\n\t\t\t\tadvertSpaceStatus: null,\r\n\t\t\t\tadvertSpaceCode: 5,\r\n\t\t\t\tadvertTitle: '',\r\n\t\t\t\tadvertCoverPicture: '',\r\n\t\t\t\tadvertSort: -1,\r\n\t\t\t\tisBackPage: '0',\r\n\t\t\t\tisBanner: '0',\r\n\t\t\t\ttitleIsRed: '0',\r\n\t\t\t\ttitleIsStrong: '0'\r\n\t\t\t};\r\n\t\t\tthis.articleInteriorAdvert = {\r\n\t\t\t\tadvertId: '',\r\n\t\t\t\tadvertSpaceStatus: null,\r\n\t\t\t\tadvertSpaceCode: 6,\r\n\t\t\t\tadvertTitle: '',\r\n\t\t\t\tadvertCoverPicture: '',\r\n\t\t\t\tadvertSort: -1,\r\n\t\t\t\tisBackPage: '0',\r\n\t\t\t\tisBanner: '0',\r\n\t\t\t\ttitleIsRed: '0',\r\n\t\t\t\ttitleIsStrong: '0'\r\n\t\t\t};\r\n\t\t},\r\n\t\t// 新增保存\r\n\t\thandleSumbit() {\r\n\t\t\t// 保存\r\n\t\t\tthis.$refs['advertDto'].validate(valid => {\r\n\t\t\t\tif (valid) {\r\n\t\t\t\t\tthis.$confirm('确认以上信息无误？提交了不能更改', '提示', {\r\n\t\t\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\tif (this.checkAdvert()) {\r\n\t\t\t\t\t\t\t\tthis.advertDto.advertList = this.pushAdvertIntoAdvertList();\r\n\t\t\t\t\t\t\t\tthis.makeData.advertDto = this.advertDto;\r\n\t\t\t\t\t\t\t\tthis.saveAdvertInfo();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(error => {});\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tasync saveAdvertInfo() {\r\n\t\t\tthis.makeData[0].advertDto = this.advertDto;\r\n\t\t\tlet {\r\n\t\t\t\tdata: { code, data, message }\r\n\t\t\t} = await this.$axios.post(this.BASE_URL + 'admin/advert/space/saveAdvertInfo', this.makeData);\r\n\t\t\tif (code == '200') {\r\n\t\t\t\tthis.$message({\r\n\t\t\t\t\tmessage: '新增成功',\r\n\t\t\t\t\ttype: 'success'\r\n\t\t\t\t});\r\n\t\t\t\tthis.reset();\r\n\t\t\t\tthis.getData();\r\n\t\t\t} else {\r\n\t\t\t\tthis.$message({\r\n\t\t\t\t\tmessage: '新增失败',\r\n\t\t\t\t\ttype: 'success'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 校验各个部位广告的字段\r\n\t\tcheckAdvert() {\r\n\t\t\tlet result = [];\r\n\t\t\t// 1:未上架  2:上架  3:下架\r\n\t\t\t// 如果总状态为下架状态，三个广告位状态都为上架状态 则提示总状态改成上架状态\r\n\t\t\tif (this.advertDto.advertStatus !== 2) {\r\n\t\t\t\tif (\r\n\t\t\t\t\tthis.bottomAdvert.advertSpaceStatus === 2 ||\r\n\t\t\t\t\tthis.topAdvert.advertSpaceStatus === 2 ||\r\n\t\t\t\t\tthis.wordAdvert.advertSpaceStatus === 2 ||\r\n\t\t\t\t\tthis.bottomFixedAdvert.advertSpaceStatus === 2 ||\r\n\t\t\t\t\tthis.articleInteriorAdvert.advertSpaceStatus === 2\r\n\t\t\t\t) {\r\n\t\t\t\t\tresult.push('总广告位与子广告位状态不一样，请修改状态');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.advertDto.advertStatus === 2) {\r\n\t\t\t\tif (\r\n\t\t\t\t\tthis.bottomAdvert.advertSpaceStatus !== 2 &&\r\n\t\t\t\t\tthis.topAdvert.advertSpaceStatus !== 2 &&\r\n\t\t\t\t\tthis.wordAdvert.advertSpaceStatus !== 2 &&\r\n\t\t\t\t\tthis.bottomFixedAdvert.advertSpaceStatus !== 2 &&\r\n\t\t\t\t\tthis.articleInteriorAdvert.advertSpaceStatus !== 2\r\n\t\t\t\t) {\r\n\t\t\t\t\tresult.push('总广告位与子广告位状态不一样，请修改状态');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// 1:未上架  2:上架  3:下架\r\n\t\t\t// 底部广告\r\n\t\t\tif (this.bottomAdvert.advertSpaceStatus) {\r\n\t\t\t\t// this.bottomAdvert.advertCoverPicture = this.joinArrayItem(this.fileList);\r\n\t\t\t\tif (this.bottomAdvert.isBanner === '0') {\r\n\t\t\t\t\tif (this.bottomAdvert.advertTitle.trim() === '' || this.bottomAdvert.advertTitle === null) {\r\n\t\t\t\t\t\tresult.push('底部广告标题不能为空');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (this.bottomAdvert.advertCoverPicture.trim() === '' || this.bottomAdvert.advertCoverPicture === null) {\r\n\t\t\t\t\tresult.push('底部广告封面图不能为空');\r\n\t\t\t\t}\r\n\t\t\t\tif (this.bottomAdvert.advertSort.toString().trim() === '' || this.bottomAdvert.advertSort === null) {\r\n\t\t\t\t\tresult.push('底部排序不能为空');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//顶部广告\r\n\t\t\tif (this.topAdvert.advertSpaceStatus) {\r\n\t\t\t\tif (this.topAdvert.advertCoverPicture.trim() === '' || this.topAdvert.advertCoverPicture === null) {\r\n\t\t\t\t\tresult.push('顶部广告封面图不能为空');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// 文字广告\r\n\t\t\tif (this.wordAdvert.advertSpaceStatus) {\r\n\t\t\t\tif (this.wordAdvert.advertTitle.trim() === '' || this.wordAdvert.advertTitle === null) {\r\n\t\t\t\t\tresult.push('文字广告标题不能为空');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet message = result.toString();\r\n\t\t\tif (message) {\r\n\t\t\t\tthis.$message({\r\n\t\t\t\t\tmessage: message,\r\n\t\t\t\t\ttype: 'error'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn result.length <= 0;\r\n\t\t},\r\n\t\t// 以下是校验方法\r\n\t\tisImage(fileName) {\r\n\t\t\t// 判断是否是图片\r\n\t\t\tvar f = fileName;\r\n\t\t\tif (f == null || f == undefined || f == '') {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (!/\\.(?:png|jpg|bmp|gif|PNG|JPG|BMP|GIF|jpeg)$/.test(f)) {\r\n\t\t\t\tthis.$message('类型必须是图片(.png|jpg|bmp|gif|PNG|JPG|BMP|GIF)');\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tisLit2M(size) {\r\n\t\t\tif (size / 1024 / 1024 < 2) {\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\tthis.$message({\r\n\t\t\t\t\tmessage: '图片大小不能超过 2MB!'\r\n\t\t\t\t});\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tbottomAdvStatusChange(e){\r\n\t\t\tif(e === 2 && this.advertDto.advertStatus === 2){\r\n\t\t\t\tthis.bottomAdvert.advertSort = this.advertMaxDto.maxAdvertSort + 1;\r\n\t\t\t\tthis.advertSortReadonly = false;\r\n\t\t\t}else{\r\n\t\t\t\tthis.bottomAdvert.advertSort = -1;\r\n\t\t\t\tthis.advertSortReadonly = true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync getData() {\r\n\t\t\tlet {\r\n\t\t\t\tdata: { code, data }\r\n\t\t\t} = await this.$axios.post(this.BASE_URL + 'admin/advert/space/initAdvertFromData');\r\n\t\t\tthis.advertDto.groupId = data.advertMaxDto.maxGroupId + 1;\r\n\t\t\tthis.advertMaxDto = data.advertMaxDto;\r\n\t\t\tthis.advertStatusSelectOption = data.dictionaryList.filter(item=>{\r\n\t\t\t\titem.dictValue = parseInt(item.dictValue)\r\n\t\t\t\tif(item.dictValue !== 1)return item;\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\tcreated() {\r\n\t\tthis.getData();\r\n\t}\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.section--title {\r\n\tcolor: #000;\r\n\tfont-weight: 700;\r\n\tmargin-bottom: 16px;\r\n\tmargin-top: -6px;\r\n}\r\n\r\n.tip {\r\n\tpadding-left: 10px;\r\n\tcolor: #c0c4cc;\r\n}\r\n</style>\n"]}]}