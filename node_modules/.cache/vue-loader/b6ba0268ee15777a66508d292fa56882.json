{"remainingRequest":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\src\\components\\Tinymce\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\src\\components\\Tinymce\\index.vue","mtime":1597819137769},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\n/**\r\n * docs:\r\n * https://panjiachen.github.io/vue-element-admin-site/feature/component/rich-editor.html#tinymce\r\n */\r\nimport editorImage from './components/editorImage';\r\nimport plugins from './plugins';\r\nimport toolbar from './toolbar';\r\nimport load from './dynamicLoadScript';\r\n// why use this cdn, detail see https://github.com/PanJiaChen/tinymce-all-in-one\r\nconst tinymceCDN = 'http://chky.js.zhuanfa666.com/chky/tinymce/tinymce.min.js';\r\n\r\nexport default {\r\n\tname: 'Tinymce',\r\n\tcomponents: { editorImage },\r\n\tprops: {\r\n\t\tid: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: function() {\r\n\t\t\t\treturn 'vue-tinymce-' + +new Date() + ((Math.random() * 1000).toFixed(0) + '');\r\n\t\t\t}\r\n\t\t},\r\n\t\tchildHasChange: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t},\r\n\t\tvalue: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: ''\r\n\t\t},\r\n\t\ttoolbar: {\r\n\t\t\ttype: Array,\r\n\t\t\trequired: false,\r\n\t\t\tdefault() {\r\n\t\t\t\treturn [];\r\n\t\t\t}\r\n\t\t},\r\n\t\tmenubar: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: 'file edit insert view format table'\r\n\t\t},\r\n\t\theight: {\r\n\t\t\ttype: [Number, String],\r\n\t\t\trequired: false,\r\n\t\t\tdefault: 360\r\n\t\t},\r\n\t\twidth: {\r\n\t\t\ttype: [Number, String],\r\n\t\t\trequired: false,\r\n\t\t\tdefault: 'auto'\r\n\t\t}\r\n\t},\r\n\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\thasChange: this.childHasChange,\r\n\t\t\thasInit: false,\r\n\t\t\ttinymceId: this.id,\r\n\t\t\tfullscreen: false,\r\n\t\t\tlanguageTypeList: {\r\n\t\t\t\ten: 'en',\r\n\t\t\t\tzh: 'zh_CN',\r\n\t\t\t\tes: 'es_MX',\r\n\t\t\t\tja: 'ja'\r\n\t\t\t}\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\tcontainerWidth() {\r\n\t\t\tconst width = this.width;\r\n\t\t\tif (/^[\\d]+(\\.[\\d]+)?$/.test(width)) {\r\n\t\t\t\t// matches `100`, `'100'`\r\n\t\t\t\treturn `${width}px`;\r\n\t\t\t}\r\n\t\t\treturn width;\r\n\t\t}\r\n\t},\r\n\twatch: {\r\n\t\tvalue(val, oldValue) {\r\n\t\t\tthis.value = val;\r\n\t\t\tif (!this.hasChange && this.hasInit) {\r\n\t\t\t\tthis.$nextTick(() => window.tinymce.get(this.tinymceId).setContent(val || ''));\r\n\t\t\t}\r\n\t\t},\r\n\t\tchildHasChange(val) {\r\n\t\t\tthis.hasChange = val;\r\n\t\t\tif (!this.hasChange && this.hasInit) {\r\n\t\t\t\tthis.$nextTick(() => window.tinymce.get(this.tinymceId).setContent(this.value || ''));\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tmounted() {\r\n\t\tthis.init();\r\n\t},\r\n\tactivated() {\r\n\t\tif (window.tinymce) {\r\n\t\t\tthis.initTinymce();\r\n\t\t}\r\n\t},\r\n\tdeactivated() {\r\n\t\tthis.destroyTinymce();\r\n\t},\r\n\tdestroyed() {\r\n\t\tthis.destroyTinymce();\r\n\t},\r\n\tmethods: {\r\n\t\tinit() {\r\n\t\t\t// dynamic load tinymce from cdn\r\n\t\t\tload(tinymceCDN, err => {\r\n\t\t\t\tif (err) {\r\n\t\t\t\t\tthis.$message.error(err.message);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.initTinymce();\r\n\t\t\t});\r\n\t\t},\r\n\t\tinitTinymce() {\r\n\t\t\tconst _this = this;\r\n\t\t\twindow.tinymce.init({\r\n\t\t\t\tselector: `#${this.tinymceId}`,\r\n\t\t\t\theight: this.height,\r\n\t\t\t\tlanguage: 'zh_CN', // select language\r\n\t\t\t\tlanguage_url: 'http://chky.js.zhuanfa666.com/chky/tinymce/langs/zh_CN.js', // site absolute URL\r\n\t\t\t\tbody_class: 'panel-body ',\r\n\t\t\t\tobject_resizing: false,\r\n\t\t\t\tlanguage: 'zh_CN',\r\n\t\t\t\tmenubar: this.menubar,\r\n\t\t\t\tplugins: plugins,\r\n\t\t\t\ttoolbar: this.toolbar.length > 0 ? this.toolbar : toolbar,\r\n\t\t\t\tend_container_on_empty_block: true,\r\n\t\t\t\tfontsize_formats: '8pt 9pt 10pt 11pt 12pt 13pt 14pt 15pt 16pt 17pt 18pt 19pt 20pt 24pt 36pt',\r\n\t\t\t\tpowerpaste_word_import: 'clean',\r\n\t\t\t\tcode_dialog_height: 450,\r\n\t\t\t\tcode_dialog_width: 1000,\r\n\t\t\t\tadvlist_bullet_styles: 'square',\r\n\t\t\t\tadvlist_number_styles: 'default',\r\n\t\t\t\timagetools_cors_hosts: ['www.tinymce.com', 'codepen.io'],\r\n\t\t\t\tdefault_link_target: '_blank',\r\n\t\t\t\tlink_title: false,\r\n\t\t\t\tvisualblocks_default_state: false,\r\n\t\t\t\tnonbreaking_force_tab: true, // inserting nonbreaking space &nbsp; need Nonbreaking Space Plugin\r\n\t\t\t\tinit_instance_callback: editor => {\r\n\t\t\t\t\tif (_this.value) {\r\n\t\t\t\t\t\teditor.setContent(_this.value);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t_this.hasInit = true;\r\n\t\t\t\t\teditor.on('NodeChange Change KeyUp SetContent', () => {\r\n\t\t\t\t\t\tthis.hasChange = true;\r\n\t\t\t\t\t\tthis.$emit('input', editor.getContent());\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tsetup(editor) {\r\n\t\t\t\t\teditor.on('FullscreenStateChanged', e => {\r\n\t\t\t\t\t\t_this.fullscreen = e.state;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tdestroyTinymce() {\r\n\t\t\tconst tinymce = window.tinymce.get(this.tinymceId);\r\n\t\t\tif (this.fullscreen) {\r\n\t\t\t\ttinymce.execCommand('mceFullScreen');\r\n\t\t\t}\r\n\t\t\tif (tinymce) {\r\n\t\t\t\ttinymce.destroy();\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetContent(value) {\r\n\t\t\twindow.tinymce.get(this.tinymceId).setContent(value);\r\n\t\t},\r\n\t\tgetContent() {\r\n\t\t\twindow.tinymce.get(this.tinymceId).getContent();\r\n\t\t},\r\n\t\timageSuccessCBK(arr) {\r\n\t\t\tconst _this = this;\r\n\t\t\tarr.forEach(v => {\r\n\t\t\t\twindow.tinymce.get(_this.tinymceId).insertContent(`<img class=\"wscnph\" src=\"${v.url}\" >`);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n};\r\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/Tinymce","sourcesContent":["<template>\r\n\t<div :class=\"{ fullscreen: fullscreen }\" class=\"tinymce-container\" :style=\"{ width: containerWidth }\">\r\n\t\t<textarea :id=\"tinymceId\" class=\"tinymce-textarea\" />\r\n\t\t<div class=\"editor-custom-btn-container\">\r\n\t\t\t<editorImage color=\"#1890ff\" class=\"editor-upload-btn\" @successCBK=\"imageSuccessCBK\" />\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n/**\r\n * docs:\r\n * https://panjiachen.github.io/vue-element-admin-site/feature/component/rich-editor.html#tinymce\r\n */\r\nimport editorImage from './components/editorImage';\r\nimport plugins from './plugins';\r\nimport toolbar from './toolbar';\r\nimport load from './dynamicLoadScript';\r\n// why use this cdn, detail see https://github.com/PanJiaChen/tinymce-all-in-one\r\nconst tinymceCDN = 'http://chky.js.zhuanfa666.com/chky/tinymce/tinymce.min.js';\r\n\r\nexport default {\r\n\tname: 'Tinymce',\r\n\tcomponents: { editorImage },\r\n\tprops: {\r\n\t\tid: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: function() {\r\n\t\t\t\treturn 'vue-tinymce-' + +new Date() + ((Math.random() * 1000).toFixed(0) + '');\r\n\t\t\t}\r\n\t\t},\r\n\t\tchildHasChange: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t},\r\n\t\tvalue: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: ''\r\n\t\t},\r\n\t\ttoolbar: {\r\n\t\t\ttype: Array,\r\n\t\t\trequired: false,\r\n\t\t\tdefault() {\r\n\t\t\t\treturn [];\r\n\t\t\t}\r\n\t\t},\r\n\t\tmenubar: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: 'file edit insert view format table'\r\n\t\t},\r\n\t\theight: {\r\n\t\t\ttype: [Number, String],\r\n\t\t\trequired: false,\r\n\t\t\tdefault: 360\r\n\t\t},\r\n\t\twidth: {\r\n\t\t\ttype: [Number, String],\r\n\t\t\trequired: false,\r\n\t\t\tdefault: 'auto'\r\n\t\t}\r\n\t},\r\n\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\thasChange: this.childHasChange,\r\n\t\t\thasInit: false,\r\n\t\t\ttinymceId: this.id,\r\n\t\t\tfullscreen: false,\r\n\t\t\tlanguageTypeList: {\r\n\t\t\t\ten: 'en',\r\n\t\t\t\tzh: 'zh_CN',\r\n\t\t\t\tes: 'es_MX',\r\n\t\t\t\tja: 'ja'\r\n\t\t\t}\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\tcontainerWidth() {\r\n\t\t\tconst width = this.width;\r\n\t\t\tif (/^[\\d]+(\\.[\\d]+)?$/.test(width)) {\r\n\t\t\t\t// matches `100`, `'100'`\r\n\t\t\t\treturn `${width}px`;\r\n\t\t\t}\r\n\t\t\treturn width;\r\n\t\t}\r\n\t},\r\n\twatch: {\r\n\t\tvalue(val, oldValue) {\r\n\t\t\tthis.value = val;\r\n\t\t\tif (!this.hasChange && this.hasInit) {\r\n\t\t\t\tthis.$nextTick(() => window.tinymce.get(this.tinymceId).setContent(val || ''));\r\n\t\t\t}\r\n\t\t},\r\n\t\tchildHasChange(val) {\r\n\t\t\tthis.hasChange = val;\r\n\t\t\tif (!this.hasChange && this.hasInit) {\r\n\t\t\t\tthis.$nextTick(() => window.tinymce.get(this.tinymceId).setContent(this.value || ''));\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tmounted() {\r\n\t\tthis.init();\r\n\t},\r\n\tactivated() {\r\n\t\tif (window.tinymce) {\r\n\t\t\tthis.initTinymce();\r\n\t\t}\r\n\t},\r\n\tdeactivated() {\r\n\t\tthis.destroyTinymce();\r\n\t},\r\n\tdestroyed() {\r\n\t\tthis.destroyTinymce();\r\n\t},\r\n\tmethods: {\r\n\t\tinit() {\r\n\t\t\t// dynamic load tinymce from cdn\r\n\t\t\tload(tinymceCDN, err => {\r\n\t\t\t\tif (err) {\r\n\t\t\t\t\tthis.$message.error(err.message);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.initTinymce();\r\n\t\t\t});\r\n\t\t},\r\n\t\tinitTinymce() {\r\n\t\t\tconst _this = this;\r\n\t\t\twindow.tinymce.init({\r\n\t\t\t\tselector: `#${this.tinymceId}`,\r\n\t\t\t\theight: this.height,\r\n\t\t\t\tlanguage: 'zh_CN', // select language\r\n\t\t\t\tlanguage_url: 'http://chky.js.zhuanfa666.com/chky/tinymce/langs/zh_CN.js', // site absolute URL\r\n\t\t\t\tbody_class: 'panel-body ',\r\n\t\t\t\tobject_resizing: false,\r\n\t\t\t\tlanguage: 'zh_CN',\r\n\t\t\t\tmenubar: this.menubar,\r\n\t\t\t\tplugins: plugins,\r\n\t\t\t\ttoolbar: this.toolbar.length > 0 ? this.toolbar : toolbar,\r\n\t\t\t\tend_container_on_empty_block: true,\r\n\t\t\t\tfontsize_formats: '8pt 9pt 10pt 11pt 12pt 13pt 14pt 15pt 16pt 17pt 18pt 19pt 20pt 24pt 36pt',\r\n\t\t\t\tpowerpaste_word_import: 'clean',\r\n\t\t\t\tcode_dialog_height: 450,\r\n\t\t\t\tcode_dialog_width: 1000,\r\n\t\t\t\tadvlist_bullet_styles: 'square',\r\n\t\t\t\tadvlist_number_styles: 'default',\r\n\t\t\t\timagetools_cors_hosts: ['www.tinymce.com', 'codepen.io'],\r\n\t\t\t\tdefault_link_target: '_blank',\r\n\t\t\t\tlink_title: false,\r\n\t\t\t\tvisualblocks_default_state: false,\r\n\t\t\t\tnonbreaking_force_tab: true, // inserting nonbreaking space &nbsp; need Nonbreaking Space Plugin\r\n\t\t\t\tinit_instance_callback: editor => {\r\n\t\t\t\t\tif (_this.value) {\r\n\t\t\t\t\t\teditor.setContent(_this.value);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t_this.hasInit = true;\r\n\t\t\t\t\teditor.on('NodeChange Change KeyUp SetContent', () => {\r\n\t\t\t\t\t\tthis.hasChange = true;\r\n\t\t\t\t\t\tthis.$emit('input', editor.getContent());\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tsetup(editor) {\r\n\t\t\t\t\teditor.on('FullscreenStateChanged', e => {\r\n\t\t\t\t\t\t_this.fullscreen = e.state;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tdestroyTinymce() {\r\n\t\t\tconst tinymce = window.tinymce.get(this.tinymceId);\r\n\t\t\tif (this.fullscreen) {\r\n\t\t\t\ttinymce.execCommand('mceFullScreen');\r\n\t\t\t}\r\n\t\t\tif (tinymce) {\r\n\t\t\t\ttinymce.destroy();\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetContent(value) {\r\n\t\t\twindow.tinymce.get(this.tinymceId).setContent(value);\r\n\t\t},\r\n\t\tgetContent() {\r\n\t\t\twindow.tinymce.get(this.tinymceId).getContent();\r\n\t\t},\r\n\t\timageSuccessCBK(arr) {\r\n\t\t\tconst _this = this;\r\n\t\t\tarr.forEach(v => {\r\n\t\t\t\twindow.tinymce.get(_this.tinymceId).insertContent(`<img class=\"wscnph\" src=\"${v.url}\" >`);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.tinymce-container {\r\n\tposition: relative;\r\n\tline-height: normal;\r\n}\r\n.tinymce-container >>> .mce-fullscreen {\r\n\tz-index: 10000;\r\n}\r\n.tinymce-textarea {\r\n\tvisibility: hidden;\r\n\tz-index: -1;\r\n}\r\n.editor-custom-btn-container {\r\n\tposition: absolute;\r\n\tright: 4px;\r\n\ttop: 4px;\r\n\t/*z-index: 2005;*/\r\n}\r\n.fullscreen .editor-custom-btn-container {\r\n\tz-index: 10000;\r\n\tposition: fixed;\r\n}\r\n.editor-upload-btn {\r\n\tdisplay: inline-block;\r\n}\r\n</style>\n"]}]}