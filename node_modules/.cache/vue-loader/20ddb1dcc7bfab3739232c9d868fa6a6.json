{"remainingRequest":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\src\\main\\basic\\app_version_management.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\src\\main\\basic\\app_version_management.vue","mtime":1596769490228},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default {\r\n\tname: 'basetable',\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\turl: './vuetable.json',\r\n\t\t\ttableLoading: false,\r\n\t\t\ttableData: [],\r\n\t\t\tcur_page: 1,\r\n\t\t\tcurrentPage: 1,\r\n\t\t\tpageSize: 10,\r\n\t\t\tcur_total: 0,\r\n\t\t\tmultipleSelection: [],\r\n\t\t\tappVersionCon: '',\r\n\t\t\tdel_list: [],\r\n\t\t\teditVisible: false,\r\n\t\t\tform: {\r\n\t\t\t\tid: '',\r\n\t\t\t\tappType: 1,\r\n\t\t\t\tupdateContent: '',\r\n\t\t\t\tupdateType: 1,\r\n\t\t\t\tappVersion: '',\r\n\t\t\t\tdownloadAddress: '',\r\n\t\t\t\tcreateTime: '',\r\n\t\t\t\tupdateTime: ''\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 下拉框数据填充\r\n\t\t\tappTypeOptions: [\r\n\t\t\t\t//APP类型 1:android 2:ios\r\n\t\t\t\t{ value: 1, lable: 'android' },\r\n\t\t\t\t{ value: 2, lable: 'ios' }\r\n\t\t\t],\r\n\t\t\tupdateTypeOptions: [\r\n\t\t\t\t//更新类型 1:更新 2:强制更新\r\n\t\t\t\t{ value: 1, lable: '更新' },\r\n\t\t\t\t{ value: 2, lable: '强制更新' }\r\n\t\t\t]\r\n\t\t};\r\n\t},\r\n\tcreated() {\r\n\t\tthis.getData();\r\n\t},\r\n\tmethods: {\r\n\t\t// 分页导航\r\n\t\thandleCurrentChange(val) {\r\n\t\t\tthis.currentPage = val;\r\n\t\t\tthis.cur_page = val;\r\n\t\t\tthis.getData();\r\n\t\t},\r\n\t\thandleSizeChange(val) {\r\n\t\t\tthis.currentPage = 1;\r\n\t\t\tthis.cur_page = 1;\r\n\t\t\tthis.pageSize = val;\r\n\t\t\tthis.getData();\r\n\t\t},\r\n\t\tasync getData() {\r\n\t\t\tthis.tableLoading = true;\r\n\t\t\tlet postData = {\r\n\t\t\t\tpage: this.cur_page,\r\n\t\t\t\tappVersion: this.appVersionCon,\r\n\t\t\t\tsize: this.pageSize\r\n\t\t\t};\r\n\t\t\tlet {\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tdata: { list, total }\r\n\t\t\t\t}\r\n\t\t\t} = await this.$axios.post(this.BASE_URL + 'admin/system/list', postData);\r\n\t\t\tthis.tableData = list;\r\n\t\t\tthis.cur_total = total;\r\n\t\t\tthis.tableLoading = false;\r\n\t\t},\r\n\t\tsearch() {\r\n\t\t\tthis.cur_page = 1;\r\n\t\t\tthis.currentPage = 1;\r\n\t\t\tthis.getData();\r\n\t\t},\r\n\t\tappTypeFormatter(row, column) {\r\n\t\t\treturn row.appType == 1 ? 'android' : 'ios';\r\n\t\t},\r\n\t\tupdateTypeFormatter(row, column) {\r\n\t\t\treturn row.updateType == 1 ? '更新' : '强制更新';\r\n\t\t},\r\n\t\tfilterTag(value, row) {\r\n\t\t\treturn row.tag === value;\r\n\t\t},\r\n\t\taddNewVersion(){\r\n\t\t\tthis.$router.push('/app_version_management_add');\r\n\t\t},\r\n\t\thandleEdit(index, row) {\r\n\t\t\tthis.form = {\r\n\t\t\t\tid: row.id,\r\n\t\t\t\tappType: row.appType,\r\n\t\t\t\tupdateContent: row.updateContent,\r\n\t\t\t\tupdateType: row.updateType,\r\n\t\t\t\tappVersion: row.appVersion,\r\n\t\t\t\tdownloadAddress: row.downloadAddress\r\n\t\t\t};\r\n\t\t\tthis.editVisible = true;\r\n\t\t},\r\n\t\thandleDelete(index, row) {\r\n\t\t\tthis.form = {\r\n\t\t\t\tid: row.id\r\n\t\t\t};\r\n\t\t\tthis.$confirm('此操作将删除该条记录, 是否继续?', '提示', {\r\n\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\ttype: 'warning'\r\n\t\t\t}).then(() => {\r\n\t\t\t\tthis.deleteRow();\r\n\t\t\t}).catch(() => {\r\n\t\t\t\tthis.$message({\r\n\t\t\t\t\ttype: 'info',\r\n\t\t\t\t\tmessage: '已取消删除'\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\t\t// delAll() {\r\n\t\t//     const length = this.multipleSelection.length;\r\n\t\t//     let str = '';\r\n\t\t//     this.del_list = this.del_list.concat(this.multipleSelection);\r\n\t\t//     for (let i = 0; i < length; i++) {\r\n\t\t//         str += this.multipleSelection[i].name + ' ';\r\n\t\t//     }\r\n\t\t//     this.$message.error('删除了' + str);\r\n\t\t//     this.multipleSelection = [];\r\n\t\t// },\r\n\t\thandleSelectionChange(val) {\r\n\t\t\tthis.multipleSelection = val;\r\n\t\t},\r\n\t\t// 保存编辑\r\n\t\tasync saveEdit() {\r\n\t\t\tthis.$confirm('确定保存吗?', '提示', {\r\n\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\ttype: 'warning'\r\n\t\t\t}).then(() => {\r\n\t\t\t\tthis.$axios.post(this.BASE_URL + 'admin/system/saveAppVersionInfo', this.form).then(res=>{\r\n\t\t\t\t\tif(res.data.code=='200'){\r\n\t\t\t\t\t\tthis.editVisible = false;\r\n\t\t\t\t\t\tthis.$message.success(res.data.message);\r\n\t\t\t\t\t\tthis.getData();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.$message.error(res.data.message);\r\n\t\t\t\t})\r\n\t\t\t}).catch(() => {});\r\n\t\t},\r\n\t\t// 确定删除\r\n\t\tdeleteRow() {\r\n\t\t\tconst formData = new FormData();\r\n\t\t\tformData.append('id', this.form.id);\r\n\t\t\tthis.$axios.post(this.BASE_URL + 'admin/system/updateAppVersionInfoByDelete', formData).then(res => {\r\n\t\t\t\tthis.getData();\r\n\t\t\t\tthis.$message.success(res.data.message);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n};\r\n",{"version":3,"sources":["app_version_management.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app_version_management.vue","sourceRoot":"src/main/basic","sourcesContent":["<template>\r\n\t<div class=\"table\">\r\n\t\t<div class=\"crumbs\">\r\n\t\t\t<el-breadcrumb separator=\"/\">\r\n\t\t\t\t<el-breadcrumb-item>\r\n\t\t\t\t\t<i class=\"el-icon-lx-cascades\"></i>\r\n\t\t\t\t\tapp版本管理\r\n\t\t\t\t</el-breadcrumb-item>\r\n\t\t\t</el-breadcrumb>\r\n\t\t</div>\r\n\t\t<div class=\"container\">\r\n\t\t\t<div class=\"handle-box\">\r\n\t\t\t\t<el-input v-model=\"appVersionCon\" placeholder=\"版本号\" clearable class=\"handle-input mr10\"></el-input>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"search\">搜索</el-button>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"addNewVersion\" class=\"mr10\">添加</el-button>\r\n\t\t\t</div>\r\n\t\t\t<el-table :data=\"tableData\" v-loading=\"tableLoading\" border class=\"table\" @selection-change=\"handleSelectionChange\">\r\n\t\t\t\t<!-- <el-table-column type=\"selection\" width=\"55\" align=\"center\"></el-table-column> -->\r\n\t\t\t\t<el-table-column prop=\"appVersion\" label=\"app版本\" width=\"100\" align=\"center\" sortable></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"appType\" label=\"app类型\" width=\"80\" align=\"center\" :formatter=\"appTypeFormatter\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"updateContent\" label=\"更新内容\" align=\"center\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"updateType\" label=\"更新类型\" width=\"100\" align=\"center\" :formatter=\"updateTypeFormatter\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"downloadAddress\" label=\"下载地址\" align=\"center\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"createTime\" label=\"发布时间\" align=\"center\"></el-table-column>\r\n\t\t\t\t<el-table-column label=\"操作\" align=\"center\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<el-button type=\"primary\" @click=\"handleEdit(scope.$index, scope.row)\">编辑</el-button>\r\n\t\t\t\t\t\t<el-button type=\"primary\" @click=\"handleDelete(scope.$index, scope.row)\">删除</el-button>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t</el-table>\r\n\t\t\t<div class=\"pagination\">\r\n\t\t\t\t<el-pagination\r\n\t\t\t\t\tbackground\r\n\t\t\t\t\t@current-change=\"handleCurrentChange\"\r\n\t\t\t\t\t@size-change=\"handleSizeChange\"\r\n\t\t\t\t\t:current-page.sync=\"currentPage\"\r\n\t\t\t\t\tlayout=\"total, sizes, prev, pager, next, jumper\"\r\n\t\t\t\t\t:page-sizes=\"[10, 20, 50, 100]\"\r\n\t\t\t\t\t:total=\"cur_total\"\r\n\t\t\t\t></el-pagination>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<!-- 编辑弹出框 -->\r\n\t\t<el-dialog title=\"编辑\" :visible.sync=\"editVisible\" width=\"50%\">\r\n\t\t\t<el-form ref=\"form\" :model=\"form\" label-width=\"100px\">\r\n\t\t\t\t<el-form-item label=\"app类型\">\r\n\t\t\t\t\t<el-select v-model=\"form.appType\" placeholder=\"请选择\" class=\"handle-select mr10\">\r\n\t\t\t\t\t\t<el-option v-for=\"op in appTypeOptions\" :key=\"op.value\" :label=\"op.lable\" :value=\"op.value\"></el-option>\r\n\t\t\t\t\t</el-select>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"更新内容\"><el-input v-model=\"form.updateContent\" rows=\"3\" type=\"textarea\"></el-input></el-form-item>\r\n\t\t\t\t<el-form-item label=\"更新类型\">\r\n\t\t\t\t\t<el-select v-model=\"form.updateType\" placeholder=\"请选择\" class=\"handle-select mr10\">\r\n\t\t\t\t\t\t<el-option v-for=\"op in updateTypeOptions\" :key=\"op.value\" :label=\"op.lable\" :value=\"op.value\"></el-option>\r\n\t\t\t\t\t</el-select>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"app版本\"><el-input v-model=\"form.appVersion\"></el-input></el-form-item>\r\n\t\t\t\t<el-form-item label=\"下载地址\"><el-input v-model=\"form.downloadAddress\"></el-input></el-form-item>\r\n\t\t\t</el-form>\r\n\t\t\t<span slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t<el-button @click=\"editVisible = false\">取 消</el-button>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"saveEdit\">确 定</el-button>\r\n\t\t\t</span>\r\n\t\t</el-dialog>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tname: 'basetable',\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\turl: './vuetable.json',\r\n\t\t\ttableLoading: false,\r\n\t\t\ttableData: [],\r\n\t\t\tcur_page: 1,\r\n\t\t\tcurrentPage: 1,\r\n\t\t\tpageSize: 10,\r\n\t\t\tcur_total: 0,\r\n\t\t\tmultipleSelection: [],\r\n\t\t\tappVersionCon: '',\r\n\t\t\tdel_list: [],\r\n\t\t\teditVisible: false,\r\n\t\t\tform: {\r\n\t\t\t\tid: '',\r\n\t\t\t\tappType: 1,\r\n\t\t\t\tupdateContent: '',\r\n\t\t\t\tupdateType: 1,\r\n\t\t\t\tappVersion: '',\r\n\t\t\t\tdownloadAddress: '',\r\n\t\t\t\tcreateTime: '',\r\n\t\t\t\tupdateTime: ''\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 下拉框数据填充\r\n\t\t\tappTypeOptions: [\r\n\t\t\t\t//APP类型 1:android 2:ios\r\n\t\t\t\t{ value: 1, lable: 'android' },\r\n\t\t\t\t{ value: 2, lable: 'ios' }\r\n\t\t\t],\r\n\t\t\tupdateTypeOptions: [\r\n\t\t\t\t//更新类型 1:更新 2:强制更新\r\n\t\t\t\t{ value: 1, lable: '更新' },\r\n\t\t\t\t{ value: 2, lable: '强制更新' }\r\n\t\t\t]\r\n\t\t};\r\n\t},\r\n\tcreated() {\r\n\t\tthis.getData();\r\n\t},\r\n\tmethods: {\r\n\t\t// 分页导航\r\n\t\thandleCurrentChange(val) {\r\n\t\t\tthis.currentPage = val;\r\n\t\t\tthis.cur_page = val;\r\n\t\t\tthis.getData();\r\n\t\t},\r\n\t\thandleSizeChange(val) {\r\n\t\t\tthis.currentPage = 1;\r\n\t\t\tthis.cur_page = 1;\r\n\t\t\tthis.pageSize = val;\r\n\t\t\tthis.getData();\r\n\t\t},\r\n\t\tasync getData() {\r\n\t\t\tthis.tableLoading = true;\r\n\t\t\tlet postData = {\r\n\t\t\t\tpage: this.cur_page,\r\n\t\t\t\tappVersion: this.appVersionCon,\r\n\t\t\t\tsize: this.pageSize\r\n\t\t\t};\r\n\t\t\tlet {\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tdata: { list, total }\r\n\t\t\t\t}\r\n\t\t\t} = await this.$axios.post(this.BASE_URL + 'admin/system/list', postData);\r\n\t\t\tthis.tableData = list;\r\n\t\t\tthis.cur_total = total;\r\n\t\t\tthis.tableLoading = false;\r\n\t\t},\r\n\t\tsearch() {\r\n\t\t\tthis.cur_page = 1;\r\n\t\t\tthis.currentPage = 1;\r\n\t\t\tthis.getData();\r\n\t\t},\r\n\t\tappTypeFormatter(row, column) {\r\n\t\t\treturn row.appType == 1 ? 'android' : 'ios';\r\n\t\t},\r\n\t\tupdateTypeFormatter(row, column) {\r\n\t\t\treturn row.updateType == 1 ? '更新' : '强制更新';\r\n\t\t},\r\n\t\tfilterTag(value, row) {\r\n\t\t\treturn row.tag === value;\r\n\t\t},\r\n\t\taddNewVersion(){\r\n\t\t\tthis.$router.push('/app_version_management_add');\r\n\t\t},\r\n\t\thandleEdit(index, row) {\r\n\t\t\tthis.form = {\r\n\t\t\t\tid: row.id,\r\n\t\t\t\tappType: row.appType,\r\n\t\t\t\tupdateContent: row.updateContent,\r\n\t\t\t\tupdateType: row.updateType,\r\n\t\t\t\tappVersion: row.appVersion,\r\n\t\t\t\tdownloadAddress: row.downloadAddress\r\n\t\t\t};\r\n\t\t\tthis.editVisible = true;\r\n\t\t},\r\n\t\thandleDelete(index, row) {\r\n\t\t\tthis.form = {\r\n\t\t\t\tid: row.id\r\n\t\t\t};\r\n\t\t\tthis.$confirm('此操作将删除该条记录, 是否继续?', '提示', {\r\n\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\ttype: 'warning'\r\n\t\t\t}).then(() => {\r\n\t\t\t\tthis.deleteRow();\r\n\t\t\t}).catch(() => {\r\n\t\t\t\tthis.$message({\r\n\t\t\t\t\ttype: 'info',\r\n\t\t\t\t\tmessage: '已取消删除'\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\t\t// delAll() {\r\n\t\t//     const length = this.multipleSelection.length;\r\n\t\t//     let str = '';\r\n\t\t//     this.del_list = this.del_list.concat(this.multipleSelection);\r\n\t\t//     for (let i = 0; i < length; i++) {\r\n\t\t//         str += this.multipleSelection[i].name + ' ';\r\n\t\t//     }\r\n\t\t//     this.$message.error('删除了' + str);\r\n\t\t//     this.multipleSelection = [];\r\n\t\t// },\r\n\t\thandleSelectionChange(val) {\r\n\t\t\tthis.multipleSelection = val;\r\n\t\t},\r\n\t\t// 保存编辑\r\n\t\tasync saveEdit() {\r\n\t\t\tthis.$confirm('确定保存吗?', '提示', {\r\n\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\ttype: 'warning'\r\n\t\t\t}).then(() => {\r\n\t\t\t\tthis.$axios.post(this.BASE_URL + 'admin/system/saveAppVersionInfo', this.form).then(res=>{\r\n\t\t\t\t\tif(res.data.code=='200'){\r\n\t\t\t\t\t\tthis.editVisible = false;\r\n\t\t\t\t\t\tthis.$message.success(res.data.message);\r\n\t\t\t\t\t\tthis.getData();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.$message.error(res.data.message);\r\n\t\t\t\t})\r\n\t\t\t}).catch(() => {});\r\n\t\t},\r\n\t\t// 确定删除\r\n\t\tdeleteRow() {\r\n\t\t\tconst formData = new FormData();\r\n\t\t\tformData.append('id', this.form.id);\r\n\t\t\tthis.$axios.post(this.BASE_URL + 'admin/system/updateAppVersionInfoByDelete', formData).then(res => {\r\n\t\t\t\tthis.getData();\r\n\t\t\t\tthis.$message.success(res.data.message);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.handle-box {\r\n\tmargin-bottom: 15px;\r\n}\r\n\r\n.handle-input {\r\n\twidth: 200px;\r\n\tdisplay: inline-block;\r\n}\r\n.del-dialog-cnt {\r\n\tfont-size: 16px;\r\n\ttext-align: center;\r\n}\r\n.table {\r\n\twidth: 100%;\r\n\tfont-size: 14px;\r\n}\r\n.mr10 {\r\n\tmargin-right: 10px;\r\n}\r\n</style>\n"]}]}