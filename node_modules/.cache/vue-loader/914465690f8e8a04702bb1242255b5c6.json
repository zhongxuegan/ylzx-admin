{"remainingRequest":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\src\\main\\statistics\\all_day_time_interval_monitoring.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\src\\main\\statistics\\all_day_time_interval_monitoring.vue","mtime":1597928113867},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default {\r\n\tname: 'basetable',\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tuserType: null,\r\n\t\t\ttableLoading: true,\r\n\t\t\tcurrentPage: 1,\r\n\t\t\ttableData: [], // 表格数据\r\n\t\t\tcur_page: 1, // 当前页号\r\n\t\t\tcur_size: 20,\r\n\t\t\tcur_total: 0, // 总记录数\r\n\r\n\t\t\tselect_word: '',\r\n\t\t\tstartCountDate: this.dateFtt('yyyy-MM-dd', new Date(), 1),\r\n\t\t\tendCountDate: this.dateFtt('yyyy-MM-dd', new Date(), 1),\r\n\t\t\thoursArr: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23],\r\n\t\t\tuserStatusOptions: [\r\n\t\t\t\t{\r\n\t\t\t\t\t//0:正常 1:封杀\r\n\t\t\t\t\tvalue: 0,\r\n\t\t\t\t\tlabel: '禁用'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tvalue: 1,\r\n\t\t\t\t\tlabel: '正常'\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tuserTypeArr: [{ name: '全部', value: '' }, { name: '普通用户', value: 1 }, { name: 'vip用户', value: 2 }, { name: 'svip用户', value: 3 }]\r\n\t\t};\r\n\t},\r\n\tcreated() {\r\n\t\tthis.getData();\r\n\t},\r\n\tmethods: {\r\n\t\tmergeHourCountData(obj, index) {\r\n\t\t\treturn obj.hourCountDetail['hour' + index] + '%';\r\n\t\t},\r\n\t\tmergeAdandIpData(obj, index) {\r\n\t\t\treturn obj.hourClientAdCountDetail['clientAdCountHour' + index] + '/' + obj.hourClientIpCountDetail['clientIpCountHour' + index];\r\n\t\t},\r\n\t\t// 分页导航\r\n\t\thandleCurrentChange(val) {\r\n\t\t\tthis.currentPage = val;\r\n\t\t\tthis.cur_page = val;\r\n\t\t\tthis.findCountData();\r\n\t\t},\r\n\t\thandleSelectionChange(val) {\r\n\t\t\tthis.multipleSelection = val;\r\n\t\t},\r\n\t\thandleSizeChange(val) {\r\n\t\t\tthis.cur_size = val;\r\n\t\t\tthis.findCountData();\r\n\t\t},\r\n\t\tchangeStatus() {\r\n\t\t\tthis.currentPage = 1;\r\n\t\t\tthis.cur_page = 1;\r\n\t\t\tthis.findCountData();\r\n\t\t},\r\n\t\tformaterUserType(row, column, cellValue, index) {\r\n\t\t\treturn cellValue === 1 ? '普通用户' : cellValue === 2 ? 'vip用户' : 'svip用户';\r\n\t\t},\r\n\t\tgetData() {\r\n\t\t\tthis.findCountData();\r\n\t\t},\r\n\t\tsearch() {\r\n\t\t\tthis.currentPage = 1;\r\n\t\t\tthis.cur_page = 1;\r\n\t\t\tthis.findCountData();\r\n\t\t},\r\n\t\tbuckleAmountBlur(index, row) {\r\n\t\t\tif (row.buckleAmount.indexOf('%') == -1) {\r\n\t\t\t\trow.buckleAmount = row.buckleAmount + '%';\r\n\t\t\t}\r\n\t\t\tthis.$axios\r\n\t\t\t\t.post(this.BASE_URL + 'admin/account/saveBuckleAmount', {\r\n\t\t\t\t\t//保存扣量\r\n\t\t\t\t\tuserId: row.userId,\r\n\t\t\t\t\tbuckleAmount: row.buckleAmount\r\n\t\t\t\t})\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\trow.buckleAmount = res.data.data.buckleAmount;\r\n\t\t\t\t});\r\n\t\t},\r\n\t\tenableBuckleAmount(index, row) {\r\n\t\t\trow.buckleAmount = '0%';\r\n\t\t},\r\n\t\taddPercent(row, column, cellValue, index) {\r\n\t\t\treturn cellValue + '%';\r\n\t\t},\r\n\t\tasync findCountData() {\r\n\t\t\tlet postData = {\r\n\t\t\t\tpage: this.cur_page,\r\n\t\t\t\tsize: this.cur_size,\r\n\t\t\t\tstartCountDate: this.startCountDate,\r\n\t\t\t\tendCountDate: this.endCountDate,\r\n\t\t\t\tselectWord: this.select_word,\r\n\t\t\t\tuserType: this.userType\r\n\t\t\t};\r\n\t\t\tlet {\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tdata: { list, total }\r\n\t\t\t\t}\r\n\t\t\t} = await this.$axios.post(this.BASE_URL + 'admin/account/allDayTimeIntervalMonitoring', postData);\r\n\t\t\tthis.cur_total = total;\r\n\t\t\tthis.tableData = list;\r\n\t\t\tthis.tableLoading = false;\r\n\t\t},\r\n\t\tstartCountDateChange() {\r\n\t\t\tif (this.startCountDate > this.endCountDate) {\r\n\t\t\t\tthis.$message({\r\n\t\t\t\t\tmessage: '起始日期不得大于结束日期',\r\n\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t});\r\n\t\t\t\tthis.startCountDate = this.endCountDate;\r\n\t\t\t}\r\n\t\t},\r\n\t\tendCountDateChange() {\r\n\t\t\tif (this.startCountDate > this.endCountDate) {\r\n\t\t\t\tthis.$message({\r\n\t\t\t\t\tmessage: '结束日期不得小于起始日期',\r\n\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t});\r\n\t\t\t\tthis.endCountDate = this.startCountDate;\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 公用\r\n\t\tdateFtt(fmt, date, monthNum) {\r\n\t\t\tvar o = {\r\n\t\t\t\t'M+': date.getMonth() + monthNum, //月份\r\n\t\t\t\t'd+': date.getDate(), //日\r\n\t\t\t\t'h+': date.getHours(), //小时\r\n\t\t\t\t'm+': date.getMinutes(), //分\r\n\t\t\t\t's+': date.getSeconds(), //秒\r\n\t\t\t\t'q+': Math.floor((date.getMonth() + 3) / 3), //季度\r\n\t\t\t\tS: date.getMilliseconds() //毫秒\r\n\t\t\t};\r\n\t\t\tif (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (date.getFullYear() + '').substr(4 - RegExp.$1.length));\r\n\t\t\tfor (var k in o) if (new RegExp('(' + k + ')').test(fmt)) fmt = fmt.replace(RegExp.$1, RegExp.$1.length == 1 ? o[k] : ('00' + o[k]).substr(('' + o[k]).length));\r\n\t\t\treturn fmt;\r\n\t\t}\r\n\t}\r\n};\r\n",{"version":3,"sources":["all_day_time_interval_monitoring.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"all_day_time_interval_monitoring.vue","sourceRoot":"src/main/statistics","sourcesContent":["<template>\r\n\t<div class=\"table\">\r\n\t\t<div class=\"crumbs\">\r\n\t\t\t<el-breadcrumb separator=\"/\">\r\n\t\t\t\t<el-breadcrumb-item>\r\n\t\t\t\t\t<i class=\"el-icon-lx-cascades\"></i>\r\n\t\t\t\t\t用户数据全天分时段监测\r\n\t\t\t\t</el-breadcrumb-item>\r\n\t\t\t</el-breadcrumb>\r\n\t\t</div>\r\n\t\t<div class=\"container\">\r\n\t\t\t<div class=\"handle-box\">\r\n\t\t\t\t<el-date-picker\r\n\t\t\t\t\ttype=\"date\"\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\tvalue-format=\"yyyy-MM-dd\"\r\n\t\t\t\t\tformat=\"yyyy-MM-dd\"\r\n\t\t\t\t\tplaceholder=\"支付时间\"\r\n\t\t\t\t\tv-model=\"startCountDate\"\r\n\t\t\t\t\tclass=\"handle-label mr10\"\r\n\t\t\t\t\t@change=\"startCountDateChange\"\r\n\t\t\t\t></el-date-picker>\r\n\t\t\t\t<i class=\"line mr10\">-</i>\r\n\t\t\t\t<el-date-picker\r\n\t\t\t\t\ttype=\"date\"\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\tvalue-format=\"yyyy-MM-dd\"\r\n\t\t\t\t\tformat=\"yyyy-MM-dd\"\r\n\t\t\t\t\tplaceholder=\"支付时间\"\r\n\t\t\t\t\tv-model=\"endCountDate\"\r\n\t\t\t\t\tclass=\"handle-label mr10\"\r\n\t\t\t\t\t@change=\"endCountDateChange\"\r\n\t\t\t\t></el-date-picker>\r\n\t\t\t\t<el-select v-model=\"userType\" placeholder=\"用户类型\" class=\"handle-select mr10\" @change=\"changeStatus\">\r\n\t\t\t\t\t<el-option v-for=\"item in userTypeArr\" :key=\"item.value\" :label=\"item.name\" :value=\"item.value\"></el-option>\r\n\t\t\t\t</el-select>\r\n\t\t\t\t<el-input v-model=\"select_word\" placeholder=\"用户ID\" class=\"handle-input mr10\"></el-input>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"search\">搜索</el-button>\r\n\t\t\t</div>\r\n\t\t\t<el-table :data=\"tableData\" v-loading=\"tableLoading\" border class=\"table\" ref=\"multipleTable\" @selection-change=\"handleSelectionChange\" style=\"font-size: 10px\">\r\n\t\t\t\t<el-table-column prop=\"userId\" label=\"用户ID\" width=\"60\" align=\"center\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"userType\" align=\"center\" :formatter=\"formaterUserType\" label=\"用户类型\" width=\"100\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"adConverRate\" label=\"广告点击率\" align=\"center\" :formatter=\"addPercent\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"ipPercentRate\" label=\"广告转化率\" align=\"center\" :formatter=\"addPercent\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"pvCount\" label=\"文章点击\" align=\"center\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"adCount\" label=\"广告点击\" align=\"center\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"originCount\" label=\"原文阅读数\" align=\"center\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"originRate\" label=\"原文点击率\" align=\"center\" :formatter=\"addPercent\"></el-table-column>\r\n\t\t\t\t<el-table-column v-for=\"(item, index) in hoursArr\" :key=\"item.index\" :label=\"'' + index + ''\" :formatter=\"addPercent\" width=\"90\" align=\"center\">\r\n\t\t\t\t\t<template scope=\"scope\">\r\n\t\t\t\t\t\t<div style=\"color:#000;\">{{ mergeHourCountData(scope.row, index) }}</div>\r\n\t\t\t\t\t\t<div>{{ mergeAdandIpData(scope.row, index) }}</div>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column prop=\"yearMonthDay\" label=\"统计时间\" align=\"center\"></el-table-column>\r\n\t\t\t</el-table>\r\n\t\t\t<div class=\"pagination\">\r\n\t\t\t\t<el-pagination\r\n\t\t\t\t\tbackground\r\n\t\t\t\t\t@current-change=\"handleCurrentChange\"\r\n\t\t\t\t\t@size-change=\"handleSizeChange\"\r\n\t\t\t\t\t:current-page.sync=\"currentPage\"\r\n\t\t\t\t\tlayout=\"total, sizes, prev, pager, next, jumper\"\r\n\t\t\t\t\t:page-sizes=\"[10, 20, 50, 100]\"\r\n\t\t\t\t\t:page-size=\"cur_size\"\r\n\t\t\t\t\t:total=\"cur_total\"\r\n\t\t\t\t></el-pagination>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tname: 'basetable',\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tuserType: null,\r\n\t\t\ttableLoading: true,\r\n\t\t\tcurrentPage: 1,\r\n\t\t\ttableData: [], // 表格数据\r\n\t\t\tcur_page: 1, // 当前页号\r\n\t\t\tcur_size: 20,\r\n\t\t\tcur_total: 0, // 总记录数\r\n\r\n\t\t\tselect_word: '',\r\n\t\t\tstartCountDate: this.dateFtt('yyyy-MM-dd', new Date(), 1),\r\n\t\t\tendCountDate: this.dateFtt('yyyy-MM-dd', new Date(), 1),\r\n\t\t\thoursArr: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23],\r\n\t\t\tuserStatusOptions: [\r\n\t\t\t\t{\r\n\t\t\t\t\t//0:正常 1:封杀\r\n\t\t\t\t\tvalue: 0,\r\n\t\t\t\t\tlabel: '禁用'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tvalue: 1,\r\n\t\t\t\t\tlabel: '正常'\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tuserTypeArr: [{ name: '全部', value: '' }, { name: '普通用户', value: 1 }, { name: 'vip用户', value: 2 }, { name: 'svip用户', value: 3 }]\r\n\t\t};\r\n\t},\r\n\tcreated() {\r\n\t\tthis.getData();\r\n\t},\r\n\tmethods: {\r\n\t\tmergeHourCountData(obj, index) {\r\n\t\t\treturn obj.hourCountDetail['hour' + index] + '%';\r\n\t\t},\r\n\t\tmergeAdandIpData(obj, index) {\r\n\t\t\treturn obj.hourClientAdCountDetail['clientAdCountHour' + index] + '/' + obj.hourClientIpCountDetail['clientIpCountHour' + index];\r\n\t\t},\r\n\t\t// 分页导航\r\n\t\thandleCurrentChange(val) {\r\n\t\t\tthis.currentPage = val;\r\n\t\t\tthis.cur_page = val;\r\n\t\t\tthis.findCountData();\r\n\t\t},\r\n\t\thandleSelectionChange(val) {\r\n\t\t\tthis.multipleSelection = val;\r\n\t\t},\r\n\t\thandleSizeChange(val) {\r\n\t\t\tthis.cur_size = val;\r\n\t\t\tthis.findCountData();\r\n\t\t},\r\n\t\tchangeStatus() {\r\n\t\t\tthis.currentPage = 1;\r\n\t\t\tthis.cur_page = 1;\r\n\t\t\tthis.findCountData();\r\n\t\t},\r\n\t\tformaterUserType(row, column, cellValue, index) {\r\n\t\t\treturn cellValue === 1 ? '普通用户' : cellValue === 2 ? 'vip用户' : 'svip用户';\r\n\t\t},\r\n\t\tgetData() {\r\n\t\t\tthis.findCountData();\r\n\t\t},\r\n\t\tsearch() {\r\n\t\t\tthis.currentPage = 1;\r\n\t\t\tthis.cur_page = 1;\r\n\t\t\tthis.findCountData();\r\n\t\t},\r\n\t\tbuckleAmountBlur(index, row) {\r\n\t\t\tif (row.buckleAmount.indexOf('%') == -1) {\r\n\t\t\t\trow.buckleAmount = row.buckleAmount + '%';\r\n\t\t\t}\r\n\t\t\tthis.$axios\r\n\t\t\t\t.post(this.BASE_URL + 'admin/account/saveBuckleAmount', {\r\n\t\t\t\t\t//保存扣量\r\n\t\t\t\t\tuserId: row.userId,\r\n\t\t\t\t\tbuckleAmount: row.buckleAmount\r\n\t\t\t\t})\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\trow.buckleAmount = res.data.data.buckleAmount;\r\n\t\t\t\t});\r\n\t\t},\r\n\t\tenableBuckleAmount(index, row) {\r\n\t\t\trow.buckleAmount = '0%';\r\n\t\t},\r\n\t\taddPercent(row, column, cellValue, index) {\r\n\t\t\treturn cellValue + '%';\r\n\t\t},\r\n\t\tasync findCountData() {\r\n\t\t\tlet postData = {\r\n\t\t\t\tpage: this.cur_page,\r\n\t\t\t\tsize: this.cur_size,\r\n\t\t\t\tstartCountDate: this.startCountDate,\r\n\t\t\t\tendCountDate: this.endCountDate,\r\n\t\t\t\tselectWord: this.select_word,\r\n\t\t\t\tuserType: this.userType\r\n\t\t\t};\r\n\t\t\tlet {\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tdata: { list, total }\r\n\t\t\t\t}\r\n\t\t\t} = await this.$axios.post(this.BASE_URL + 'admin/account/allDayTimeIntervalMonitoring', postData);\r\n\t\t\tthis.cur_total = total;\r\n\t\t\tthis.tableData = list;\r\n\t\t\tthis.tableLoading = false;\r\n\t\t},\r\n\t\tstartCountDateChange() {\r\n\t\t\tif (this.startCountDate > this.endCountDate) {\r\n\t\t\t\tthis.$message({\r\n\t\t\t\t\tmessage: '起始日期不得大于结束日期',\r\n\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t});\r\n\t\t\t\tthis.startCountDate = this.endCountDate;\r\n\t\t\t}\r\n\t\t},\r\n\t\tendCountDateChange() {\r\n\t\t\tif (this.startCountDate > this.endCountDate) {\r\n\t\t\t\tthis.$message({\r\n\t\t\t\t\tmessage: '结束日期不得小于起始日期',\r\n\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t});\r\n\t\t\t\tthis.endCountDate = this.startCountDate;\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 公用\r\n\t\tdateFtt(fmt, date, monthNum) {\r\n\t\t\tvar o = {\r\n\t\t\t\t'M+': date.getMonth() + monthNum, //月份\r\n\t\t\t\t'd+': date.getDate(), //日\r\n\t\t\t\t'h+': date.getHours(), //小时\r\n\t\t\t\t'm+': date.getMinutes(), //分\r\n\t\t\t\t's+': date.getSeconds(), //秒\r\n\t\t\t\t'q+': Math.floor((date.getMonth() + 3) / 3), //季度\r\n\t\t\t\tS: date.getMilliseconds() //毫秒\r\n\t\t\t};\r\n\t\t\tif (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (date.getFullYear() + '').substr(4 - RegExp.$1.length));\r\n\t\t\tfor (var k in o) if (new RegExp('(' + k + ')').test(fmt)) fmt = fmt.replace(RegExp.$1, RegExp.$1.length == 1 ? o[k] : ('00' + o[k]).substr(('' + o[k]).length));\r\n\t\t\treturn fmt;\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.handle-box {\r\n\tmargin-bottom: 15px;\r\n}\r\n\r\n.handle-select {\r\n\twidth: 120px;\r\n}\r\n\r\n.handle-label {\r\n\twidth: 140px;\r\n}\r\n\r\n.handle-input {\r\n\twidth: 200px;\r\n\tdisplay: inline-block;\r\n}\r\n.del-dialog-cnt {\r\n\tfont-size: 16px;\r\n\ttext-align: center;\r\n}\r\n.table {\r\n\twidth: 100%;\r\n\tfont-size: 14px;\r\n}\r\n.red {\r\n\tcolor: #ff0000;\r\n}\r\n.mr10 {\r\n\tmargin-right: 10px;\r\n}\r\n</style>\n"]}]}