{"remainingRequest":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\src\\main\\basic\\setOperation.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\src\\main\\basic\\setOperation.vue","mtime":1598264266517},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default {\r\n\tname: 'baseform',\r\n\tdata: function() {\r\n\t\treturn {\r\n\t\t\tisEdit: false,\r\n\t\t\toriginForm: {},\r\n\t\t\tform: {\r\n\t\t\t\tregister: '',\r\n\t\t\t\tapprenticeRegister: '',\r\n\t\t\t\tdailyLogIn: '',\r\n\t\t\t\tstairCommission: '',\r\n\t\t\t\taccessCommission: '',\r\n\t\t\t\tfirstTimeCommission: '',\r\n\t\t\t\tsecondlyCommission: '',\r\n\t\t\t\tid: null,\r\n\t\t\t\tseveralDaysDeductNum: '',\r\n\t\t\t\tadvertPercentConversion: '',\r\n\t\t\t\tadvertDeductNum: '',\r\n\t\t\t\tvipAveragePricePerRead: '',\r\n\t\t\t\taveragePricePerRead: '',\r\n\t\t\t\twithdrawalHour: '',\r\n\t\t\t\twithdrawalMinute: '',\r\n\t\t\t\tarticleSharing4: '',\r\n\t\t\t\tarticleSharing3: '',\r\n\t\t\t\tarticleSharing2: '',\r\n\t\t\t\tarticleSharing1: '',\r\n\t\t\t\tfirstArticle: '',\r\n\t\t\t\tfirstVideo: '',\r\n\t\t\t\tfirstApprentice: '',\r\n\t\t\t\tadvertPrice: '',\r\n\t\t\t\tdailyWithdrawNum: '',\r\n\t\t\t\tprenticeForwardDivideNum: '',\r\n\t\t\t\tgrandsonForwardDivideNum: '',\r\n\t\t\t\tturnMakeRatio: '',\r\n\t\t\t\tregisterBrushExpectRatio: '',\r\n\t\t\t\t// 新增\r\n\t\t\t\tadvertPrice: '',\r\n\t\t\t\tfrozenCapitalStart:'',\r\n\t\t\t\tfrozenCapitalSize:''\r\n\t\t\t},\r\n\t\t\ttableData1: [],\r\n\t\t\ttableData2: []\r\n\t\t};\r\n\t},\r\n\tcreated() {\r\n\t\tthis.getData();\r\n\t},\r\n\tmethods: {\r\n\t\tedit() {\r\n\t\t\tlet { registerBrushExpectRatio, turnMakeRatio } = this.form;\r\n\t\t\tthis.checked(registerBrushExpectRatio, 1);\r\n\t\t\tthis.checked(turnMakeRatio, 2);\r\n\t\t\tthis.isEdit = true;\r\n\t\t},\r\n\t\treset() {\r\n\t\t\tthis.form = Object.assign({}, this.originForm);\r\n\t\t\tthis.isEdit = false;\r\n\t\t},\r\n\t\tasync getData() {\r\n\t\t\tlet {\r\n\t\t\t\tdata: { data }\r\n\t\t\t} = await this.$axios.post(this.BASE_URL + 'admin/system/basic');\r\n\t\t\tthis.form = Object.assign({}, data);\r\n\t\t\tthis.originForm = Object.assign({}, data);\r\n\t\t},\r\n\r\n\t\tasync confirm() {\r\n\t\t\tthis.$confirm('此操作将更新记录, 是否继续?', '提示', {\r\n\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\ttype: 'warning'\r\n\t\t\t})\r\n\t\t\t\t.then(async () => {\r\n\t\t\t\t\tlet { code, message } = await this.$axios.post(this.BASE_URL + 'admin/system/basic/update', this.form);\r\n\t\t\t\t\tthis.isEdit = false;\r\n\t\t\t\t\tthis.getData();\r\n\t\t\t\t\tthis.$message.success(`修改成功`);\r\n\t\t\t\t})\r\n\t\t\t\t.catch(() => {});\r\n\t\t},\r\n\t\tforamatCheck(data) {\r\n\t\t\tlet isExist = ['advertIncome', 'articleIncome'];\r\n\t\t\tlet isExistText = ['广告收益', '转发支付'];\r\n\t\t\tlet list = [];\r\n\t\t\tlet obj = {};\r\n\t\t\tfor (let key in data) {\r\n\t\t\t\tobj = {};\r\n\t\t\t\tif (isExist.includes(key)) {\r\n\t\t\t\t\tobj.name = isExistText[isExist.indexOf(key)];\r\n\t\t\t\t\tlet arr = data[key].split(',');\r\n\t\t\t\t\tarr.forEach((item, index) => {\r\n\t\t\t\t\t\tobj['advArt' + (index + 1)] = item;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tlist.unshift(obj);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn list;\r\n\t\t},\r\n\t\tasync checked(val, type) {\r\n\t\t\tlet rational = parseInt(val * 100);\r\n\t\t\tlet {\r\n\t\t\t\tdata: { code, data }\r\n\t\t\t} = await this.$axios.post(this.BASE_URL + `admin/system/abatement/generateAbatementConfig?rational=${rational}`);\r\n\t\t\tif (code === '200') {\r\n\t\t\t\tif (type === 1) { //转赚比\r\n\t\t\t\t\tthis.tableData1 = this.foramatCheck(data);\r\n\t\t\t\t}\r\n\t\t\t\tif (type === 2) { //转赚比\r\n\t\t\t\t\tthis.tableData2 = this.foramatCheck(data);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n",{"version":3,"sources":["setOperation.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"setOperation.vue","sourceRoot":"src/main/basic","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<div class=\"crumbs\">\r\n\t\t\t<el-breadcrumb separator=\"/\">\r\n\t\t\t\t<el-breadcrumb-item>\r\n\t\t\t\t\t<i class=\"el-icon-lx-calendar\"></i>\r\n\t\t\t\t\t基本设置\r\n\t\t\t\t</el-breadcrumb-item>\r\n\t\t\t\t<el-breadcrumb-item>运营设置</el-breadcrumb-item>\r\n\t\t\t</el-breadcrumb>\r\n\t\t</div>\r\n\t\t<div class=\"container\">\r\n\t\t\t<div class=\"form-box\">\r\n\t\t\t\t<el-form ref=\"form\" :inline=\"true\" :model=\"form\" label-width=\"200px\">\r\n\t\t\t\t\t<el-form-item label=\"注册用户赠送\">\r\n\t\t\t\t\t\t<template v-if=\"isEdit\">\r\n\t\t\t\t\t\t\t<el-input type=\"number\" v-model=\"form.register\"></el-input>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t\t<span>{{ form.register + ' 元' }}</span>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<!-- <el-form-item label=\"注册徒弟师傅奖励\">\r\n\t\t\t\t\t\t<template v-if=\"isEdit\">\r\n\t\t\t\t\t\t\t<el-input type=\"number\" v-model=\"form.apprenticeRegister\"></el-input>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t\t<span>{{ form.apprenticeRegister + ' 元' }}</span>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</el-form-item> -->\r\n\t\t\t\t\t<!-- <el-form-item label=\"每日登陆赠送\">\r\n\t\t\t\t\t\t<template v-if=\"isEdit\">\r\n\t\t\t\t\t\t\t<el-input type=\"number\" v-model=\"form.dailyLogIn\"></el-input>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t\t<span>{{ form.dailyLogIn + ' 元' }}</span>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</el-form-item> -->\r\n\t\t\t\t\t<el-form-item label=\"一级下线提成\">\r\n\t\t\t\t\t\t<template v-if=\"isEdit\">\r\n\t\t\t\t\t\t\t<el-input type=\"number\" v-model=\"form.stairCommission\"></el-input>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t\t<span>{{ (form.stairCommission * 100).toFixed(2) + ' %' }}</span>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item label=\"二级下线提成\">\r\n\t\t\t\t\t\t<template v-if=\"isEdit\">\r\n\t\t\t\t\t\t\t<el-input type=\"number\" v-model=\"form.accessCommission\"></el-input>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t\t<span>{{ (form.accessCommission * 100).toFixed(2) + ' %' }}</span>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item label=\"注册几天后开始扣量\">\r\n\t\t\t\t\t\t<template v-if=\"isEdit\">\r\n\t\t\t\t\t\t\t<el-input type=\"number\" v-model=\"form.severalDaysDeductNum\"></el-input>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t\t<span>{{ form.severalDaysDeductNum + ' 天' }}</span>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item label=\"第一次最低提现金额\">\r\n\t\t\t\t\t\t<template v-if=\"isEdit\">\r\n\t\t\t\t\t\t\t<el-input type=\"number\" v-model=\"form.firstTimeCommission\"></el-input>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t\t<span>{{ form.firstTimeCommission + ' 元' }}</span>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item label=\"后续最低提现金额\">\r\n\t\t\t\t\t\t<template v-if=\"isEdit\">\r\n\t\t\t\t\t\t\t<el-input type=\"number\" v-model=\"form.secondlyCommission\"></el-input>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t\t<span>{{ form.secondlyCommission + ' 元' }}</span>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item label=\"广告转化率\">\r\n\t\t\t\t\t\t<template v-if=\"isEdit\">\r\n\t\t\t\t\t\t\t<el-input type=\"number\" v-model=\"form.advertPercentConversion\"></el-input>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t\t<span>{{ (form.advertPercentConversion * 100).toFixed(2) + ' %' }}</span>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item label=\"广告运营扣量\">\r\n\t\t\t\t\t\t<template v-if=\"isEdit\">\r\n\t\t\t\t\t\t\t<el-input type=\"number\" v-model=\"form.advertDeductNum\"></el-input>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t\t<span>{{ (form.advertDeductNum * 100).toFixed(2) + ' %' }}</span>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<!-- <el-form-item label=\"每阅读实际支付成本\">\r\n\t\t\t\t\t\t<template v-if=\"isEdit\">\r\n\t\t\t\t\t\t\t<el-input type=\"number\" v-model=\"form.averagePricePerRead\"></el-input>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t\t<span>{{ form.averagePricePerRead + ' 元' }}</span>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item label=\"VIP每阅读实际支付成本\">\r\n\t\t\t\t\t\t<template v-if=\"isEdit\">\r\n\t\t\t\t\t\t\t<el-input type=\"number\" v-model=\"form.vipAveragePricePerRead\"></el-input>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t\t<span>{{ form.vipAveragePricePerRead + ' 元' }}</span>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</el-form-item> -->\r\n\t\t\t\t\t<el-form-item label=\"提现小时\">\r\n\t\t\t\t\t\t<template v-if=\"isEdit\">\r\n\t\t\t\t\t\t\t<el-input type=\"number\" v-model=\"form.withdrawalHour\"></el-input>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t\t<span>{{ form.withdrawalHour + '小时' }}</span>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item label=\"提现分钟\">\r\n\t\t\t\t\t\t<template v-if=\"isEdit\">\r\n\t\t\t\t\t\t\t<el-input type=\"number\" v-model=\"form.withdrawalMinute\"></el-input>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t\t<span>{{ form.withdrawalMinute + '分钟' }}</span>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<!-- <el-form-item label=\"首次分享文章奖励金额\">\r\n\t\t\t\t\t\t<template v-if=\"isEdit\">\r\n\t\t\t\t\t\t\t<el-input type=\"number\" v-model=\"form.firstArticle\"></el-input>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t\t<span>{{ form.firstArticle + ' 元' }}</span>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item label=\"首次分享视频奖励金额\">\r\n\t\t\t\t\t\t<template v-if=\"isEdit\">\r\n\t\t\t\t\t\t\t<el-input type=\"number\" v-model=\"form.firstVideo\"></el-input>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t\t<span>{{ form.firstVideo + ' 元' }}</span>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item label=\"首次邀请好友奖励\">\r\n\t\t\t\t\t\t<template v-if=\"isEdit\">\r\n\t\t\t\t\t\t\t<el-input type=\"number\" v-model=\"form.firstApprentice\"></el-input>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t\t<span>{{ form.firstApprentice + ' 元' }}</span>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item label=\"分享文章累计阶梯1\">\r\n\t\t\t\t\t\t<template v-if=\"isEdit\">\r\n\t\t\t\t\t\t\t<el-input v-model=\"form.articleSharing1\"></el-input>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t\t<span>{{ form.articleSharing1 + ' 元' }}</span>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item label=\"分享文章累计阶梯2\">\r\n\t\t\t\t\t\t<template v-if=\"isEdit\">\r\n\t\t\t\t\t\t\t<el-input v-model=\"form.articleSharing2\"></el-input>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t\t<span>{{ form.articleSharing2 + ' 元' }}</span>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item label=\"分享文章累计阶梯3\">\r\n\t\t\t\t\t\t<template v-if=\"isEdit\">\r\n\t\t\t\t\t\t\t<el-input v-model=\"form.articleSharing3\"></el-input>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t\t<span>{{ form.articleSharing3 + ' 元' }}</span>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item label=\"分享文章累计阶梯4\">\r\n\t\t\t\t\t\t<template v-if=\"isEdit\">\r\n\t\t\t\t\t\t\t<el-input v-model=\"form.articleSharing4\"></el-input>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t\t<span>{{ form.articleSharing4 + ' 元' }}</span>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</el-form-item> -->\r\n\t\t\t\t\t<el-form-item label=\"每广告点击单价\">\r\n\t\t\t\t\t\t<template v-if=\"isEdit\">\r\n\t\t\t\t\t\t\t<el-input type=\"number\" v-model=\"form.advertPrice\"></el-input>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t\t<span>{{ form.advertPrice + ' 元' }}</span>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item label=\"每日提现次数\">\r\n\t\t\t\t\t\t<template v-if=\"isEdit\">\r\n\t\t\t\t\t\t\t<el-input type=\"number\" v-model=\"form.dailyWithdrawNum\"></el-input>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t\t<span>{{ form.dailyWithdrawNum + ' 次' }}</span>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item label=\"徒弟转发分成扣量\">\r\n\t\t\t\t\t\t<template v-if=\"isEdit\">\r\n\t\t\t\t\t\t\t<el-input type=\"number\" v-model=\"form.prenticeForwardDivideNum\"></el-input>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t\t<span>{{ (form.prenticeForwardDivideNum * 100).toFixed(2) + ' %' }}</span>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item label=\"徒孙转发分成扣量\">\r\n\t\t\t\t\t\t<template v-if=\"isEdit\">\r\n\t\t\t\t\t\t\t<el-input type=\"number\" v-model=\"form.grandsonForwardDivideNum\"></el-input>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t\t<span>{{ (form.grandsonForwardDivideNum * 100).toFixed(2) + ' %' }}</span>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item label=\"注册刷子预期收益比\">\r\n\t\t\t\t\t\t<template v-if=\"isEdit\">\r\n\t\t\t\t\t\t\t<el-input class=\"mr10\" type=\"number\" v-model=\"form.registerBrushExpectRatio\" @change=\"checked(form.registerBrushExpectRatio, 1)\"></el-input>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t\t<span>{{ (form.registerBrushExpectRatio * 100).toFixed(2) + ' %' }}</span>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item v-if=\"isEdit\" style=\"display:block;padding-left: 200px;\">\r\n\t\t\t\t\t\t<el-table :data=\"tableData1\" border :show-header=\"false\">\r\n\t\t\t\t\t\t\t<el-table-column\r\n\t\t\t\t\t\t\t\tv-for=\"(value, key) in tableData1[0]\"\r\n\t\t\t\t\t\t\t\t:key=\"key + '1'\"\r\n\t\t\t\t\t\t\t\t:width=\"key !== 'name' ? '50' : ''\"\r\n\t\t\t\t\t\t\t\t:prop=\"key\"\r\n\t\t\t\t\t\t\t\talign=\"center\"\r\n\t\t\t\t\t\t\t></el-table-column>\r\n\t\t\t\t\t\t</el-table>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item label=\"转赚比\">\r\n\t\t\t\t\t\t<template v-if=\"isEdit\">\r\n\t\t\t\t\t\t\t<el-input class=\"mr10\" type=\"number\" v-model=\"form.turnMakeRatio\" @change=\"checked(form.turnMakeRatio, 2)\"></el-input>\r\n\t\t\t\t\t\t\t<p style=\"color: #333333;\">转赚比=收益/文章IP*支付比*单价*（1+徒弟分成+徒孙分成）</p>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t\t<span>{{ (form.turnMakeRatio * 100).toFixed(2) + ' %' }}</span>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item v-if=\"isEdit\" style=\"display:block;padding-left: 200px;\">\r\n\t\t\t\t\t\t<el-table :data=\"tableData2\" border :show-header=\"false\">\r\n\t\t\t\t\t\t\t<el-table-column\r\n\t\t\t\t\t\t\t\tv-for=\"(value, key) in tableData2[0]\"\r\n\t\t\t\t\t\t\t\t:key=\"key + '2'\"\r\n\t\t\t\t\t\t\t\t:width=\"key !== 'name' ? '50' : ''\"\r\n\t\t\t\t\t\t\t\t:prop=\"key\"\r\n\t\t\t\t\t\t\t\talign=\"center\"\r\n\t\t\t\t\t\t\t></el-table-column>\r\n\t\t\t\t\t\t</el-table>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item label=\"文章单价\">\r\n\t\t\t\t\t\t<template v-if=\"isEdit\">\r\n\t\t\t\t\t\t\t<el-input type=\"number\" v-model=\"form.articlePrice\"></el-input>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t\t<span>{{ form.articlePrice + ' 元' }}</span>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item label=\"卡量开始金额\">\r\n\t\t\t\t\t\t<template v-if=\"isEdit\">\r\n\t\t\t\t\t\t\t<el-input type=\"number\" v-model=\"form.frozenCapitalStart\"></el-input>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t\t<span>{{ form.frozenCapitalStart + ' 元' }}</span>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item label=\"卡量金额\">\r\n\t\t\t\t\t\t<template v-if=\"isEdit\">\r\n\t\t\t\t\t\t\t<el-input type=\"number\" class=\"mr10\" v-model=\"form.frozenCapitalSize\"></el-input>\r\n\t\t\t\t\t\t\t<p style=\"color: #333333;\">卡量开始金额4，卡量金额2，意思是从4元开始卡量，卡2元，到6元时更新收益金额。</p>\r\n\t\t\t\t\t\t\t<p style=\"color: #333333;\">卡量开始金额与卡量金额必须一一对应</p>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t\t<span>{{ form.frozenCapitalSize + ' 元' }}</span>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item style=\"display:block;text-align:center;\">\r\n\t\t\t\t\t\t<el-button v-if=\"!isEdit\" type=\"primary\" @click=\"edit\">修改</el-button>\r\n\t\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t\t<el-button type=\"default\" @click=\"reset\">取消</el-button>\r\n\t\t\t\t\t\t\t<el-button type=\"primary\" @click=\"confirm\">确认</el-button>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t</el-form>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tname: 'baseform',\r\n\tdata: function() {\r\n\t\treturn {\r\n\t\t\tisEdit: false,\r\n\t\t\toriginForm: {},\r\n\t\t\tform: {\r\n\t\t\t\tregister: '',\r\n\t\t\t\tapprenticeRegister: '',\r\n\t\t\t\tdailyLogIn: '',\r\n\t\t\t\tstairCommission: '',\r\n\t\t\t\taccessCommission: '',\r\n\t\t\t\tfirstTimeCommission: '',\r\n\t\t\t\tsecondlyCommission: '',\r\n\t\t\t\tid: null,\r\n\t\t\t\tseveralDaysDeductNum: '',\r\n\t\t\t\tadvertPercentConversion: '',\r\n\t\t\t\tadvertDeductNum: '',\r\n\t\t\t\tvipAveragePricePerRead: '',\r\n\t\t\t\taveragePricePerRead: '',\r\n\t\t\t\twithdrawalHour: '',\r\n\t\t\t\twithdrawalMinute: '',\r\n\t\t\t\tarticleSharing4: '',\r\n\t\t\t\tarticleSharing3: '',\r\n\t\t\t\tarticleSharing2: '',\r\n\t\t\t\tarticleSharing1: '',\r\n\t\t\t\tfirstArticle: '',\r\n\t\t\t\tfirstVideo: '',\r\n\t\t\t\tfirstApprentice: '',\r\n\t\t\t\tadvertPrice: '',\r\n\t\t\t\tdailyWithdrawNum: '',\r\n\t\t\t\tprenticeForwardDivideNum: '',\r\n\t\t\t\tgrandsonForwardDivideNum: '',\r\n\t\t\t\tturnMakeRatio: '',\r\n\t\t\t\tregisterBrushExpectRatio: '',\r\n\t\t\t\t// 新增\r\n\t\t\t\tadvertPrice: '',\r\n\t\t\t\tfrozenCapitalStart:'',\r\n\t\t\t\tfrozenCapitalSize:''\r\n\t\t\t},\r\n\t\t\ttableData1: [],\r\n\t\t\ttableData2: []\r\n\t\t};\r\n\t},\r\n\tcreated() {\r\n\t\tthis.getData();\r\n\t},\r\n\tmethods: {\r\n\t\tedit() {\r\n\t\t\tlet { registerBrushExpectRatio, turnMakeRatio } = this.form;\r\n\t\t\tthis.checked(registerBrushExpectRatio, 1);\r\n\t\t\tthis.checked(turnMakeRatio, 2);\r\n\t\t\tthis.isEdit = true;\r\n\t\t},\r\n\t\treset() {\r\n\t\t\tthis.form = Object.assign({}, this.originForm);\r\n\t\t\tthis.isEdit = false;\r\n\t\t},\r\n\t\tasync getData() {\r\n\t\t\tlet {\r\n\t\t\t\tdata: { data }\r\n\t\t\t} = await this.$axios.post(this.BASE_URL + 'admin/system/basic');\r\n\t\t\tthis.form = Object.assign({}, data);\r\n\t\t\tthis.originForm = Object.assign({}, data);\r\n\t\t},\r\n\r\n\t\tasync confirm() {\r\n\t\t\tthis.$confirm('此操作将更新记录, 是否继续?', '提示', {\r\n\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\ttype: 'warning'\r\n\t\t\t})\r\n\t\t\t\t.then(async () => {\r\n\t\t\t\t\tlet { code, message } = await this.$axios.post(this.BASE_URL + 'admin/system/basic/update', this.form);\r\n\t\t\t\t\tthis.isEdit = false;\r\n\t\t\t\t\tthis.getData();\r\n\t\t\t\t\tthis.$message.success(`修改成功`);\r\n\t\t\t\t})\r\n\t\t\t\t.catch(() => {});\r\n\t\t},\r\n\t\tforamatCheck(data) {\r\n\t\t\tlet isExist = ['advertIncome', 'articleIncome'];\r\n\t\t\tlet isExistText = ['广告收益', '转发支付'];\r\n\t\t\tlet list = [];\r\n\t\t\tlet obj = {};\r\n\t\t\tfor (let key in data) {\r\n\t\t\t\tobj = {};\r\n\t\t\t\tif (isExist.includes(key)) {\r\n\t\t\t\t\tobj.name = isExistText[isExist.indexOf(key)];\r\n\t\t\t\t\tlet arr = data[key].split(',');\r\n\t\t\t\t\tarr.forEach((item, index) => {\r\n\t\t\t\t\t\tobj['advArt' + (index + 1)] = item;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tlist.unshift(obj);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn list;\r\n\t\t},\r\n\t\tasync checked(val, type) {\r\n\t\t\tlet rational = parseInt(val * 100);\r\n\t\t\tlet {\r\n\t\t\t\tdata: { code, data }\r\n\t\t\t} = await this.$axios.post(this.BASE_URL + `admin/system/abatement/generateAbatementConfig?rational=${rational}`);\r\n\t\t\tif (code === '200') {\r\n\t\t\t\tif (type === 1) { //转赚比\r\n\t\t\t\t\tthis.tableData1 = this.foramatCheck(data);\r\n\t\t\t\t}\r\n\t\t\t\tif (type === 2) { //转赚比\r\n\t\t\t\t\tthis.tableData2 = this.foramatCheck(data);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n<style scoped>\r\n.el-form-item__content span {\r\n\twidth: 180px;\r\n\tdisplay: inline-block;\r\n}\r\n.mr10 {\r\n\tmargin-right: 10px;\r\n\twidth: 200px;\r\n}\r\n</style>\n"]}]}