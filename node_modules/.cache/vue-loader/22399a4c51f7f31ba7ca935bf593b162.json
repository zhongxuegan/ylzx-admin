{"remainingRequest":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\src\\main\\advertising\\advertising_position_management.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\src\\main\\advertising\\advertising_position_management.vue","mtime":1598089805299},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\钟学刚\\Desktop\\jfzx-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default {\r\n\tname: 'basetable',\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\t// adUrl: 'http://wz.ad.dawenzz.com.cn/advert_count.html',\r\n\t\t\tadUrl: 'http://test.wz3.ad.sharing662.com/advert_count.html',\r\n\t\t\tuploadAction: this.BASE_URL + 'admin/upload/uploadImgByType',\r\n\r\n\t\t\t// 筛选字段\r\n\t\t\tadvertSpaceCode: 2,\r\n\t\t\tadvertSpaceStatus: 2, //广告位状态\r\n\t\t\tselectId: '', //广告主id\r\n\t\t\tselectKey: '', //广告主名称\r\n\t\t\tstartTime: null,\r\n\t\t\tendTime: null,\r\n\r\n\t\t\ttotalAdvertAmount: 0,\r\n\t\t\ttotalAdvertIpAmountCount: 0,\r\n\t\t\ttotalPurchaseCount: 0,\r\n\r\n\t\t\tadvertSortReadonly: true,\r\n\t\t\tfileList: [],\r\n\t\t\ttableData: [], // 表格数据\r\n\t\t\ttableLoading: true,\r\n\t\t\tpage: 1, // 当前页号\r\n\t\t\tcurrentPage: 1,\r\n\t\t\tcur_total: 0, // 总记录数\r\n\t\t\tpage_size: 50,\r\n\t\t\tmultipleSelection: [],\r\n\t\t\ttokenObj: { token: localStorage.getItem('token') },\r\n\t\t\tuploadImgData: { type: '2' },\r\n\t\t\tselect_cate: '',\r\n\t\t\tselect_word: '',\r\n\t\t\tdel_list: [],\r\n\t\t\teditVisible: false, // 不显示编辑窗口\r\n\t\t\tdelVisible: false,\r\n\t\t\tsize: 10,\r\n\t\t\tadvertStatus: null, //默认广告状态为上架\r\n\t\t\tisBackPage: '',\r\n\t\t\tadTempPosition: 2,\r\n\t\t\tadvertId: null,\r\n\t\t\taddVisible: false, // 不显示广告信息操作表单\r\n\t\t\tdialogImageUrl: '',\r\n\t\t\tdialogImageVisible: false,\r\n\t\t\tadvertStatusArr: [\r\n\t\t\t\t{\r\n\t\t\t\t\tdictValue: '',\r\n\t\t\t\t\tdictName: '全部'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tdictValue: 2,\r\n\t\t\t\t\tdictName: '上架'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tdictValue: 3,\r\n\t\t\t\t\tdictName: '下架'\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tadvertSpaceCodeList: [\r\n\t\t\t\t{ value: 1, name: '顶部banner' },\r\n\t\t\t\t{ value: 2, name: '底部' },\r\n\t\t\t\t{ value: 3, name: '文字链接' },\r\n\t\t\t\t{ value: 4, name: '后退页' },\r\n\t\t\t\t{ value: 5, name: '底部悬浮窗' },\r\n\t\t\t\t{ value: 6, name: '文章内页' }\r\n\t\t\t],\r\n\t\t\tbackPageList: [{ value: '', name: '全部' }, { value: '1', name: '展示' }, { value: '0', name: '不展示' }],\r\n\t\t\tbottomAdvert: {\r\n\t\t\t\tadvertId: '',\r\n\t\t\t\tadvertSpaceStatus: null,\r\n\t\t\t\tadvertSpaceCode: 2,\r\n\t\t\t\tadvertTitle: '',\r\n\t\t\t\tadvertCoverPicture: '',\r\n\t\t\t\tadvertSort: -1,\r\n\t\t\t\tisBackPage: '0',\r\n\t\t\t\tisBanner: '0',\r\n\t\t\t\ttitleIsRed: '0',\r\n\t\t\t\ttitleIsStrong: '0'\r\n\t\t\t},\r\n\t\t\ttopAdvert: {\r\n\t\t\t\tadvertId: '',\r\n\t\t\t\tadvertSpaceStatus: null,\r\n\t\t\t\tadvertSpaceCode: 1,\r\n\t\t\t\tadvertTitle: '',\r\n\t\t\t\tadvertCoverPicture: '',\r\n\t\t\t\tadvertSort: -1,\r\n\t\t\t\tisBackPage: '0',\r\n\t\t\t\tisBanner: '0',\r\n\t\t\t\ttitleIsRed: '0',\r\n\t\t\t\ttitleIsStrong: '0'\r\n\t\t\t},\r\n\t\t\twordAdvert: {\r\n\t\t\t\tadvertId: '',\r\n\t\t\t\tadvertSpaceStatus: null,\r\n\t\t\t\tadvertSpaceCode: 3,\r\n\t\t\t\tadvertTitle: '',\r\n\t\t\t\tadvertCoverPicture: '',\r\n\t\t\t\tadvertSort: -1,\r\n\t\t\t\tisBackPage: '0',\r\n\t\t\t\tisBanner: '0',\r\n\t\t\t\ttitleIsRed: '0',\r\n\t\t\t\ttitleIsStrong: '0'\r\n\t\t\t},\r\n\t\t\tbottomFixedAdvert: {\r\n\t\t\t\tadvertId: '',\r\n\t\t\t\tadvertSpaceStatus: null,\r\n\t\t\t\tadvertSpaceCode: 5,\r\n\t\t\t\tadvertTitle: '',\r\n\t\t\t\tadvertCoverPicture: '',\r\n\t\t\t\tadvertSort: -1,\r\n\t\t\t\tisBackPage: '0',\r\n\t\t\t\tisBanner: '0',\r\n\t\t\t\ttitleIsRed: '0',\r\n\t\t\t\ttitleIsStrong: '0'\r\n\t\t\t},\r\n\t\t\tarticleInteriorAdvert: {\r\n\t\t\t\tadvertId: '',\r\n\t\t\t\tadvertSpaceStatus: null,\r\n\t\t\t\tadvertSpaceCode: 6,\r\n\t\t\t\tadvertTitle: '',\r\n\t\t\t\tadvertCoverPicture: '',\r\n\t\t\t\tadvertSort: -1,\r\n\t\t\t\tisBackPage: '0',\r\n\t\t\t\tisBanner: '0',\r\n\t\t\t\ttitleIsRed: '0',\r\n\t\t\t\ttitleIsStrong: '0'\r\n\t\t\t},\r\n\t\t\tadvertDto: {\r\n\t\t\t\tgroupId: -1,\r\n\t\t\t\tgroupName: '',\r\n\t\t\t\tmaxAdvertSort: -1,\r\n\t\t\t\tadvertId: '',\r\n\t\t\t\tskipUrl: '',\r\n\t\t\t\tadvertStatus: 2,\r\n\t\t\t\tpurchaseCount: null,\r\n\t\t\t\tprepareSkipUrl: null,\r\n\t\t\t\tadvertAmount: '',\r\n\t\t\t\treaderType: '',\r\n\t\t\t\tadvertList: []\r\n\t\t\t},\r\n\t\t\trules: {\r\n\t\t\t\tgroupId: [{ required: true, message: '请输入广告主ID', trigger: 'blur' }],\r\n\t\t\t\tgroupName: [{ required: true, message: '请输入广告名称', trigger: 'blur' }],\r\n\t\t\t\tskipUrl: [{ required: true, message: '请输入跳转链接', trigger: 'blur' }],\r\n\t\t\t\tadvertStatus: [{ required: true, message: '请选择状态', trigger: 'change' }],\r\n\t\t\t\tpurchaseCount: [{ required: true, message: '请输入广告投放量', trigger: 'blur' }],\r\n\t\t\t\tadvertAmount: [{ required: true, message: '请输入广告金额', trigger: 'blur' }],\r\n\t\t\t\treaderType: [{ required: true, message: '请选择广告读者', trigger: 'change' }]\r\n\t\t\t},\r\n\t\t\tmakeData: [\r\n\t\t\t\t{\r\n\t\t\t\t\tformRef: 'form1',\r\n\t\t\t\t\tformModel: {},\r\n\t\t\t\t\tadvertSortInputDisable: false,\r\n\t\t\t\t\timgFileList: [],\r\n\t\t\t\t\tformShow: true,\r\n\t\t\t\t\tformName: '第1条广告'\r\n\t\t\t\t}\r\n\t\t\t], // 生成表单所使用的模板\r\n\t\t\tadvertStatusSelectOption: [\r\n\t\t\t\t{\r\n\t\t\t\t\tdictValue: 1,\r\n\t\t\t\t\tdictName: '未上架'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tdictValue: 2,\r\n\t\t\t\t\tdictName: '上架'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tdictValue: 3,\r\n\t\t\t\t\tdictName: '下架'\r\n\t\t\t\t}\r\n\t\t\t] // 广告信息操作表单广告状态下拉框\r\n\t\t};\r\n\t},\r\n\tcreated() {\r\n\t\tthis.getData();\r\n\t\tthis.getAdvertList();\r\n\t},\r\n\tactivated() {\r\n\t\tthis.getData();\r\n\t},\r\n\tmethods: {\r\n\t\tstartTimeChange() {\r\n\t\t\tif (this.startTime > this.endTime) {\r\n\t\t\t\tthis.$message({\r\n\t\t\t\t\tmessage: '起始日期不得大于结束日期',\r\n\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t});\r\n\t\t\t\tthis.startTime = this.endTime;\r\n\t\t\t}\r\n\t\t},\r\n\t\tendTimeChange() {\r\n\t\t\tif (this.startTime > this.endTime) {\r\n\t\t\t\tthis.$message({\r\n\t\t\t\t\tmessage: '结束日期不得小于起始日期',\r\n\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t});\r\n\t\t\t\tthis.endTime = this.startTime;\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 分页导航\r\n\t\thandleCurrentChange(val) {\r\n\t\t\tthis.currentPage = val;\r\n\t\t\tthis.page = val;\r\n\t\t\tthis.getData();\r\n\t\t},\r\n\t\thandleSizeChange(cur_size) {\r\n\t\t\tthis.size = cur_size;\r\n\t\t\tthis.currentPage = 1;\r\n\t\t\tthis.page = 1;\r\n\t\t\tthis.getData();\r\n\t\t},\r\n\t\toperateListToNumber(list) {\r\n\t\t\tif (!Array.isArray(list)) return;\r\n\t\t\treturn list.filter(item => {\r\n\t\t\t\titem.dictValue = Number(item.dictValue);\r\n\t\t\t\tif (item.dictValue !== 1) return item;\r\n\t\t\t});\r\n\t\t},\r\n\t\tasync handleRefresh() {\r\n\t\t\tlet url = this.BASE_URL + `admin/advert/space/realTimeUpdateAdvertSpace`;\r\n\t\t\tthis.$axios\r\n\t\t\t\t.post(url, {\r\n\t\t\t\t\tpage: this.page,\r\n\t\t\t\t\tsize: this.page_size,\r\n\t\t\t\t\tselectKey: this.selectKey,\r\n\t\t\t\t\tgroupId: this.groupId,\r\n\t\t\t\t\tadvertStatus: this.advertStatus === null ? 2 : this.advertStatus,\r\n\t\t\t\t\tadvertSpaceStatus: this.advertSpaceStatus === null ? 2 : this.advertSpaceStatus,\r\n\t\t\t\t\tadvertSpaceCode: this.advertSpaceCode ? this.advertSpaceCode : 2,\r\n\t\t\t\t\tisBackPage: this.isBackPage\r\n\r\n\t\t\t\t\t// advertSort: \"2\"\r\n\t\t\t\t})\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tconst list = res.data.data.list;\r\n\t\t\t\t\tthis.tableData = this.operateList(list);\r\n\t\t\t\t\tthis.cur_total = res.data.data.total;\r\n\t\t\t\t});\r\n\t\t},\r\n\t\tasync getAdvertList() {\r\n\t\t\tlet {\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tdata: { dictionaryList }\r\n\t\t\t\t}\r\n\t\t\t} = await this.$axios.post(this.BASE_URL + 'admin/advert/space/initAdvertFromData', {});\r\n\t\t\tthis.advertStatusSelectOption = this.operateListToNumber(dictionaryList);\r\n\t\t},\r\n\r\n\t\t// 如果底部的状态是上架状态，\r\n\t\tasync changeBottomAdvertStatus(val) {\r\n\t\t\tif (val == 2) {\r\n\t\t\t\tlet {\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tadvertMaxDto: { maxAdvertSort }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} = await this.$axios.post(this.BASE_URL + 'admin/advert/space/initAdvertFromData', {});\r\n\t\t\t\tthis.bottomAdvert.advertSort = maxAdvertSort + 1;\r\n\t\t\t\tthis.advertSortReadonly = false;\r\n\t\t\t} else {\r\n\t\t\t\tthis.bottomAdvert.advertSort = -1;\r\n\t\t\t\tthis.advertSortReadonly = true;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// 如果主广告下架，那么其他的三个部位的广告（如果有广告选择状态的话）要将它进行下架\r\n\t\tchangeAdvertStatus() {\r\n\t\t\tif (this.advertDto.advertStatus === 3) {\r\n\t\t\t\tthis.bottomAdvert.advertSort = -1;\r\n\t\t\t\tthis.advertSortReadonly = true;\r\n\t\t\t\tif (this.bottomAdvert.advertSpaceStatus) {\r\n\t\t\t\t\tthis.bottomAdvert.advertSpaceStatus = 3;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.topAdvert.advertSpaceStatus) {\r\n\t\t\t\t\tthis.topAdvert.advertSpaceStatus = 3;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.wordAdvert.advertSpaceStatus) {\r\n\t\t\t\t\tthis.wordAdvert.advertSpaceStatus = 3;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.bottomFixedAdvert.advertSpaceStatus) {\r\n\t\t\t\t\tthis.bottomFixedAdvert.advertSpaceStatus = 3;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.articleInteriorAdvert.advertSpaceStatus) {\r\n\t\t\t\t\tthis.articleInteriorAdvert.advertSpaceStatus = 3;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\toperateList(list) {\r\n\t\t\tlet that = this;\r\n\t\t\tif (!Array.isArray(list)) return;\r\n\t\t\tlist.map(item => {\r\n\t\t\t\titem.isBanner = item.isBanner.toString();\r\n\t\t\t\titem.isBackPage = item.isBackPage.toString();\r\n\t\t\t\titem.advertCoverPicture = item.advertCoverPicture.split(',');\r\n\t\t\t});\r\n\t\t\treturn list;\r\n\t\t},\r\n\t\t// 获取 easy-mock 的模拟数据\r\n\t\tasync getData() {\r\n\t\t\tif (this.isBackPage === 1) {\r\n\t\t\t\tthis.adTempPosition = 2;\r\n\t\t\t} else {\r\n\t\t\t\tthis.adTempPosition = this.advertSpaceCode;\r\n\t\t\t}\r\n\t\t\tlet postData = {\r\n\t\t\t\tpage: this.page,\r\n\t\t\t\tsize: this.size,\r\n\t\t\t\tselectKey: this.selectKey,\r\n\t\t\t\tgroupId: this.selectId,\r\n\t\t\t\tstartTime: this.startTime,\r\n\t\t\t\tendTime: this.endTime,\r\n\t\t\t\tadvertStatus: this.advertStatus === null ? 2 : this.advertStatus,\r\n\t\t\t\tadvertSpaceStatus: this.advertSpaceStatus === null ? 2 : this.advertSpaceStatus,\r\n\t\t\t\tadvertSpaceCode: this.adTempPosition,\r\n\t\t\t\tisBackPage: this.isBackPage\r\n\t\t\t};\r\n\t\t\tthis.url = this.BASE_URL + 'admin/advert/space/list';\r\n\t\t\tlet {\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tpageInfo: { list, total },\r\n\t\t\t\t\t\ttotalAdvertAmount,\r\n\t\t\t\t\t\ttotalAdvertIpAmountCount,\r\n\t\t\t\t\t\ttotalPurchaseCount\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} = await this.$axios.post(this.url, postData);\r\n\t\t\tthis.totalAdvertAmount = totalAdvertAmount;\r\n\t\t\tthis.totalAdvertIpAmountCount = totalAdvertIpAmountCount;\r\n\t\t\tthis.totalPurchaseCount = totalPurchaseCount;\r\n\t\t\tthis.tableData = this.operateList(list);\r\n\t\t\tthis.cur_total = total;\r\n\t\t\tthis.tableLoading = false;\r\n\t\t},\r\n\r\n\t\t//根据ID获取广告所有数据\r\n\t\tasync getAdvertById() {\r\n\t\t\tlet url = this.BASE_URL + 'admin/advert/space/getAdvertById';\r\n\t\t\tlet {\r\n\t\t\t\tdata: { data }\r\n\t\t\t} = await this.$axios.post(url, { advertId: this.advertId });\r\n\t\t\tthis.makeEditData(data);\r\n\t\t},\r\n\r\n\t\t// 根据广告位的code取到对应的对象\r\n\t\tfindObjByCode(list, code) {\r\n\t\t\tlet result = '';\r\n\t\t\tif (!Array.isArray(list)) return;\r\n\t\t\tresult = list.find(item => {\r\n\t\t\t\treturn item.advertSpaceCode === code;\r\n\t\t\t});\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\t// 编辑的时候生成相应的广告对象\r\n\t\tmakeEditData(data) {\r\n\t\t\tlet { advertStatus, purchaseCount, skipUrl, groupName, groupId, advertId, incrementPercent, prepareSkipUrl, advertList, readerType, advertAmount } = data;\r\n\t\t\tthis.advertDto = {\r\n\t\t\t\tadvertId,\r\n\t\t\t\tgroupId,\r\n\t\t\t\tgroupName,\r\n\t\t\t\tskipUrl,\r\n\t\t\t\tpurchaseCount,\r\n\t\t\t\tincrementPercent,\r\n\t\t\t\tadvertStatus,\r\n\t\t\t\tprepareSkipUrl,\r\n\t\t\t\treaderType,\r\n\t\t\t\tadvertAmount\r\n\t\t\t};\r\n\t\t\tthis.bottomAdvert = {\r\n\t\t\t\tadvertId: '',\r\n\t\t\t\tadvertSpaceStatus: null,\r\n\t\t\t\tadvertSpaceCode: 2,\r\n\t\t\t\tadvertTitle: '',\r\n\t\t\t\tadvertCoverPicture: '',\r\n\t\t\t\tadvertSort: -1,\r\n\t\t\t\tisBackPage: '0',\r\n\t\t\t\tisBanner: '0',\r\n\t\t\t\ttitleIsRed: '0',\r\n\t\t\t\ttitleIsStrong: '0'\r\n\t\t\t};\r\n\t\t\tthis.topAdvert = {\r\n\t\t\t\tadvertId: '',\r\n\t\t\t\tadvertSpaceStatus: null,\r\n\t\t\t\tadvertSpaceCode: 1,\r\n\t\t\t\tadvertTitle: '',\r\n\t\t\t\tadvertCoverPicture: '',\r\n\t\t\t\tadvertSort: -1,\r\n\t\t\t\tisBackPage: '0',\r\n\t\t\t\tisBanner: '0',\r\n\t\t\t\ttitleIsRed: '0',\r\n\t\t\t\ttitleIsStrong: '0'\r\n\t\t\t};\r\n\t\t\tthis.wordAdvert = {\r\n\t\t\t\tadvertId: '',\r\n\t\t\t\tadvertSpaceStatus: null,\r\n\t\t\t\tadvertSpaceCode: 3,\r\n\t\t\t\tadvertTitle: '',\r\n\t\t\t\tadvertCoverPicture: '',\r\n\t\t\t\tadvertSort: -1,\r\n\t\t\t\tisBackPage: '0',\r\n\t\t\t\tisBanner: '0',\r\n\t\t\t\ttitleIsRed: '0',\r\n\t\t\t\ttitleIsStrong: '0'\r\n\t\t\t};\r\n\t\t\tthis.bottomFixedAdvert = {\r\n\t\t\t\tadvertId: '',\r\n\t\t\t\tadvertSpaceStatus: null,\r\n\t\t\t\tadvertSpaceCode: 5,\r\n\t\t\t\tadvertTitle: '',\r\n\t\t\t\tadvertCoverPicture: '',\r\n\t\t\t\tadvertSort: -1,\r\n\t\t\t\tisBackPage: '0',\r\n\t\t\t\tisBanner: '0',\r\n\t\t\t\ttitleIsRed: '0',\r\n\t\t\t\ttitleIsStrong: '0'\r\n\t\t\t};\r\n\t\t\tthis.articleInteriorAdvert = {\r\n\t\t\t\tadvertId: '',\r\n\t\t\t\tadvertSpaceStatus: null,\r\n\t\t\t\tadvertSpaceCode: 6,\r\n\t\t\t\tadvertTitle: '',\r\n\t\t\t\tadvertCoverPicture: '',\r\n\t\t\t\tadvertSort: -1,\r\n\t\t\t\tisBackPage: '0',\r\n\t\t\t\tisBanner: '0',\r\n\t\t\t\ttitleIsRed: '0',\r\n\t\t\t\ttitleIsStrong: '0'\r\n\t\t\t};\r\n\t\t\tif (advertList && advertList.length > 0) {\r\n\t\t\t\tthis.bottomAdvert = this.findObjByCode(advertList, 2) ? this.findObjByCode(advertList, 2) : this.bottomAdvert;\r\n\t\t\t\tthis.changeadvertSortReadonly(this.bottomAdvert.advertSpaceStatus);\r\n\t\t\t\tthis.bottomAdvert.isBackPage = this.bottomAdvert.isBackPage.toString();\r\n\t\t\t\tthis.bottomAdvert.isBanner = this.bottomAdvert.isBanner.toString();\r\n\t\t\t\tthis.bottomAdvert.titleIsStrong = this.bottomAdvert.titleIsStrong.toString();\r\n\t\t\t\tthis.bottomAdvert.titleIsRed = this.bottomAdvert.titleIsRed.toString();\r\n\t\t\t\t// this.fileList = this.stringToArr(this.bottomAdvert.advertCoverPicture);\r\n\t\t\t\tthis.topAdvert = this.findObjByCode(advertList, 1) ? this.findObjByCode(advertList, 1) : this.topAdvert;\r\n\t\t\t\tthis.wordAdvert = this.findObjByCode(advertList, 3) ? this.findObjByCode(advertList, 3) : this.wordAdvert;\r\n\t\t\t\tthis.bottomFixedAdvert = this.findObjByCode(advertList, 5) ? this.findObjByCode(advertList, 5) : this.bottomFixedAdvert;\r\n\t\t\t\tthis.articleInteriorAdvert = this.findObjByCode(advertList, 6) ? this.findObjByCode(advertList, 6) : this.articleInteriorAdvert;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tchangeadvertSortReadonly(status) {\r\n\t\t\tif (Number(status) === 2) {\r\n\t\t\t\tthis.advertSortReadonly = false;\r\n\t\t\t} else {\r\n\t\t\t\tthis.advertSortReadonly = true;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// stringToArr(str) {\r\n\t\t// \tlet result = [];\r\n\t\t// \tlet tempArr = str.split(',');\r\n\t\t// \tfor (let i = 0; i < tempArr.length; i++) {\r\n\t\t// \t\tresult.push({\r\n\t\t// \t\t\tid: i,\r\n\t\t// \t\t\turl: tempArr[i]\r\n\t\t// \t\t});\r\n\t\t// \t}\r\n\t\t// \treturn result;\r\n\t\t// },\r\n\t\tformaterAdvertSpaceCode(row, column, cellValue, index) {\r\n\t\t\tlet result = '';\r\n\t\t\tif (Number(row.isBackPage) === 1) {\r\n\t\t\t\tresult = '后退页';\r\n\t\t\t} else {\r\n\t\t\t\tresult = cellValue === 1 ? '顶部banner' : cellValue === 2 ? '底部' : cellValue === 3 ? '文字链接' : cellValue === 6 ? '文章内页' : '底部悬浮窗';\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t\t// return cellValue === 1 ? '顶部banner' : cellValue === 2 ? '底部' :'文字链接'\r\n\t\t},\r\n\t\tformaterAdvertStatus(row, column, cellValue, index) {\r\n\t\t\treturn cellValue === 1 ? '未上架' : cellValue === 2 ? '上架' : '下架';\r\n\t\t},\r\n\t\tformaterPercentage(row, column, cellValue, index) {\r\n\t\t\treturn cellValue * 100 + '%';\r\n\t\t},\r\n\t\tformaterReader(row, column, cellValue, index) {\r\n\t\t\tlet result;\r\n\t\t\tif (cellValue === 0) result = '全部';\r\n\t\t\tif (cellValue === 1) result = '转发者';\r\n\t\t\tif (cellValue === 2) result = '阅读者';\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\thandleEdit(index, row) {\r\n\t\t\tthis.advertId = row.advertId;\r\n\t\t\tthis.getAdvertById();\r\n\t\t\tthis.addVisible = true;\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tthis.$refs['advertDto'].clearValidate();\r\n\t\t\t});\r\n\t\t},\r\n\t\thandleAdvertCount(index, row) {\r\n\t\t\twindow.open(this.adUrl + '?adGroupId=' + row.groupId + '&purchaseCount=' + row.purchaseCount);\r\n\t\t},\r\n\r\n\t\tfindChildAdvertId() {\r\n\t\t\tlet tempAdvertId;\r\n\t\t\tif (this.bottomAdvert.advertId) {\r\n\t\t\t\ttempAdvertId = this.bottomAdvert.advertId;\r\n\t\t\t}\r\n\t\t\tif (this.topAdvert.advertId) {\r\n\t\t\t\ttempAdvertId = this.topAdvert.advertId;\r\n\t\t\t}\r\n\t\t\tif (this.wordAdvert.advertId) {\r\n\t\t\t\ttempAdvertId = this.wordAdvert.advertId;\r\n\t\t\t}\r\n\t\t\tif (this.bottomFixedAdvert.advertId) {\r\n\t\t\t\ttempAdvertId = this.bottomFixedAdvert.advertId;\r\n\t\t\t}\r\n\t\t\tif (this.articleInteriorAdvert.advertId) {\r\n\t\t\t\ttempAdvertId = this.articleInteriorAdvert.advertId;\r\n\t\t\t}\r\n\t\t\treturn tempAdvertId;\r\n\t\t},\r\n\r\n\t\t// joinArrayItem(arr) {\r\n\t\t// \tlet resultArr = [];\r\n\t\t// \tlet str = '';\r\n\t\t// \tfor (let i = 0; i < arr.length; i++) {\r\n\t\t// \t\tresultArr.push(arr[i].url);\r\n\t\t// \t}\r\n\t\t// \tstr = resultArr.join(',');\r\n\t\t// \treturn str;\r\n\t\t// },\r\n\r\n\t\t// 如果用户填写了三个广告位则加入到advertList传给后台\r\n\t\tpushAdvertIntoAdvertList() {\r\n\t\t\tlet advertId = this.findChildAdvertId();\r\n\t\t\tlet result = [];\r\n\t\t\tif (this.bottomAdvert.advertSpaceStatus) {\r\n\t\t\t\tthis.bottomAdvert.advertId = advertId;\r\n\t\t\t\t// this.bottomAdvert.advertCoverPicture = this.joinArrayItem(this.fileList);\r\n\t\t\t\tresult.push(this.bottomAdvert);\r\n\t\t\t}\r\n\t\t\tif (this.topAdvert.advertSpaceStatus) {\r\n\t\t\t\tthis.topAdvert.advertId = advertId;\r\n\t\t\t\tresult.push(this.topAdvert);\r\n\t\t\t}\r\n\t\t\tif (this.wordAdvert.advertSpaceStatus) {\r\n\t\t\t\tthis.wordAdvert.advertId = advertId;\r\n\t\t\t\tresult.push(this.wordAdvert);\r\n\t\t\t}\r\n\t\t\tif (this.bottomFixedAdvert.advertSpaceStatus) {\r\n\t\t\t\tthis.bottomFixedAdvert.advertId = advertId;\r\n\t\t\t\tresult.push(this.bottomFixedAdvert);\r\n\t\t\t}\r\n\t\t\tif (this.articleInteriorAdvert.advertSpaceStatus) {\r\n\t\t\t\tthis.articleInteriorAdvert.advertId = advertId;\r\n\t\t\t\tresult.push(this.articleInteriorAdvert);\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\r\n\t\t// 校验各个部位广告的字段\r\n\t\tcheckAdvert() {\r\n\t\t\tlet result = [];\r\n\t\t\t// 1:未上架  2:上架  3:下架\r\n\t\t\t// 如果总状态为下架状态，三个广告位状态都为下架状态 则提示总状态改成上架状态\r\n\t\t\tif (this.advertDto.advertStatus !== 2) {\r\n\t\t\t\tif (\r\n\t\t\t\t\tthis.bottomAdvert.advertSpaceStatus === 2 ||\r\n\t\t\t\t\tthis.topAdvert.advertSpaceStatus === 2 ||\r\n\t\t\t\t\tthis.wordAdvert.advertSpaceStatus === 2 ||\r\n\t\t\t\t\tthis.bottomFixedAdvert.advertSpaceStatus === 2 ||\r\n\t\t\t\t\tthis.articleInteriorAdvert.advertSpaceStatus === 2\r\n\t\t\t\t) {\r\n\t\t\t\t\tresult.push('总广告位与子广告位状态不一样，请修改状态');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.advertDto.advertStatus === 2) {\r\n\t\t\t\tif (\r\n\t\t\t\t\tthis.bottomAdvert.advertSpaceStatus !== 2 &&\r\n\t\t\t\t\tthis.topAdvert.advertSpaceStatus !== 2 &&\r\n\t\t\t\t\tthis.wordAdvert.advertSpaceStatus !== 2 &&\r\n\t\t\t\t\tthis.bottomFixedAdvert.advertSpaceStatus !== 2 &&\r\n\t\t\t\t\tthis.articleInteriorAdvert.advertSpaceStatus === 2\r\n\t\t\t\t) {\r\n\t\t\t\t\tresult.push('总广告位与子广告位状态不一样，请修改状态');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// 底部广告\r\n\t\t\tif (this.bottomAdvert.advertSpaceStatus) {\r\n\t\t\t\t// this.bottomAdvert.advertCoverPicture = this.joinArrayItem(this.fileList);\r\n\t\t\t\tif (this.bottomAdvert.isBanner === '0') {\r\n\t\t\t\t\tif (this.bottomAdvert.advertTitle.trim() === '' || this.bottomAdvert.advertTitle === null) {\r\n\t\t\t\t\t\tresult.push('底部广告标题不能为空');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (this.bottomAdvert.advertCoverPicture.trim() === '' || this.bottomAdvert.advertCoverPicture === null) {\r\n\t\t\t\t\tresult.push('底部广告封面图不能为空');\r\n\t\t\t\t}\r\n\t\t\t\tif (this.bottomAdvert.advertSort.toString().trim() === '' || this.bottomAdvert.advertSort === null) {\r\n\t\t\t\t\tresult.push('底部排序不能为空');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//顶部广告\r\n\t\t\tif (this.topAdvert.advertSpaceStatus) {\r\n\t\t\t\tif (this.topAdvert.advertCoverPicture.trim() === '' || this.topAdvert.advertCoverPicture === null) {\r\n\t\t\t\t\tresult.push('顶部广告封面图不能为空');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// 文字广告\r\n\t\t\tif (this.wordAdvert.advertSpaceStatus) {\r\n\t\t\t\tif (this.wordAdvert.advertTitle.trim() === '' || this.wordAdvert.advertTitle === null) {\r\n\t\t\t\t\tresult.push('文字广告标题不能为空');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet message = result.toString();\r\n\t\t\tif (message) {\r\n\t\t\t\tthis.$message({\r\n\t\t\t\t\tmessage: message,\r\n\t\t\t\t\ttype: 'error'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn result.length <= 0;\r\n\t\t},\r\n\r\n\t\thandleAdd() {\r\n\t\t\tthis.$router.push('/advertising_position_management_add');\r\n\t\t},\r\n\t\t// 新增保存\r\n\t\thandleSumbit() {\r\n\t\t\t// 保存\r\n\t\t\tthis.$refs['advertDto'].validate(valid => {\r\n\t\t\t\tif (valid) {\r\n\t\t\t\t\tthis.$confirm('确认以上信息无误？提交了不能更改', '提示', {\r\n\t\t\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\tif (this.checkAdvert()) {\r\n\t\t\t\t\t\t\t\tthis.advertDto.advertList = this.pushAdvertIntoAdvertList();\r\n\t\t\t\t\t\t\t\tthis.makeData.advertDto = this.advertDto;\r\n\t\t\t\t\t\t\t\tthis.saveAdvertInfo();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(error => {});\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tasync saveAdvertInfo() {\r\n\t\t\tthis.makeData[0].advertDto = this.advertDto;\r\n\t\t\tawait this.$axios.post(this.BASE_URL + 'admin/advert/space/saveAdvertInfo', this.makeData);\r\n\t\t\tthis.addVisible = false;\r\n\t\t\tthis.getData();\r\n\t\t\tthis.$message({\r\n\t\t\t\tmessage: '新增成功',\r\n\t\t\t\ttype: 'success'\r\n\t\t\t});\r\n\t\t},\r\n\t\t// changeBannerStatus(id, isBanner) {\r\n\t\t// \tconst formData = new FormData();\r\n\t\t// \tformData.append('id', id);\r\n\t\t// \tformData.append('isBanner', isBanner == true ? 1 : 0);\r\n\t\t// \tthis.$axios.post(this.BASE_URL + 'admin/advert/space/updateBannerStatus', formData).then(res => {\r\n\t\t// \t\tif (res.data.code == 200) {\r\n\t\t// \t\t\tfor (var i = 0; i < this.tableData.length; i++) {\r\n\t\t// \t\t\t\tif (this.tableData[i].id == id) {\r\n\t\t// \t\t\t\t\tthis.tableData[i].isBanner = isBanner.toString();\r\n\t\t// \t\t\t\t}\r\n\t\t// \t\t\t}\r\n\t\t// \t\t\tthis.$message(res.data.message);\r\n\t\t// \t\t} else {\r\n\t\t// \t\t\tthis.$message(res.data.message);\r\n\t\t// \t\t}\r\n\t\t// \t});\r\n\t\t// },\r\n\t\thandlePictureCardPreview(file) {\r\n\t\t\tthis.dialogImageUrl = file.url;\r\n\t\t\tthis.dialogImageVisible = true;\r\n\t\t},\r\n\t\tfileChange(res, file, index) {\r\n\t\t\t// index: 指向所在那个广告表单\r\n\t\t\tif (index === 0) {\r\n\t\t\t\tthis.bottomAdvert.advertCoverPicture = res.data;\r\n\t\t\t}\r\n\t\t\tif (index === 1) {\r\n\t\t\t\tthis.topAdvert.advertCoverPicture = res.data;\r\n\t\t\t}\r\n\t\t\tif (index === 2) {\r\n\t\t\t\tthis.bottomFixedAdvert.advertCoverPicture = res.data;\r\n\t\t\t}\r\n\t\t\tif (index === 3) {\r\n\t\t\t\tthis.articleInteriorAdvert.advertCoverPicture = res.data;\r\n\t\t\t}\r\n\t\t},\r\n\t\thandleRemoveImg(index) {\r\n\t\t\tif (index === 0) {\r\n\t\t\t\tthis.bottomAdvert.advertCoverPicture = '';\r\n\t\t\t}\r\n\t\t\tif (index === 1) {\r\n\t\t\t\tthis.topAdvert.advertCoverPicture = '';\r\n\t\t\t}\r\n\t\t\tif (index === 2) {\r\n\t\t\t\tthis.bottomFixedAdvert.advertCoverPicture = '';\r\n\t\t\t}\r\n\t\t\tif (index === 3) {\r\n\t\t\t\tthis.articleInteriorAdvert.advertCoverPicture = '';\r\n\t\t\t}\r\n\t\t},\r\n\t\tisLit2M(size) {\r\n\t\t\tif (size / 1024 / 1024 < 2) {\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\tthis.$message({\r\n\t\t\t\t\tmessage: '图片大小不能超过 2MB!'\r\n\t\t\t\t});\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonBeforeUploadImage(file) {\r\n\t\t\tconst isImg = this.isImage(file.name);\r\n\t\t\tconst isLit2M = this.isLit2M(file.size);\r\n\t\t\treturn isImg && isLit2M;\r\n\t\t},\r\n\t\t// handleSuccess(file, fileList) {\r\n\t\t// \tthis.fileList.push({\r\n\t\t// \t\tid: fileList.uid,\r\n\t\t// \t\turl: file.data\r\n\t\t// \t});\r\n\t\t// },\r\n\t\t// handleRemove(file) {\r\n\t\t// \tconst index = this.fileList.findIndex(item => item.id === file.id);\r\n\t\t// \tthis.fileList.splice(index, 1);\r\n\t\t// },\r\n\t\tchangeAdvertSpaceStatus(val) {\r\n\t\t\tthis.page = 1;\r\n\t\t\tif (val === 4) {\r\n\t\t\t\tthis.isBackPage = 1;\r\n\t\t\t} else {\r\n\t\t\t\tthis.isBackPage = 0;\r\n\t\t\t}\r\n\t\t\tif (val == 2) {\r\n\t\t\t\tthis.isBackPage = '';\r\n\t\t\t}\r\n\t\t\tthis.getData();\r\n\t\t},\r\n\r\n\t\tchangeStatus(val) {\r\n\t\t\tthis.advertStatus = val;\r\n\t\t\tthis.page = 1;\r\n\t\t\tthis.getData();\r\n\t\t},\r\n\r\n\t\t// changeAllAdvertStatus(val) {\r\n\t\t// \tthis.page = 1;\r\n\t\t// \tthis.advertSpaceStatus = val;\r\n\t\t// \tthis.getData();\r\n\t\t// },\r\n\r\n\t\t// 以下是校验方法\r\n\t\tisImage(fileName) {\r\n\t\t\t// 判断是否是图片\r\n\t\t\tvar f = fileName;\r\n\t\t\tif (f == null || f == undefined || f == '') {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (!/\\.(?:png|jpg|bmp|gif|PNG|JPG|BMP|GIF|jpeg)$/.test(f)) {\r\n\t\t\t\tthis.$message('类型必须是图片(.png|jpg|bmp|gif|PNG|JPG|BMP|GIF)');\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n};\r\n",{"version":3,"sources":["advertising_position_management.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2XA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"advertising_position_management.vue","sourceRoot":"src/main/advertising","sourcesContent":["<template>\r\n\t<div class=\"table\">\r\n\t\t<div class=\"crumbs\">\r\n\t\t\t<el-breadcrumb separator=\"/\">\r\n\t\t\t\t<el-breadcrumb-item>\r\n\t\t\t\t\t<i class=\"el-icon-lx-cascades\"></i>\r\n\t\t\t\t\t广告位管理\r\n\t\t\t\t</el-breadcrumb-item>\r\n\t\t\t</el-breadcrumb>\r\n\t\t</div>\r\n\t\t<div class=\"container\">\r\n\t\t\t<div class=\"handle-box\">\r\n\t\t\t\t<el-select v-model=\"advertSpaceCode\" placeholder=\"广告位\" class=\"handle-select mr10\" @change=\"changeAdvertSpaceStatus\">\r\n\t\t\t\t\t<el-option v-for=\"op in advertSpaceCodeList\" :key=\"op.value\" :label=\"op.name\" :value=\"op.value\"></el-option>\r\n\t\t\t\t</el-select>\r\n\t\t\t\t<el-select v-model=\"advertSpaceStatus\" placeholder=\"广告位状态\" class=\"handle-select mr10\" @change=\"changeStatus\">\r\n\t\t\t\t\t<el-option v-for=\"op in advertStatusArr\" :key=\"op.dictValue\" :label=\"op.dictName\" :value=\"op.dictValue\"></el-option>\r\n\t\t\t\t</el-select>\r\n\t\t\t\t<el-input v-model=\"selectKey\" clearable style=\"width:140px;margin-right:10px;\" placeholder=\"广告主名称\"></el-input>\r\n\t\t\t\t<el-input v-model=\"selectId\" clearable style=\"width:140px;margin-right:10px;\" placeholder=\"广告主ID\"></el-input>\r\n\t\t\t\t<el-date-picker\r\n\t\t\t\t\ttype=\"date\"\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\tvalue-format=\"yyyy-MM-dd\"\r\n\t\t\t\t\tformat=\"yyyy-MM-dd\"\r\n\t\t\t\t\tplaceholder=\"开始日期\"\r\n\t\t\t\t\tv-model=\"startTime\"\r\n\t\t\t\t\tclass=\"handle-label mr10\"\r\n\t\t\t\t\t@change=\"startTimeChange\"\r\n\t\t\t\t></el-date-picker>\r\n\t\t\t\t<i class=\"line mr10\">-</i>\r\n\t\t\t\t<el-date-picker\r\n\t\t\t\t\ttype=\"date\"\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\tvalue-format=\"yyyy-MM-dd\"\r\n\t\t\t\t\tformat=\"yyyy-MM-dd\"\r\n\t\t\t\t\tplaceholder=\"结束日期\"\r\n\t\t\t\t\tv-model=\"endTime\"\r\n\t\t\t\t\tclass=\"handle-label mr10\"\r\n\t\t\t\t\t@change=\"endTimeChange\"\r\n\t\t\t\t></el-date-picker>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"getData\">搜索</el-button>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"handleRefresh\">刷新</el-button>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"handleAdd\">新增</el-button>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"handle-text\">\r\n\t\t\t\t<div>总广告收入：{{ totalAdvertAmount }}</div>\r\n\t\t\t\t<div>总广告投放量：{{ totalPurchaseCount }}</div>\r\n\t\t\t\t<div>每广告点击收益：{{ totalAdvertIpAmountCount }}元</div>\r\n\t\t\t</div>\r\n\t\t\t<el-table :data=\"tableData\" v-loading=\"tableLoading\" border class=\"table\" ref=\"multipleTable\">\r\n\t\t\t\t<el-table-column prop=\"admin\" label=\"商务ID\" sortable align=\"center\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"advertId\" label=\"广告ID\" sortable align=\"center\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"groupName\" label=\"广告主名称\" align=\"center\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<div>{{ scope.row.groupId }}/{{ scope.row.groupName }}</div>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column prop=\"advertTitle\" label=\"标题\" width=\"160\" align=\"center\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<p v-bind:class=\"{ fontRed: scope.row.titleIsRed, fontBold: scope.row.titleIsStrong }\">{{ scope.row.advertTitle }}</p>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column prop=\"advertCoverPicture\" label=\"封面图\" align=\"center\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<img v-for=\"(item, index) in scope.row.advertCoverPicture\" :src=\"item\" :key=\"index\" width=\"40\" />\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column prop=\"advertSpaceCode\" label=\"广告位置\" :formatter=\"formaterAdvertSpaceCode\" align=\"center\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"advertSpaceStatus\" label=\"状态\" :formatter=\"formaterAdvertStatus\" align=\"center\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"isBanner\" label=\"横幅展示\" align=\"center\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<el-switch v-model=\"scope.row.isBanner\" disabled active-value=\"1\" inactive-value=\"0\" active-color=\"#13ce66\" inactive-color=\"#c1c1c1\"></el-switch>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column prop=\"isBackPage\" label=\"后退页\" align=\"center\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<el-switch v-model=\"scope.row.isBackPage\" disabled active-value=\"1\" inactive-value=\"0\" active-color=\"#13ce66\" inactive-color=\"#c1c1c1\"></el-switch>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column prop=\"purchaseCount\" label=\"广告投放\" align=\"center\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"remainPurchaseCount\" label=\"广告剩余\" align=\"center\"></el-table-column>\r\n\t\t\t\t<!-- <el-table-column prop=\"advertStatus\" label=\"广告状态\" :formatter=\"formaterAdvertStatus\"  align=\"center\"> </el-table-column> -->\r\n\t\t\t\t<el-table-column prop=\"advertSort\" label=\"排序\" sortable align=\"center\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"eachAdvertisingCost\" label=\"广告消耗量\" align=\"center\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"surplusScale\" label=\"剩余占比\" align=\"center\" :formatter=\"formaterPercentage\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"eachAdvertClickIncome\" label=\"每广告点击收益\" align=\"center\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"advertisingCost\" label=\"广告成本\" align=\"center\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"advertGrossProfit\" label=\"广告毛利\" align=\"center\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"advertClickScale\" label=\"广告点击率\" align=\"center\" :formatter=\"formaterPercentage\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"skipUrl\" label=\"跳转链接\" width=\"160\" align=\"center\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"prepareSkipUrl\" label=\"备用跳转链接\" width=\"160\" align=\"center\"></el-table-column>\r\n\t\t\t\t<el-table-column label=\"广告统计\" width=\"180\" align=\"center\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<a href=\"javascript:void(0)\" @click=\"handleAdvertCount(scope.$index, scope.row)\">\r\n\t\t\t\t\t\t\t{{ adUrl }}?adGroupId={{ scope.row.groupId }}&purchaseCount={{ scope.row.purchaseCount }}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column prop=\"readerType\" label=\"广告读者\" align=\"center\" :formatter=\"formaterReader\"></el-table-column>\r\n\t\t\t\t<el-table-column label=\"操作\" align=\"center\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<el-button type=\"primary\" @click=\"handleEdit(scope.$index, scope.row)\">编辑</el-button>\r\n\t\t\t\t\t\t<!-- <el-button type=\"text\" icon=\"el-icon-delete\" class=\"red\" @click=\"handleDelete(scope.$index, scope.row)\">删除</el-button> -->\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t</el-table>\r\n\t\t\t<div class=\"pagination\">\r\n\t\t\t\t<el-pagination\r\n\t\t\t\t\tbackground\r\n\t\t\t\t\t:current-page.sync=\"currentPage\"\r\n\t\t\t\t\t:page-size=\"size\"\r\n\t\t\t\t\t:page-sizes=\"[10, 20, 50, 100]\"\r\n\t\t\t\t\t@size-change=\"handleSizeChange\"\r\n\t\t\t\t\t@current-change=\"handleCurrentChange\"\r\n\t\t\t\t\tlayout=\"total, sizes, prev, pager, next, jumper\"\r\n\t\t\t\t\t:total=\"cur_total\"\r\n\t\t\t\t></el-pagination>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<!-- 新增弹出框 -->\r\n\t\t<el-dialog title=\"编辑\" :visible.sync=\"addVisible\" width=\"60%\">\r\n\t\t\t<el-form label-width=\"100px\" :inline=\"true\" ref=\"advertDto\" :model=\"advertDto\" :rules=\"rules\" class=\"demo-form-inline\">\r\n\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t<el-form-item label=\"广告主id\" prop=\"groupId\"><el-input v-model.number=\"advertDto.groupId\" style=\"width: 192px;\"></el-input></el-form-item>\r\n\t\t\t\t</el-col>\r\n\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t<el-form-item label=\"广告主名称\" prop=\"groupName\"><el-input v-model=\"advertDto.groupName\" style=\"width:192px;\"></el-input></el-form-item>\r\n\t\t\t\t</el-col>\r\n\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t<el-form-item label=\"广告增量比例\" prop=\"incrementPercent  \">\r\n\t\t\t\t\t\t<el-input v-model.number=\"advertDto.incrementPercent\" type=\"number\" style=\"width:192px;\"></el-input>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t</el-col>\r\n\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t<el-form-item label=\"广告投放量\" prop=\"purchaseCount\">\r\n\t\t\t\t\t\t<el-input v-model.number=\"advertDto.purchaseCount\" type=\"number\" min=\"0\" style=\"width: 192px;\"></el-input>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t</el-col>\r\n\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t<el-form-item label=\"跳转链接\" prop=\"skipUrl\"><el-input v-model=\"advertDto.skipUrl\" style=\"width: 192px;\"></el-input></el-form-item>\r\n\t\t\t\t</el-col>\r\n\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t<el-form-item label=\"总状态\" prop=\"advertStatus\">\r\n\t\t\t\t\t\t<el-select v-model=\"advertDto.advertStatus\" @change=\"changeAdvertStatus\" placeholder=\"请选择\" style=\"width:192px;\">\r\n\t\t\t\t\t\t\t<el-option v-for=\"op in advertStatusSelectOption\" :key=\"op.dictName\" :label=\"op.dictName\" :value=\"op.dictValue\"></el-option>\r\n\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t</el-col>\r\n\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t<el-form-item label=\"备用跳转链接\" prop=\"prepareSkipUrl\"><el-input v-model=\"advertDto.prepareSkipUrl\" style=\"width: 192px;\"></el-input></el-form-item>\r\n\t\t\t\t</el-col>\r\n\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t<el-form-item label=\"广告金额\" prop=\"advertAmount\"><el-input v-model=\"advertDto.advertAmount\" style=\"width: 192px;\"></el-input></el-form-item>\r\n\t\t\t\t</el-col>\r\n\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t<el-form-item label=\"广告读者\" prop=\"readerType\">\r\n\t\t\t\t\t\t<el-select v-model=\"advertDto.readerType\" style=\"width: 192px;\" placeholder=\"请选择\">\r\n\t\t\t\t\t\t\t<el-option label=\"全部\" :value=\"0\"></el-option>\r\n\t\t\t\t\t\t\t<el-option label=\"转发者\" :value=\"1\"></el-option>\r\n\t\t\t\t\t\t\t<el-option label=\"阅读者\" :value=\"2\"></el-option>\r\n\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t</el-col>\r\n\t\t\t\t<section style=\"display:block;clear:both;\">\r\n\t\t\t\t\t<el-divider></el-divider>\r\n\t\t\t\t\t<p class=\"section--title\">底部广告位</p>\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"状态\">\r\n\t\t\t\t\t\t\t<el-select v-model=\"bottomAdvert.advertSpaceStatus\" placeholder=\"请选择\" style=\"width: 192px;\" @change=\"changeBottomAdvertStatus\">\r\n\t\t\t\t\t\t\t\t<el-option v-for=\"op in advertStatusSelectOption\" :key=\"op.dictValue\" :label=\"op.dictName\" :value=\"op.dictValue\"></el-option>\r\n\t\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"排序\" prop=\"advertSort\">\r\n\t\t\t\t\t\t\t<el-input v-model=\"bottomAdvert.advertSort\" :readonly=\"advertSortReadonly\" style=\"width: 192px;\"></el-input>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"横幅展示\">\r\n\t\t\t\t\t\t\t<el-switch v-model=\"bottomAdvert.isBanner\" active-color=\"#13ce66\" inactive-color=\"#ccc\" active-value=\"1\" inactive-value=\"0\"></el-switch>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"后退页\">\r\n\t\t\t\t\t\t\t<el-switch v-model=\"bottomAdvert.isBackPage\" active-color=\"#13ce66\" inactive-color=\"#ccc\" active-value=\"1\" inactive-value=\"0\"></el-switch>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"是否描红\">\r\n\t\t\t\t\t\t\t<el-switch v-model=\"bottomAdvert.titleIsRed\" active-color=\"#ff0000\" inactive-color=\"#ccc\" active-value=\"1\" inactive-value=\"0\"></el-switch>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"是否加粗\">\r\n\t\t\t\t\t\t\t<el-switch v-model=\"bottomAdvert.titleIsStrong\" active-color=\"#000\" inactive-color=\"#ccc\" active-value=\"1\" inactive-value=\"0\"></el-switch>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<el-col :span=\"24\">\r\n\t\t\t\t\t\t<el-form-item label=\"标题\"><el-input v-model=\"bottomAdvert.advertTitle\" style=\"width: 552px;\"></el-input></el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<el-col :span=\"24\">\r\n\t\t\t\t\t\t<el-form-item label=\"广告封面图\" prop=\"covertPicture\">\r\n\t\t\t\t\t\t\t<div class=\"upload-box\">\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<el-upload\r\n\t\t\t\t\t\t\t\t\t\t:action=\"uploadAction\"\r\n\t\t\t\t\t\t\t\t\t\tref=\"upload\"\r\n\t\t\t\t\t\t\t\t\t\tlist-type=\"picture-card\"\r\n\t\t\t\t\t\t\t\t\t\t:headers=\"tokenObj\"\r\n\t\t\t\t\t\t\t\t\t\t:data=\"uploadImgData\"\r\n\t\t\t\t\t\t\t\t\t\t:show-file-list=\"false\"\r\n\t\t\t\t\t\t\t\t\t\t:before-upload=\"onBeforeUploadImage\"\r\n\t\t\t\t\t\t\t\t\t\t:on-success=\"\r\n\t\t\t\t\t\t\t\t\t\t\t(res, file) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn fileChange(res, file, 0);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t\t\t\t\t:on-preview=\"handlePictureCardPreview\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<img v-if=\"bottomAdvert.advertCoverPicture\" :src=\"bottomAdvert.advertCoverPicture\" class=\"avatar\" />\r\n\t\t\t\t\t\t\t\t\t\t<i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n\t\t\t\t\t\t\t\t\t</el-upload>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<el-button class=\"upload-box-btn\" @click=\"handleRemoveImg(0)\">清空</el-button>\r\n\t\t\t\t\t\t\t\t<div class=\"tip\"><p>封面图规格180*180，横幅规格750*180，大小不超过2M</p></div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t</section>\r\n\t\t\t\t<section style=\"display:block;clear:both;\">\r\n\t\t\t\t\t<el-divider></el-divider>\r\n\t\t\t\t\t<p class=\"section--title\">顶部Banner广告位</p>\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"状态\">\r\n\t\t\t\t\t\t\t<el-select v-model=\"topAdvert.advertSpaceStatus\" placeholder=\"请选择\" style=\"width: 100%;\">\r\n\t\t\t\t\t\t\t\t<el-option v-for=\"op in advertStatusSelectOption\" :key=\"op.dictValue\" :label=\"op.dictName\" :value=\"op.dictValue\"></el-option>\r\n\t\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<el-col :span=\"24\">\r\n\t\t\t\t\t\t<el-form-item label=\"广告封面图\" prop=\"covertPicture\">\r\n\t\t\t\t\t\t\t<div class=\"upload-box\">\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<el-upload\r\n\t\t\t\t\t\t\t\t\t\t:action=\"uploadAction\"\r\n\t\t\t\t\t\t\t\t\t\tref=\"upload\"\r\n\t\t\t\t\t\t\t\t\t\tlist-type=\"picture-card\"\r\n\t\t\t\t\t\t\t\t\t\t:headers=\"tokenObj\"\r\n\t\t\t\t\t\t\t\t\t\t:data=\"uploadImgData\"\r\n\t\t\t\t\t\t\t\t\t\t:show-file-list=\"false\"\r\n\t\t\t\t\t\t\t\t\t\t:before-upload=\"onBeforeUploadImage\"\r\n\t\t\t\t\t\t\t\t\t\t:on-success=\"\r\n\t\t\t\t\t\t\t\t\t\t\t(res, file) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn fileChange(res, file, 1);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t\t\t\t\t:on-preview=\"handlePictureCardPreview\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<img v-if=\"topAdvert.advertCoverPicture\" :src=\"topAdvert.advertCoverPicture\" class=\"avatar\" />\r\n\t\t\t\t\t\t\t\t\t\t<i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n\t\t\t\t\t\t\t\t\t</el-upload>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<el-button class=\"upload-box-btn\" @click=\"handleRemoveImg(1)\">清空</el-button>\r\n\t\t\t\t\t\t\t\t<div class=\"tip\">封面图规格750*100，大小不超过2M</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t</section>\r\n\r\n\t\t\t\t<section style=\"display:block;clear:both;\">\r\n\t\t\t\t\t<el-divider></el-divider>\r\n\t\t\t\t\t<p class=\"section--title\">悬浮广告位</p>\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"状态\">\r\n\t\t\t\t\t\t\t<el-select v-model=\"bottomFixedAdvert.advertSpaceStatus\" placeholder=\"请选择\" style=\"width: 100%;\">\r\n\t\t\t\t\t\t\t\t<el-option v-for=\"op in advertStatusSelectOption\" :key=\"op.dictValue\" :label=\"op.dictName\" :value=\"op.dictValue\"></el-option>\r\n\t\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<el-col :span=\"24\">\r\n\t\t\t\t\t\t<el-form-item label=\"广告封面图\" prop=\"covertPicture\">\r\n\t\t\t\t\t\t\t<div class=\"upload-box\">\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<el-upload\r\n\t\t\t\t\t\t\t\t\t\t:action=\"uploadAction\"\r\n\t\t\t\t\t\t\t\t\t\tref=\"upload\"\r\n\t\t\t\t\t\t\t\t\t\tlist-type=\"picture-card\"\r\n\t\t\t\t\t\t\t\t\t\t:headers=\"tokenObj\"\r\n\t\t\t\t\t\t\t\t\t\t:data=\"uploadImgData\"\r\n\t\t\t\t\t\t\t\t\t\t:show-file-list=\"false\"\r\n\t\t\t\t\t\t\t\t\t\t:before-upload=\"onBeforeUploadImage\"\r\n\t\t\t\t\t\t\t\t\t\t:on-success=\"\r\n\t\t\t\t\t\t\t\t\t\t\t(res, file) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn fileChange(res, file, 2);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t\t\t\t\t:on-preview=\"handlePictureCardPreview\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<img v-if=\"bottomFixedAdvert.advertCoverPicture\" :src=\"bottomFixedAdvert.advertCoverPicture\" class=\"avatar\" />\r\n\t\t\t\t\t\t\t\t\t\t<i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n\t\t\t\t\t\t\t\t\t</el-upload>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<el-button class=\"upload-box-btn\" @click=\"handleRemoveImg(2)\">清空</el-button>\r\n\t\t\t\t\t\t\t\t<div class=\"tip\">封面图规格750*100，大小不超过2M</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t</section>\r\n\r\n\t\t\t\t<section style=\"display:block;clear:both;\">\r\n\t\t\t\t\t<el-divider></el-divider>\r\n\t\t\t\t\t<p class=\"section--title\">文字链接广告位</p>\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"状态\" prop=\"advertSpaceStatus\">\r\n\t\t\t\t\t\t\t<el-select v-model=\"wordAdvert.advertSpaceStatus\" placeholder=\"请选择\" style=\"width: 100%;\">\r\n\t\t\t\t\t\t\t\t<el-option v-for=\"op in advertStatusSelectOption\" :key=\"op.dictValue\" :label=\"op.dictName\" :value=\"op.dictValue\"></el-option>\r\n\t\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"标题\" prop=\"advertTitle\"><el-input v-model=\"wordAdvert.advertTitle\" style=\"width: 100%;\"></el-input></el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t</section>\r\n\t\t\t\t<section style=\"display:block;clear:both;\">\r\n\t\t\t\t\t<el-divider></el-divider>\r\n\t\t\t\t\t<p class=\"section--title\">文章内页广告位</p>\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"状态\" prop=\"advertSpaceStatus\">\r\n\t\t\t\t\t\t\t<el-select v-model=\"articleInteriorAdvert.advertSpaceStatus\" placeholder=\"请选择\" style=\"width: 100%;\">\r\n\t\t\t\t\t\t\t\t<el-option v-for=\"op in advertStatusSelectOption\" :key=\"op.dictValue\" :label=\"op.dictName\" :value=\"op.dictValue\"></el-option>\r\n\t\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"标题\" prop=\"advertTitle\"><el-input v-model=\"articleInteriorAdvert.advertTitle\" style=\"width: 100%;\"></el-input></el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<el-col :span=\"24\">\r\n\t\t\t\t\t\t<el-form-item label=\"广告封面图\" prop=\"covertPicture\">\r\n\t\t\t\t\t\t\t<div class=\"upload-box\">\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<el-upload\r\n\t\t\t\t\t\t\t\t\t\t:action=\"uploadAction\"\r\n\t\t\t\t\t\t\t\t\t\tref=\"upload\"\r\n\t\t\t\t\t\t\t\t\t\tlist-type=\"picture-card\"\r\n\t\t\t\t\t\t\t\t\t\t:headers=\"tokenObj\"\r\n\t\t\t\t\t\t\t\t\t\t:data=\"uploadImgData\"\r\n\t\t\t\t\t\t\t\t\t\t:show-file-list=\"false\"\r\n\t\t\t\t\t\t\t\t\t\t:before-upload=\"onBeforeUploadImage\"\r\n\t\t\t\t\t\t\t\t\t\t:on-success=\"\r\n\t\t\t\t\t\t\t\t\t\t\t(res, file) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn fileChange(res, file, 3);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t\t\t\t\t:on-preview=\"handlePictureCardPreview\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<img v-if=\"articleInteriorAdvert.advertCoverPicture\" :src=\"articleInteriorAdvert.advertCoverPicture\" class=\"avatar\" />\r\n\t\t\t\t\t\t\t\t\t\t<i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n\t\t\t\t\t\t\t\t\t</el-upload>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<el-button class=\"upload-box-btn\" @click=\"handleRemoveImg(3)\">清空</el-button>\r\n\t\t\t\t\t\t\t\t<div class=\"tip\">封面图规格750*100，大小不超过2M</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t</section>\r\n\t\t\t</el-form>\r\n\t\t\t<span slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t<el-button @click=\"addVisible = false\">取 消</el-button>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"handleSumbit\">保 存</el-button>\r\n\t\t\t</span>\r\n\t\t</el-dialog>\r\n\t\t<el-dialog :visible.sync=\"dialogImageVisible\"><img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\" /></el-dialog>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tname: 'basetable',\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\t// adUrl: 'http://wz.ad.dawenzz.com.cn/advert_count.html',\r\n\t\t\tadUrl: 'http://test.wz3.ad.sharing662.com/advert_count.html',\r\n\t\t\tuploadAction: this.BASE_URL + 'admin/upload/uploadImgByType',\r\n\r\n\t\t\t// 筛选字段\r\n\t\t\tadvertSpaceCode: 2,\r\n\t\t\tadvertSpaceStatus: 2, //广告位状态\r\n\t\t\tselectId: '', //广告主id\r\n\t\t\tselectKey: '', //广告主名称\r\n\t\t\tstartTime: null,\r\n\t\t\tendTime: null,\r\n\r\n\t\t\ttotalAdvertAmount: 0,\r\n\t\t\ttotalAdvertIpAmountCount: 0,\r\n\t\t\ttotalPurchaseCount: 0,\r\n\r\n\t\t\tadvertSortReadonly: true,\r\n\t\t\tfileList: [],\r\n\t\t\ttableData: [], // 表格数据\r\n\t\t\ttableLoading: true,\r\n\t\t\tpage: 1, // 当前页号\r\n\t\t\tcurrentPage: 1,\r\n\t\t\tcur_total: 0, // 总记录数\r\n\t\t\tpage_size: 50,\r\n\t\t\tmultipleSelection: [],\r\n\t\t\ttokenObj: { token: localStorage.getItem('token') },\r\n\t\t\tuploadImgData: { type: '2' },\r\n\t\t\tselect_cate: '',\r\n\t\t\tselect_word: '',\r\n\t\t\tdel_list: [],\r\n\t\t\teditVisible: false, // 不显示编辑窗口\r\n\t\t\tdelVisible: false,\r\n\t\t\tsize: 10,\r\n\t\t\tadvertStatus: null, //默认广告状态为上架\r\n\t\t\tisBackPage: '',\r\n\t\t\tadTempPosition: 2,\r\n\t\t\tadvertId: null,\r\n\t\t\taddVisible: false, // 不显示广告信息操作表单\r\n\t\t\tdialogImageUrl: '',\r\n\t\t\tdialogImageVisible: false,\r\n\t\t\tadvertStatusArr: [\r\n\t\t\t\t{\r\n\t\t\t\t\tdictValue: '',\r\n\t\t\t\t\tdictName: '全部'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tdictValue: 2,\r\n\t\t\t\t\tdictName: '上架'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tdictValue: 3,\r\n\t\t\t\t\tdictName: '下架'\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tadvertSpaceCodeList: [\r\n\t\t\t\t{ value: 1, name: '顶部banner' },\r\n\t\t\t\t{ value: 2, name: '底部' },\r\n\t\t\t\t{ value: 3, name: '文字链接' },\r\n\t\t\t\t{ value: 4, name: '后退页' },\r\n\t\t\t\t{ value: 5, name: '底部悬浮窗' },\r\n\t\t\t\t{ value: 6, name: '文章内页' }\r\n\t\t\t],\r\n\t\t\tbackPageList: [{ value: '', name: '全部' }, { value: '1', name: '展示' }, { value: '0', name: '不展示' }],\r\n\t\t\tbottomAdvert: {\r\n\t\t\t\tadvertId: '',\r\n\t\t\t\tadvertSpaceStatus: null,\r\n\t\t\t\tadvertSpaceCode: 2,\r\n\t\t\t\tadvertTitle: '',\r\n\t\t\t\tadvertCoverPicture: '',\r\n\t\t\t\tadvertSort: -1,\r\n\t\t\t\tisBackPage: '0',\r\n\t\t\t\tisBanner: '0',\r\n\t\t\t\ttitleIsRed: '0',\r\n\t\t\t\ttitleIsStrong: '0'\r\n\t\t\t},\r\n\t\t\ttopAdvert: {\r\n\t\t\t\tadvertId: '',\r\n\t\t\t\tadvertSpaceStatus: null,\r\n\t\t\t\tadvertSpaceCode: 1,\r\n\t\t\t\tadvertTitle: '',\r\n\t\t\t\tadvertCoverPicture: '',\r\n\t\t\t\tadvertSort: -1,\r\n\t\t\t\tisBackPage: '0',\r\n\t\t\t\tisBanner: '0',\r\n\t\t\t\ttitleIsRed: '0',\r\n\t\t\t\ttitleIsStrong: '0'\r\n\t\t\t},\r\n\t\t\twordAdvert: {\r\n\t\t\t\tadvertId: '',\r\n\t\t\t\tadvertSpaceStatus: null,\r\n\t\t\t\tadvertSpaceCode: 3,\r\n\t\t\t\tadvertTitle: '',\r\n\t\t\t\tadvertCoverPicture: '',\r\n\t\t\t\tadvertSort: -1,\r\n\t\t\t\tisBackPage: '0',\r\n\t\t\t\tisBanner: '0',\r\n\t\t\t\ttitleIsRed: '0',\r\n\t\t\t\ttitleIsStrong: '0'\r\n\t\t\t},\r\n\t\t\tbottomFixedAdvert: {\r\n\t\t\t\tadvertId: '',\r\n\t\t\t\tadvertSpaceStatus: null,\r\n\t\t\t\tadvertSpaceCode: 5,\r\n\t\t\t\tadvertTitle: '',\r\n\t\t\t\tadvertCoverPicture: '',\r\n\t\t\t\tadvertSort: -1,\r\n\t\t\t\tisBackPage: '0',\r\n\t\t\t\tisBanner: '0',\r\n\t\t\t\ttitleIsRed: '0',\r\n\t\t\t\ttitleIsStrong: '0'\r\n\t\t\t},\r\n\t\t\tarticleInteriorAdvert: {\r\n\t\t\t\tadvertId: '',\r\n\t\t\t\tadvertSpaceStatus: null,\r\n\t\t\t\tadvertSpaceCode: 6,\r\n\t\t\t\tadvertTitle: '',\r\n\t\t\t\tadvertCoverPicture: '',\r\n\t\t\t\tadvertSort: -1,\r\n\t\t\t\tisBackPage: '0',\r\n\t\t\t\tisBanner: '0',\r\n\t\t\t\ttitleIsRed: '0',\r\n\t\t\t\ttitleIsStrong: '0'\r\n\t\t\t},\r\n\t\t\tadvertDto: {\r\n\t\t\t\tgroupId: -1,\r\n\t\t\t\tgroupName: '',\r\n\t\t\t\tmaxAdvertSort: -1,\r\n\t\t\t\tadvertId: '',\r\n\t\t\t\tskipUrl: '',\r\n\t\t\t\tadvertStatus: 2,\r\n\t\t\t\tpurchaseCount: null,\r\n\t\t\t\tprepareSkipUrl: null,\r\n\t\t\t\tadvertAmount: '',\r\n\t\t\t\treaderType: '',\r\n\t\t\t\tadvertList: []\r\n\t\t\t},\r\n\t\t\trules: {\r\n\t\t\t\tgroupId: [{ required: true, message: '请输入广告主ID', trigger: 'blur' }],\r\n\t\t\t\tgroupName: [{ required: true, message: '请输入广告名称', trigger: 'blur' }],\r\n\t\t\t\tskipUrl: [{ required: true, message: '请输入跳转链接', trigger: 'blur' }],\r\n\t\t\t\tadvertStatus: [{ required: true, message: '请选择状态', trigger: 'change' }],\r\n\t\t\t\tpurchaseCount: [{ required: true, message: '请输入广告投放量', trigger: 'blur' }],\r\n\t\t\t\tadvertAmount: [{ required: true, message: '请输入广告金额', trigger: 'blur' }],\r\n\t\t\t\treaderType: [{ required: true, message: '请选择广告读者', trigger: 'change' }]\r\n\t\t\t},\r\n\t\t\tmakeData: [\r\n\t\t\t\t{\r\n\t\t\t\t\tformRef: 'form1',\r\n\t\t\t\t\tformModel: {},\r\n\t\t\t\t\tadvertSortInputDisable: false,\r\n\t\t\t\t\timgFileList: [],\r\n\t\t\t\t\tformShow: true,\r\n\t\t\t\t\tformName: '第1条广告'\r\n\t\t\t\t}\r\n\t\t\t], // 生成表单所使用的模板\r\n\t\t\tadvertStatusSelectOption: [\r\n\t\t\t\t{\r\n\t\t\t\t\tdictValue: 1,\r\n\t\t\t\t\tdictName: '未上架'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tdictValue: 2,\r\n\t\t\t\t\tdictName: '上架'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tdictValue: 3,\r\n\t\t\t\t\tdictName: '下架'\r\n\t\t\t\t}\r\n\t\t\t] // 广告信息操作表单广告状态下拉框\r\n\t\t};\r\n\t},\r\n\tcreated() {\r\n\t\tthis.getData();\r\n\t\tthis.getAdvertList();\r\n\t},\r\n\tactivated() {\r\n\t\tthis.getData();\r\n\t},\r\n\tmethods: {\r\n\t\tstartTimeChange() {\r\n\t\t\tif (this.startTime > this.endTime) {\r\n\t\t\t\tthis.$message({\r\n\t\t\t\t\tmessage: '起始日期不得大于结束日期',\r\n\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t});\r\n\t\t\t\tthis.startTime = this.endTime;\r\n\t\t\t}\r\n\t\t},\r\n\t\tendTimeChange() {\r\n\t\t\tif (this.startTime > this.endTime) {\r\n\t\t\t\tthis.$message({\r\n\t\t\t\t\tmessage: '结束日期不得小于起始日期',\r\n\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t});\r\n\t\t\t\tthis.endTime = this.startTime;\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 分页导航\r\n\t\thandleCurrentChange(val) {\r\n\t\t\tthis.currentPage = val;\r\n\t\t\tthis.page = val;\r\n\t\t\tthis.getData();\r\n\t\t},\r\n\t\thandleSizeChange(cur_size) {\r\n\t\t\tthis.size = cur_size;\r\n\t\t\tthis.currentPage = 1;\r\n\t\t\tthis.page = 1;\r\n\t\t\tthis.getData();\r\n\t\t},\r\n\t\toperateListToNumber(list) {\r\n\t\t\tif (!Array.isArray(list)) return;\r\n\t\t\treturn list.filter(item => {\r\n\t\t\t\titem.dictValue = Number(item.dictValue);\r\n\t\t\t\tif (item.dictValue !== 1) return item;\r\n\t\t\t});\r\n\t\t},\r\n\t\tasync handleRefresh() {\r\n\t\t\tlet url = this.BASE_URL + `admin/advert/space/realTimeUpdateAdvertSpace`;\r\n\t\t\tthis.$axios\r\n\t\t\t\t.post(url, {\r\n\t\t\t\t\tpage: this.page,\r\n\t\t\t\t\tsize: this.page_size,\r\n\t\t\t\t\tselectKey: this.selectKey,\r\n\t\t\t\t\tgroupId: this.groupId,\r\n\t\t\t\t\tadvertStatus: this.advertStatus === null ? 2 : this.advertStatus,\r\n\t\t\t\t\tadvertSpaceStatus: this.advertSpaceStatus === null ? 2 : this.advertSpaceStatus,\r\n\t\t\t\t\tadvertSpaceCode: this.advertSpaceCode ? this.advertSpaceCode : 2,\r\n\t\t\t\t\tisBackPage: this.isBackPage\r\n\r\n\t\t\t\t\t// advertSort: \"2\"\r\n\t\t\t\t})\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tconst list = res.data.data.list;\r\n\t\t\t\t\tthis.tableData = this.operateList(list);\r\n\t\t\t\t\tthis.cur_total = res.data.data.total;\r\n\t\t\t\t});\r\n\t\t},\r\n\t\tasync getAdvertList() {\r\n\t\t\tlet {\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tdata: { dictionaryList }\r\n\t\t\t\t}\r\n\t\t\t} = await this.$axios.post(this.BASE_URL + 'admin/advert/space/initAdvertFromData', {});\r\n\t\t\tthis.advertStatusSelectOption = this.operateListToNumber(dictionaryList);\r\n\t\t},\r\n\r\n\t\t// 如果底部的状态是上架状态，\r\n\t\tasync changeBottomAdvertStatus(val) {\r\n\t\t\tif (val == 2) {\r\n\t\t\t\tlet {\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tadvertMaxDto: { maxAdvertSort }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} = await this.$axios.post(this.BASE_URL + 'admin/advert/space/initAdvertFromData', {});\r\n\t\t\t\tthis.bottomAdvert.advertSort = maxAdvertSort + 1;\r\n\t\t\t\tthis.advertSortReadonly = false;\r\n\t\t\t} else {\r\n\t\t\t\tthis.bottomAdvert.advertSort = -1;\r\n\t\t\t\tthis.advertSortReadonly = true;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// 如果主广告下架，那么其他的三个部位的广告（如果有广告选择状态的话）要将它进行下架\r\n\t\tchangeAdvertStatus() {\r\n\t\t\tif (this.advertDto.advertStatus === 3) {\r\n\t\t\t\tthis.bottomAdvert.advertSort = -1;\r\n\t\t\t\tthis.advertSortReadonly = true;\r\n\t\t\t\tif (this.bottomAdvert.advertSpaceStatus) {\r\n\t\t\t\t\tthis.bottomAdvert.advertSpaceStatus = 3;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.topAdvert.advertSpaceStatus) {\r\n\t\t\t\t\tthis.topAdvert.advertSpaceStatus = 3;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.wordAdvert.advertSpaceStatus) {\r\n\t\t\t\t\tthis.wordAdvert.advertSpaceStatus = 3;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.bottomFixedAdvert.advertSpaceStatus) {\r\n\t\t\t\t\tthis.bottomFixedAdvert.advertSpaceStatus = 3;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.articleInteriorAdvert.advertSpaceStatus) {\r\n\t\t\t\t\tthis.articleInteriorAdvert.advertSpaceStatus = 3;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\toperateList(list) {\r\n\t\t\tlet that = this;\r\n\t\t\tif (!Array.isArray(list)) return;\r\n\t\t\tlist.map(item => {\r\n\t\t\t\titem.isBanner = item.isBanner.toString();\r\n\t\t\t\titem.isBackPage = item.isBackPage.toString();\r\n\t\t\t\titem.advertCoverPicture = item.advertCoverPicture.split(',');\r\n\t\t\t});\r\n\t\t\treturn list;\r\n\t\t},\r\n\t\t// 获取 easy-mock 的模拟数据\r\n\t\tasync getData() {\r\n\t\t\tif (this.isBackPage === 1) {\r\n\t\t\t\tthis.adTempPosition = 2;\r\n\t\t\t} else {\r\n\t\t\t\tthis.adTempPosition = this.advertSpaceCode;\r\n\t\t\t}\r\n\t\t\tlet postData = {\r\n\t\t\t\tpage: this.page,\r\n\t\t\t\tsize: this.size,\r\n\t\t\t\tselectKey: this.selectKey,\r\n\t\t\t\tgroupId: this.selectId,\r\n\t\t\t\tstartTime: this.startTime,\r\n\t\t\t\tendTime: this.endTime,\r\n\t\t\t\tadvertStatus: this.advertStatus === null ? 2 : this.advertStatus,\r\n\t\t\t\tadvertSpaceStatus: this.advertSpaceStatus === null ? 2 : this.advertSpaceStatus,\r\n\t\t\t\tadvertSpaceCode: this.adTempPosition,\r\n\t\t\t\tisBackPage: this.isBackPage\r\n\t\t\t};\r\n\t\t\tthis.url = this.BASE_URL + 'admin/advert/space/list';\r\n\t\t\tlet {\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tpageInfo: { list, total },\r\n\t\t\t\t\t\ttotalAdvertAmount,\r\n\t\t\t\t\t\ttotalAdvertIpAmountCount,\r\n\t\t\t\t\t\ttotalPurchaseCount\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} = await this.$axios.post(this.url, postData);\r\n\t\t\tthis.totalAdvertAmount = totalAdvertAmount;\r\n\t\t\tthis.totalAdvertIpAmountCount = totalAdvertIpAmountCount;\r\n\t\t\tthis.totalPurchaseCount = totalPurchaseCount;\r\n\t\t\tthis.tableData = this.operateList(list);\r\n\t\t\tthis.cur_total = total;\r\n\t\t\tthis.tableLoading = false;\r\n\t\t},\r\n\r\n\t\t//根据ID获取广告所有数据\r\n\t\tasync getAdvertById() {\r\n\t\t\tlet url = this.BASE_URL + 'admin/advert/space/getAdvertById';\r\n\t\t\tlet {\r\n\t\t\t\tdata: { data }\r\n\t\t\t} = await this.$axios.post(url, { advertId: this.advertId });\r\n\t\t\tthis.makeEditData(data);\r\n\t\t},\r\n\r\n\t\t// 根据广告位的code取到对应的对象\r\n\t\tfindObjByCode(list, code) {\r\n\t\t\tlet result = '';\r\n\t\t\tif (!Array.isArray(list)) return;\r\n\t\t\tresult = list.find(item => {\r\n\t\t\t\treturn item.advertSpaceCode === code;\r\n\t\t\t});\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\t// 编辑的时候生成相应的广告对象\r\n\t\tmakeEditData(data) {\r\n\t\t\tlet { advertStatus, purchaseCount, skipUrl, groupName, groupId, advertId, incrementPercent, prepareSkipUrl, advertList, readerType, advertAmount } = data;\r\n\t\t\tthis.advertDto = {\r\n\t\t\t\tadvertId,\r\n\t\t\t\tgroupId,\r\n\t\t\t\tgroupName,\r\n\t\t\t\tskipUrl,\r\n\t\t\t\tpurchaseCount,\r\n\t\t\t\tincrementPercent,\r\n\t\t\t\tadvertStatus,\r\n\t\t\t\tprepareSkipUrl,\r\n\t\t\t\treaderType,\r\n\t\t\t\tadvertAmount\r\n\t\t\t};\r\n\t\t\tthis.bottomAdvert = {\r\n\t\t\t\tadvertId: '',\r\n\t\t\t\tadvertSpaceStatus: null,\r\n\t\t\t\tadvertSpaceCode: 2,\r\n\t\t\t\tadvertTitle: '',\r\n\t\t\t\tadvertCoverPicture: '',\r\n\t\t\t\tadvertSort: -1,\r\n\t\t\t\tisBackPage: '0',\r\n\t\t\t\tisBanner: '0',\r\n\t\t\t\ttitleIsRed: '0',\r\n\t\t\t\ttitleIsStrong: '0'\r\n\t\t\t};\r\n\t\t\tthis.topAdvert = {\r\n\t\t\t\tadvertId: '',\r\n\t\t\t\tadvertSpaceStatus: null,\r\n\t\t\t\tadvertSpaceCode: 1,\r\n\t\t\t\tadvertTitle: '',\r\n\t\t\t\tadvertCoverPicture: '',\r\n\t\t\t\tadvertSort: -1,\r\n\t\t\t\tisBackPage: '0',\r\n\t\t\t\tisBanner: '0',\r\n\t\t\t\ttitleIsRed: '0',\r\n\t\t\t\ttitleIsStrong: '0'\r\n\t\t\t};\r\n\t\t\tthis.wordAdvert = {\r\n\t\t\t\tadvertId: '',\r\n\t\t\t\tadvertSpaceStatus: null,\r\n\t\t\t\tadvertSpaceCode: 3,\r\n\t\t\t\tadvertTitle: '',\r\n\t\t\t\tadvertCoverPicture: '',\r\n\t\t\t\tadvertSort: -1,\r\n\t\t\t\tisBackPage: '0',\r\n\t\t\t\tisBanner: '0',\r\n\t\t\t\ttitleIsRed: '0',\r\n\t\t\t\ttitleIsStrong: '0'\r\n\t\t\t};\r\n\t\t\tthis.bottomFixedAdvert = {\r\n\t\t\t\tadvertId: '',\r\n\t\t\t\tadvertSpaceStatus: null,\r\n\t\t\t\tadvertSpaceCode: 5,\r\n\t\t\t\tadvertTitle: '',\r\n\t\t\t\tadvertCoverPicture: '',\r\n\t\t\t\tadvertSort: -1,\r\n\t\t\t\tisBackPage: '0',\r\n\t\t\t\tisBanner: '0',\r\n\t\t\t\ttitleIsRed: '0',\r\n\t\t\t\ttitleIsStrong: '0'\r\n\t\t\t};\r\n\t\t\tthis.articleInteriorAdvert = {\r\n\t\t\t\tadvertId: '',\r\n\t\t\t\tadvertSpaceStatus: null,\r\n\t\t\t\tadvertSpaceCode: 6,\r\n\t\t\t\tadvertTitle: '',\r\n\t\t\t\tadvertCoverPicture: '',\r\n\t\t\t\tadvertSort: -1,\r\n\t\t\t\tisBackPage: '0',\r\n\t\t\t\tisBanner: '0',\r\n\t\t\t\ttitleIsRed: '0',\r\n\t\t\t\ttitleIsStrong: '0'\r\n\t\t\t};\r\n\t\t\tif (advertList && advertList.length > 0) {\r\n\t\t\t\tthis.bottomAdvert = this.findObjByCode(advertList, 2) ? this.findObjByCode(advertList, 2) : this.bottomAdvert;\r\n\t\t\t\tthis.changeadvertSortReadonly(this.bottomAdvert.advertSpaceStatus);\r\n\t\t\t\tthis.bottomAdvert.isBackPage = this.bottomAdvert.isBackPage.toString();\r\n\t\t\t\tthis.bottomAdvert.isBanner = this.bottomAdvert.isBanner.toString();\r\n\t\t\t\tthis.bottomAdvert.titleIsStrong = this.bottomAdvert.titleIsStrong.toString();\r\n\t\t\t\tthis.bottomAdvert.titleIsRed = this.bottomAdvert.titleIsRed.toString();\r\n\t\t\t\t// this.fileList = this.stringToArr(this.bottomAdvert.advertCoverPicture);\r\n\t\t\t\tthis.topAdvert = this.findObjByCode(advertList, 1) ? this.findObjByCode(advertList, 1) : this.topAdvert;\r\n\t\t\t\tthis.wordAdvert = this.findObjByCode(advertList, 3) ? this.findObjByCode(advertList, 3) : this.wordAdvert;\r\n\t\t\t\tthis.bottomFixedAdvert = this.findObjByCode(advertList, 5) ? this.findObjByCode(advertList, 5) : this.bottomFixedAdvert;\r\n\t\t\t\tthis.articleInteriorAdvert = this.findObjByCode(advertList, 6) ? this.findObjByCode(advertList, 6) : this.articleInteriorAdvert;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tchangeadvertSortReadonly(status) {\r\n\t\t\tif (Number(status) === 2) {\r\n\t\t\t\tthis.advertSortReadonly = false;\r\n\t\t\t} else {\r\n\t\t\t\tthis.advertSortReadonly = true;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// stringToArr(str) {\r\n\t\t// \tlet result = [];\r\n\t\t// \tlet tempArr = str.split(',');\r\n\t\t// \tfor (let i = 0; i < tempArr.length; i++) {\r\n\t\t// \t\tresult.push({\r\n\t\t// \t\t\tid: i,\r\n\t\t// \t\t\turl: tempArr[i]\r\n\t\t// \t\t});\r\n\t\t// \t}\r\n\t\t// \treturn result;\r\n\t\t// },\r\n\t\tformaterAdvertSpaceCode(row, column, cellValue, index) {\r\n\t\t\tlet result = '';\r\n\t\t\tif (Number(row.isBackPage) === 1) {\r\n\t\t\t\tresult = '后退页';\r\n\t\t\t} else {\r\n\t\t\t\tresult = cellValue === 1 ? '顶部banner' : cellValue === 2 ? '底部' : cellValue === 3 ? '文字链接' : cellValue === 6 ? '文章内页' : '底部悬浮窗';\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t\t// return cellValue === 1 ? '顶部banner' : cellValue === 2 ? '底部' :'文字链接'\r\n\t\t},\r\n\t\tformaterAdvertStatus(row, column, cellValue, index) {\r\n\t\t\treturn cellValue === 1 ? '未上架' : cellValue === 2 ? '上架' : '下架';\r\n\t\t},\r\n\t\tformaterPercentage(row, column, cellValue, index) {\r\n\t\t\treturn cellValue * 100 + '%';\r\n\t\t},\r\n\t\tformaterReader(row, column, cellValue, index) {\r\n\t\t\tlet result;\r\n\t\t\tif (cellValue === 0) result = '全部';\r\n\t\t\tif (cellValue === 1) result = '转发者';\r\n\t\t\tif (cellValue === 2) result = '阅读者';\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\thandleEdit(index, row) {\r\n\t\t\tthis.advertId = row.advertId;\r\n\t\t\tthis.getAdvertById();\r\n\t\t\tthis.addVisible = true;\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tthis.$refs['advertDto'].clearValidate();\r\n\t\t\t});\r\n\t\t},\r\n\t\thandleAdvertCount(index, row) {\r\n\t\t\twindow.open(this.adUrl + '?adGroupId=' + row.groupId + '&purchaseCount=' + row.purchaseCount);\r\n\t\t},\r\n\r\n\t\tfindChildAdvertId() {\r\n\t\t\tlet tempAdvertId;\r\n\t\t\tif (this.bottomAdvert.advertId) {\r\n\t\t\t\ttempAdvertId = this.bottomAdvert.advertId;\r\n\t\t\t}\r\n\t\t\tif (this.topAdvert.advertId) {\r\n\t\t\t\ttempAdvertId = this.topAdvert.advertId;\r\n\t\t\t}\r\n\t\t\tif (this.wordAdvert.advertId) {\r\n\t\t\t\ttempAdvertId = this.wordAdvert.advertId;\r\n\t\t\t}\r\n\t\t\tif (this.bottomFixedAdvert.advertId) {\r\n\t\t\t\ttempAdvertId = this.bottomFixedAdvert.advertId;\r\n\t\t\t}\r\n\t\t\tif (this.articleInteriorAdvert.advertId) {\r\n\t\t\t\ttempAdvertId = this.articleInteriorAdvert.advertId;\r\n\t\t\t}\r\n\t\t\treturn tempAdvertId;\r\n\t\t},\r\n\r\n\t\t// joinArrayItem(arr) {\r\n\t\t// \tlet resultArr = [];\r\n\t\t// \tlet str = '';\r\n\t\t// \tfor (let i = 0; i < arr.length; i++) {\r\n\t\t// \t\tresultArr.push(arr[i].url);\r\n\t\t// \t}\r\n\t\t// \tstr = resultArr.join(',');\r\n\t\t// \treturn str;\r\n\t\t// },\r\n\r\n\t\t// 如果用户填写了三个广告位则加入到advertList传给后台\r\n\t\tpushAdvertIntoAdvertList() {\r\n\t\t\tlet advertId = this.findChildAdvertId();\r\n\t\t\tlet result = [];\r\n\t\t\tif (this.bottomAdvert.advertSpaceStatus) {\r\n\t\t\t\tthis.bottomAdvert.advertId = advertId;\r\n\t\t\t\t// this.bottomAdvert.advertCoverPicture = this.joinArrayItem(this.fileList);\r\n\t\t\t\tresult.push(this.bottomAdvert);\r\n\t\t\t}\r\n\t\t\tif (this.topAdvert.advertSpaceStatus) {\r\n\t\t\t\tthis.topAdvert.advertId = advertId;\r\n\t\t\t\tresult.push(this.topAdvert);\r\n\t\t\t}\r\n\t\t\tif (this.wordAdvert.advertSpaceStatus) {\r\n\t\t\t\tthis.wordAdvert.advertId = advertId;\r\n\t\t\t\tresult.push(this.wordAdvert);\r\n\t\t\t}\r\n\t\t\tif (this.bottomFixedAdvert.advertSpaceStatus) {\r\n\t\t\t\tthis.bottomFixedAdvert.advertId = advertId;\r\n\t\t\t\tresult.push(this.bottomFixedAdvert);\r\n\t\t\t}\r\n\t\t\tif (this.articleInteriorAdvert.advertSpaceStatus) {\r\n\t\t\t\tthis.articleInteriorAdvert.advertId = advertId;\r\n\t\t\t\tresult.push(this.articleInteriorAdvert);\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\r\n\t\t// 校验各个部位广告的字段\r\n\t\tcheckAdvert() {\r\n\t\t\tlet result = [];\r\n\t\t\t// 1:未上架  2:上架  3:下架\r\n\t\t\t// 如果总状态为下架状态，三个广告位状态都为下架状态 则提示总状态改成上架状态\r\n\t\t\tif (this.advertDto.advertStatus !== 2) {\r\n\t\t\t\tif (\r\n\t\t\t\t\tthis.bottomAdvert.advertSpaceStatus === 2 ||\r\n\t\t\t\t\tthis.topAdvert.advertSpaceStatus === 2 ||\r\n\t\t\t\t\tthis.wordAdvert.advertSpaceStatus === 2 ||\r\n\t\t\t\t\tthis.bottomFixedAdvert.advertSpaceStatus === 2 ||\r\n\t\t\t\t\tthis.articleInteriorAdvert.advertSpaceStatus === 2\r\n\t\t\t\t) {\r\n\t\t\t\t\tresult.push('总广告位与子广告位状态不一样，请修改状态');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.advertDto.advertStatus === 2) {\r\n\t\t\t\tif (\r\n\t\t\t\t\tthis.bottomAdvert.advertSpaceStatus !== 2 &&\r\n\t\t\t\t\tthis.topAdvert.advertSpaceStatus !== 2 &&\r\n\t\t\t\t\tthis.wordAdvert.advertSpaceStatus !== 2 &&\r\n\t\t\t\t\tthis.bottomFixedAdvert.advertSpaceStatus !== 2 &&\r\n\t\t\t\t\tthis.articleInteriorAdvert.advertSpaceStatus === 2\r\n\t\t\t\t) {\r\n\t\t\t\t\tresult.push('总广告位与子广告位状态不一样，请修改状态');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// 底部广告\r\n\t\t\tif (this.bottomAdvert.advertSpaceStatus) {\r\n\t\t\t\t// this.bottomAdvert.advertCoverPicture = this.joinArrayItem(this.fileList);\r\n\t\t\t\tif (this.bottomAdvert.isBanner === '0') {\r\n\t\t\t\t\tif (this.bottomAdvert.advertTitle.trim() === '' || this.bottomAdvert.advertTitle === null) {\r\n\t\t\t\t\t\tresult.push('底部广告标题不能为空');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (this.bottomAdvert.advertCoverPicture.trim() === '' || this.bottomAdvert.advertCoverPicture === null) {\r\n\t\t\t\t\tresult.push('底部广告封面图不能为空');\r\n\t\t\t\t}\r\n\t\t\t\tif (this.bottomAdvert.advertSort.toString().trim() === '' || this.bottomAdvert.advertSort === null) {\r\n\t\t\t\t\tresult.push('底部排序不能为空');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//顶部广告\r\n\t\t\tif (this.topAdvert.advertSpaceStatus) {\r\n\t\t\t\tif (this.topAdvert.advertCoverPicture.trim() === '' || this.topAdvert.advertCoverPicture === null) {\r\n\t\t\t\t\tresult.push('顶部广告封面图不能为空');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// 文字广告\r\n\t\t\tif (this.wordAdvert.advertSpaceStatus) {\r\n\t\t\t\tif (this.wordAdvert.advertTitle.trim() === '' || this.wordAdvert.advertTitle === null) {\r\n\t\t\t\t\tresult.push('文字广告标题不能为空');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet message = result.toString();\r\n\t\t\tif (message) {\r\n\t\t\t\tthis.$message({\r\n\t\t\t\t\tmessage: message,\r\n\t\t\t\t\ttype: 'error'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn result.length <= 0;\r\n\t\t},\r\n\r\n\t\thandleAdd() {\r\n\t\t\tthis.$router.push('/advertising_position_management_add');\r\n\t\t},\r\n\t\t// 新增保存\r\n\t\thandleSumbit() {\r\n\t\t\t// 保存\r\n\t\t\tthis.$refs['advertDto'].validate(valid => {\r\n\t\t\t\tif (valid) {\r\n\t\t\t\t\tthis.$confirm('确认以上信息无误？提交了不能更改', '提示', {\r\n\t\t\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\tif (this.checkAdvert()) {\r\n\t\t\t\t\t\t\t\tthis.advertDto.advertList = this.pushAdvertIntoAdvertList();\r\n\t\t\t\t\t\t\t\tthis.makeData.advertDto = this.advertDto;\r\n\t\t\t\t\t\t\t\tthis.saveAdvertInfo();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(error => {});\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tasync saveAdvertInfo() {\r\n\t\t\tthis.makeData[0].advertDto = this.advertDto;\r\n\t\t\tawait this.$axios.post(this.BASE_URL + 'admin/advert/space/saveAdvertInfo', this.makeData);\r\n\t\t\tthis.addVisible = false;\r\n\t\t\tthis.getData();\r\n\t\t\tthis.$message({\r\n\t\t\t\tmessage: '新增成功',\r\n\t\t\t\ttype: 'success'\r\n\t\t\t});\r\n\t\t},\r\n\t\t// changeBannerStatus(id, isBanner) {\r\n\t\t// \tconst formData = new FormData();\r\n\t\t// \tformData.append('id', id);\r\n\t\t// \tformData.append('isBanner', isBanner == true ? 1 : 0);\r\n\t\t// \tthis.$axios.post(this.BASE_URL + 'admin/advert/space/updateBannerStatus', formData).then(res => {\r\n\t\t// \t\tif (res.data.code == 200) {\r\n\t\t// \t\t\tfor (var i = 0; i < this.tableData.length; i++) {\r\n\t\t// \t\t\t\tif (this.tableData[i].id == id) {\r\n\t\t// \t\t\t\t\tthis.tableData[i].isBanner = isBanner.toString();\r\n\t\t// \t\t\t\t}\r\n\t\t// \t\t\t}\r\n\t\t// \t\t\tthis.$message(res.data.message);\r\n\t\t// \t\t} else {\r\n\t\t// \t\t\tthis.$message(res.data.message);\r\n\t\t// \t\t}\r\n\t\t// \t});\r\n\t\t// },\r\n\t\thandlePictureCardPreview(file) {\r\n\t\t\tthis.dialogImageUrl = file.url;\r\n\t\t\tthis.dialogImageVisible = true;\r\n\t\t},\r\n\t\tfileChange(res, file, index) {\r\n\t\t\t// index: 指向所在那个广告表单\r\n\t\t\tif (index === 0) {\r\n\t\t\t\tthis.bottomAdvert.advertCoverPicture = res.data;\r\n\t\t\t}\r\n\t\t\tif (index === 1) {\r\n\t\t\t\tthis.topAdvert.advertCoverPicture = res.data;\r\n\t\t\t}\r\n\t\t\tif (index === 2) {\r\n\t\t\t\tthis.bottomFixedAdvert.advertCoverPicture = res.data;\r\n\t\t\t}\r\n\t\t\tif (index === 3) {\r\n\t\t\t\tthis.articleInteriorAdvert.advertCoverPicture = res.data;\r\n\t\t\t}\r\n\t\t},\r\n\t\thandleRemoveImg(index) {\r\n\t\t\tif (index === 0) {\r\n\t\t\t\tthis.bottomAdvert.advertCoverPicture = '';\r\n\t\t\t}\r\n\t\t\tif (index === 1) {\r\n\t\t\t\tthis.topAdvert.advertCoverPicture = '';\r\n\t\t\t}\r\n\t\t\tif (index === 2) {\r\n\t\t\t\tthis.bottomFixedAdvert.advertCoverPicture = '';\r\n\t\t\t}\r\n\t\t\tif (index === 3) {\r\n\t\t\t\tthis.articleInteriorAdvert.advertCoverPicture = '';\r\n\t\t\t}\r\n\t\t},\r\n\t\tisLit2M(size) {\r\n\t\t\tif (size / 1024 / 1024 < 2) {\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\tthis.$message({\r\n\t\t\t\t\tmessage: '图片大小不能超过 2MB!'\r\n\t\t\t\t});\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonBeforeUploadImage(file) {\r\n\t\t\tconst isImg = this.isImage(file.name);\r\n\t\t\tconst isLit2M = this.isLit2M(file.size);\r\n\t\t\treturn isImg && isLit2M;\r\n\t\t},\r\n\t\t// handleSuccess(file, fileList) {\r\n\t\t// \tthis.fileList.push({\r\n\t\t// \t\tid: fileList.uid,\r\n\t\t// \t\turl: file.data\r\n\t\t// \t});\r\n\t\t// },\r\n\t\t// handleRemove(file) {\r\n\t\t// \tconst index = this.fileList.findIndex(item => item.id === file.id);\r\n\t\t// \tthis.fileList.splice(index, 1);\r\n\t\t// },\r\n\t\tchangeAdvertSpaceStatus(val) {\r\n\t\t\tthis.page = 1;\r\n\t\t\tif (val === 4) {\r\n\t\t\t\tthis.isBackPage = 1;\r\n\t\t\t} else {\r\n\t\t\t\tthis.isBackPage = 0;\r\n\t\t\t}\r\n\t\t\tif (val == 2) {\r\n\t\t\t\tthis.isBackPage = '';\r\n\t\t\t}\r\n\t\t\tthis.getData();\r\n\t\t},\r\n\r\n\t\tchangeStatus(val) {\r\n\t\t\tthis.advertStatus = val;\r\n\t\t\tthis.page = 1;\r\n\t\t\tthis.getData();\r\n\t\t},\r\n\r\n\t\t// changeAllAdvertStatus(val) {\r\n\t\t// \tthis.page = 1;\r\n\t\t// \tthis.advertSpaceStatus = val;\r\n\t\t// \tthis.getData();\r\n\t\t// },\r\n\r\n\t\t// 以下是校验方法\r\n\t\tisImage(fileName) {\r\n\t\t\t// 判断是否是图片\r\n\t\t\tvar f = fileName;\r\n\t\t\tif (f == null || f == undefined || f == '') {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (!/\\.(?:png|jpg|bmp|gif|PNG|JPG|BMP|GIF|jpeg)$/.test(f)) {\r\n\t\t\t\tthis.$message('类型必须是图片(.png|jpg|bmp|gif|PNG|JPG|BMP|GIF)');\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.fontRed {\r\n\tcolor: #ff0000;\r\n}\r\n.fontBold {\r\n\tfont-weight: bold;\r\n}\r\n.handle-box {\r\n\tmargin-bottom: 20px;\r\n}\r\n.handle-label {\r\n\twidth: 150px;\r\n}\r\n.handle-select {\r\n\twidth: 120px;\r\n}\r\n.handle-text {\r\n\tdisplay: flex;\r\n\tmargin-bottom: 20px;\r\n}\r\n.handle-text > div {\r\n\tmargin-right: 40px;\r\n}\r\n.handle-input {\r\n\twidth: 300px;\r\n\tdisplay: inline-block;\r\n}\r\n.del-dialog-cnt {\r\n\tfont-size: 16px;\r\n\ttext-align: center;\r\n}\r\n.table {\r\n\twidth: 100%;\r\n\tfont-size: 14px;\r\n}\r\n.red {\r\n\tcolor: #ff0000;\r\n}\r\n.mr10 {\r\n\tmargin-right: 10px;\r\n}\r\n.section--title {\r\n\tcolor: #000;\r\n\tfont-weight: 700;\r\n\tmargin-bottom: 16px;\r\n\tmargin-top: -6px;\r\n}\r\n.tip {\r\n\tpadding-left: 10px;\r\n\tcolor: #c0c4cc;\r\n}\r\n</style>\n"]}]}